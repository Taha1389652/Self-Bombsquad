# Auto Message v3.0 - API9
# Copyright 2025 - ByTaha
# Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø·Ø§Ù‡Ø§ Ø§Ø³ØªØ§Ø¯Ø´Ø±ÛŒÙ (@Taha_OstadSharif)
# Ø§ÛŒÙ† Ù…ÙˆØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
from babase import (
    clipboard_is_supported as CIS,
    clipboard_get_text as CGT,
    clipboard_has_text as CHT,
    Plugin
)
from bauiv1 import (
    get_special_widget as gsw,
    containerwidget as cw,
    screenmessage as push,
    checkboxwidget as chk,
    scrollwidget as sw,
    buttonwidget as bw,
    SpecialChar as sc,
    textwidget as tw,
    checkboxwidget as cb,
    gettexture as gt,
    apptimer as teck,
    getsound as gs,
    UIScale as uis,
    charstr as cs,
    app as APP,
    Call
)
from bascenev1 import (
    get_chat_messages as GCM,
    chatmessage as CM,
    get_connection_to_host_info_2 as get_connection_info,
    connect_to_party as original_connect,
    disconnect_from_host as original_disconnect,
    get_foreground_host_activity
)
from _babase import get_string_width as strw
from datetime import datetime as DT
from bauiv1lib import party
from babase import apptimer as teck
from bauiv1lib.popup import PopupWindow, PopupMenu
from typing import Sequence, Tuple, Optional, Callable
from bauiv1lib.colorpicker import ColorPicker
import random
from bauiv1lib.party import PartyWindow
from bauiv1lib.ingamemenu import InGameMenuWindow
import math
import json
import os
import socket
import threading
import time
import bascenev1 as bs
import bauiv1 as bui
import _babase
import babase
import bascenev1 as bs
import bauiv1 as bui

# --- Import Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Account Switcher ---
from bauiv1lib.confirm import ConfirmWindow
from bauiv1lib.account.settings import AccountSettingsWindow
from os import listdir, path, mkdir, remove
from shutil import copy, rmtree
from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from typing import Optional
    
# Ù„ÛŒØ³Øª Ø¬ÙˆÚ©â€ŒÙ‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ú©ÙˆØªØ§Ù‡ Ùˆ Ù…ØªÙ†ÙˆØ¹
JOKES = [
    "Ù¾Ø¯Ø±: Ø¯Ø±Ø³ Ø®ÙˆÙ†Ø¯ÛŒØŸ Ú¯ÙØªÙ…: Ø®ÙˆØ§Ø¨ Ø¹Ù„Ù…ÛŒ Ø¨ÙˆØ¯Ù…!",
    "Ù…Ø§Ù…Ø§Ù†: Ú¯ÙˆØ´ÛŒ Ø¯Ø³ØªØªÙ‡ØŸ Ú¯ÙØªÙ…: Ø¢Ù¾Ø¯ÛŒØª Ø²Ù†Ø¯Ú¯ÛŒÙ‡!",
    "Ù‡Ù…Ú©Ø§Ø±: Ú†Ø±Ø§ Ø¯ÛŒØ± Ø§ÙˆÙ…Ø¯ÛŒØŸ Ú¯ÙØªÙ…: ØªØ±Ø§ÙÛŒÚ© Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ!",
    "Ø¯ÙˆØ³Øª: Ú†Ø±Ø§ Ø®Ø³ØªÙ‡â€ŒØ§ÛŒØŸ Ú¯ÙØªÙ…: ØªØ¹Ø·ÛŒÙ„Ø§Øª ØªÙ…Ø±ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯Ø®ØªØ±: Ú¯Ø±Ø³Ù†Ù…Ù‡! Ú¯ÙØªÙ…: Ù…Ù†Ù…ØŒ Ø¨Ø±Ùˆ Ù…Ø§Ù…Ø§Ù† Ø±Ùˆ Ø¨Ú¯Ùˆ!",
    "Ù¾Ø³Ø±: Ù¾ÙˆÙ„ Ù…ÛŒØ®ÙˆØ§Ù…! Ú¯ÙØªÙ…: Ù…Ù†Ù… Ù…Ù†ØªØ¸Ø± Ù…Ø¹Ø¬Ø²Ù…!",
    "ÙØ±ÙˆØ´Ù†Ø¯Ù‡: ØªØ®ÙÛŒÙ Ø¯Ø§Ø±ÛŒÙ…! Ú¯ÙØªÙ…: Ù¾Ø³ ÙØ±Ø¯Ø§ Ù…ÛŒØ§Ù…!",
    "Ù‡Ù…Ø³Ø±: Ø¯ÙˆØ³Ù… Ø¯Ø§Ø±ÛŒØŸ Ú¯ÙØªÙ…: Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø¯ÛŒØ±ÙˆØ²!",
    "Ø±Ø¦ÛŒØ³: Ú†Ø±Ø§ Ø§Ø³ØªØ±Ø³ Ø¯Ø§Ø±ÛŒØŸ Ú¯ÙØªÙ…: ØªÙ…Ø±ÛŒÙ† Ø¢Ø±Ø§Ù…Ø´ Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯Ú©ØªØ±: ÙˆØ±Ø²Ø´ Ú©Ù†! Ú¯ÙØªÙ…: Ú†Ø´Ù…ØŒ Ú©Ø§Ù†Ø§Ù„ ÙˆØ±Ø²Ø´Ùˆ Ù†Ú¯Ø§Ù‡!",
    "Ù…Ø¹Ù„Ù…: ØªÚ©Ø§Ù„ÛŒÙØªÙˆ Ù†Ú©Ø±Ø¯ÛŒØŸ Ú¯ÙØªÙ…: ÙØ±ØµØª Ø·Ù„Ø§ÛŒÛŒ Ø¯Ø§Ø¯Ù…!",
    "Ù¾Ø¯Ø±: Ø¨Ù„Ù†Ø¯ Ø´Ùˆ! Ú¯ÙØªÙ…: Ø¨Ø§ ØªØ®Øª Ù‡Ù†ÙˆØ² Ø¯Ø¹ÙˆØ§Ù…Ù‡!",
    "Ù…Ø§Ù…Ø§Ù†: Ø¨ÛŒØ§ Ú©Ù…Ú©! Ú¯fØªÙ…: Ø§Ù†Ø±Ú˜ÛŒ Ø¬Ù…Ø¹ Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯Ø®ØªØ±: Ø¨ÛŒØ±ÙˆÙ† Ø¨Ø±ÛŒÙ…! Ú¯ÙØªÙ…: Ù…Ø³Ø§ÙØ±Øª Ø§ÛŒÙ†Ø³ØªØ§ Ù…ÛŒØ±Ù…!",
    "Ø¯ÙˆØ³Øª: Ø¬ÙˆØ§Ø¨ Ù†Ù…ÛŒØ¯ÛŒØŸ Ú¯ÙØªÙ…: Ø¨Ø§ Ø®ÙˆØ¯Ù… Ú†Øª Ù…ÛŒÚ©Ù†Ù…!",
    "Ù¾Ø¯Ø±: Ø¯Ø±Ø³ Ù†Ù…ÛŒØ®ÙˆÙ†ÛŒØŸ Ú¯ÙØªÙ…: Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ù… Ù…Ø®ÙÛŒÙ‡!",
    "Ù…Ø§Ù…Ø§Ù†: Ú¯ÙˆØ´ÛŒ Ø¯Ø³ØªØªÙ‡ØŸ Ú¯ÙØªÙ…: Ø¨Ù‡Ø´ Ø§Ø³ØªØ±Ø§Ø­Øª Ù…ÛŒØ¯Ù…!",
    "Ù‡Ù…Ú©Ø§Ø±: Ú†Ø±Ø§ Ø´Ø§Ø¯Ø§Ø¨ÛŒØŸ Ú¯ÙØªÙ…: Ù‚Ù‡ÙˆÙ‡ Ùˆ Ø´ÙˆØ®ÛŒ ØªØ±Ú©ÛŒØ¨!",
    "Ù…Ø¹Ù„Ù…: Ú†Ø±Ø§ Ø®ÙˆØ§Ø¨ÛŒØ¯ÛŒØŸ Ú¯ÙØªÙ…: Ø±ÙˆÛŒØ§ÛŒ Ù…ÙˆÙÙ‚ÛŒØªØª Ø±Ùˆ Ù…ÛŒØ¨ÛŒÙ†Ù…!",
    "Ù¾Ø¯Ø±: Ø¨Ù„Ù†Ø¯ Ø´Ùˆ! Ú¯ÙØªÙ…: Ø¨Ø§ Ø¨Ø§Ù„Ø´ Ù…Ø¨Ø§Ø±Ø²Ù‡ Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯Ø®ØªØ±: Ø­ÙˆØµÙ„Ù… Ø³Ø±Ø±Ù‡! Ú¯ÙØªÙ…: Ø¨Ø±Ùˆ Ù…Ø§Ù…Ø§Ù†Ùˆ Ø³Ø±Ú¯Ø±Ù… Ú©Ù†!",
    "Ø¯ÙˆØ³Øª: Ú†Ø±Ø§ Ø³Ø§Ú©ØªÛŒØŸ Ú¯ÙØªÙ…: Ø¬Ø§ Ø¨Ø±Ø§ÛŒ Ø­Ø±ÙØª Ú¯Ø°Ø§Ø´ØªÙ…!",
    "Ø±Ø¦ÛŒØ³: Ø§Ø´ØªØ¨Ø§Ù‡ Ú©Ø±Ø¯ÛŒØŸ Ú¯ÙØªÙ…: Ù…ÛŒØ®ÙˆØ§Ø³ØªÙ… Ø§Ù†Ø³Ø§Ù† Ø¨ÙˆØ¯Ù†Ù… Ø«Ø§Ø¨Øª!",
    "ÙØ±ÙˆØ´Ù†Ø¯Ù‡: Ø§ÛŒÙ† Ù„Ø¨Ø§Ø³ØŸ Ú¯ÙØªÙ…: Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ Ù¾ÙˆÙ„Ù… Ù…ÛŒØ§Ø¯!",
    "Ù‡Ù…Ø³Ø±: Ø®Ø±ÛŒØ¯ Ú©Ø±Ø¯ÛŒØŸ Ú¯fØªÙ…: Ø¢Ø±Ù‡ØŒ Ø¨Ø§ ÛŒÙ‡ Ù†ÙˆÙ† Ù‡Ù… Ø®Ø±Ø¬!",
    "Ù¾Ø³Ø±: Ù¾ÛŒØ§Ù…Ù… Ø±Ùˆ Ø¯ÛŒØ¯ÛŒØŸ Ú¯ÙØªÙ…: Ø¢Ø±Ù‡ØŒ ØªÙˆ Ø®ÙˆØ§Ø¨ Ø¯ÛŒØ±ÙˆØ²!",
    "Ø¯Ø®ØªØ±: Ú¯Ø±Ø³Ù†Ù…Ù‡! Ú¯ÙØªÙ…: Ù…Ù†Ù…ØŒ Ø¨Ø§ Ù‡Ù… Ú¯Ø±Ø³Ù†Ú¯ÛŒ Ú©Ù†ÛŒÙ…!",
    "Ø¯ÙˆØ³Øª: Ú†Ø±Ø§ Ø¬Ø¯ÛŒØŸ Ú¯ÙØªÙ…: Ø¨Ø±Ø§ÛŒ Ø´ÙˆØ®ÛŒ ØªÙ…Ø±ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…!",
    "Ø±Ø¦ÛŒØ³: Ø§Ø³ØªØ¹ÙØ§ Ù…ÛŒØ¯ÛŒØŸ Ú¯ÙØªÙ…: Ù…Ø¯ÛŒØ± Ø´ÙˆØ®ÛŒ Ù…ÛŒØ´Ù…!",
    "Ù…Ø¹Ù„Ù…: Ù†Ù…ÛŒØ®Ù†Ø¯ÛŒØŸ Ú¯fØªÙ…: Ø¯Ù†Ø¯ÙˆÙ†Ø§Ù… Ø³ÙÛŒØ¯ Ø¨Ù…ÙˆÙ†Ù‡!",
    "Ù¾Ø¯Ø±: Ù†Ù…ÛŒØ®ÙˆÙ†ÛŒØŸ Ú¯fØªÙ…: Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ù…Ùˆ Ù…Ø®ÙÛŒ Ù…ÛŒÚ©Ù†Ù…!",
    "Ù…Ø§Ù…Ø§Ù†: ØºØ°Ø§ Ù†Ù…ÛŒØ®ÙˆØ±ÛŒØŸ Ú¯fØªÙ…: ØªÙ…Ø±ÛŒÙ† Ú¯Ø±Ø³Ù†Ú¯ÛŒÙ…Ù‡!",
    "Ø¯ÙˆØ³Øª: Ø¯ÛŒØ± Ø§ÙˆÙ…Ø¯ÛŒØŸ Ú¯fØªÙ…: Ø±Ø§Ù‡Ùˆ Ú¯Ù… Ú©Ø±Ø¯Ù…ØŒ Ù¾ÛŒØ¯Ø§Ø´ Ú©Ø±Ø¯Ù…!",
    "Ù‡Ù…Ú©Ø§Ø±: Ú†Ø±Ø§ Ø´Ø§Ø¯Ø§Ø¨ÛŒØŸ Ú¯fØªÙ…: Ù‚Ù‡ÙˆÙ‡ Ø¨Ø§ Ø§Ù†Ø±Ú˜ÛŒ Ù…Ø«Ø¨Øª!",
    "Ø¯Ø®ØªØ±: Ù†Ø§Ø±Ø§Ø­ØªÛŒØŸ Ú¯fØªÙ…: Ø¨Ø±Ø§ÛŒ Ø´Ø§Ø¯ÛŒ ØªÙ…Ø±ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…!",
    "Ù¾Ø³Ø±: Ø¨Ø§Ø²ÛŒ Ø¨Ø®Ø±! Ú¯fØªÙ…: Ù…Ù†ØªØ¸Ø± Ù‚Ù‡Ø±Ù…Ø§Ù† Ø®Ø±ÛŒØ¯Ù…!",
    "ÙØ±ÙˆØ´Ù†Ø¯Ù‡: Ø§ÛŒÙ† Ù…Ø¯Ù„ØŸ Ú¯fØªÙ…: Ù‚Ø¯ÛŒÙ…ÛŒØ´ Ù‡Ù†ÙˆØ² Ø®ÙÙ†â€ŒØªØ±Ù‡!",
    "Ù‡Ù…Ø³Ø±: Ú©Ø¯ÙˆÙ…Ùˆ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒØŸ Ú¯fØªÙ…: Ø§ÙˆÙ†ÛŒ Ú©Ù‡ Ø³Ø§Ú©ØªÙ‡!",
    "Ø±Ø¦ÛŒØ³: Ø¯ÛŒØ± Ú©Ø±Ø¯ÛŒØŸ Ú¯fØªÙ…: Ø®ÙˆØ§Ø¨ Ø¨ÙˆØ¯Ù… Ú©Ù‡ Ø¯ÛŒØ± Ù†Ø´Ù‡!",
    "Ø¯Ú©ØªØ±: Ø¯Ø§Ø±Ùˆ Ø¨Ø®ÙˆØ±! Ú¯fØªÙ…: Ú†Ø´Ù…ØŒ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø«Ø±Ø´!",
    "Ù…Ø§Ù…Ø§Ù†: Ø§ØªØ§Ù‚Øª Ø±Ùˆ ØªÙ…ÛŒØ² Ú©Ù†! Ú¯fØªÙ…: Ø­Ø§Ù„ Ø·Ø¨ÛŒØ¹ÛŒ Ù…ÛŒØ¯Ù…!",
    "Ù¾Ø¯Ø±: Ø¨Ù„Ù†Ø¯ Ø´Ùˆ! Ú¯fØªÙ…: Ø¨Ø§ Ø²Ù…ÛŒÙ† Ú©Ø´ØªÛŒ Ù…ÛŒÚ¯ÛŒØ±Ù…!",
    "Ù…Ø¹Ù„Ù…: Ù†Ù…ÛŒÙÙ‡Ù…ÛŒØŸ Ú¯fØªÙ…: Ù…ÛŒØ®ÙˆØ§Ù… Ø¨ÛŒØ´ØªØ± ØªÙˆØ¶ÛŒØ­ Ø¨Ø¯ÛŒØ¯!",
    "Ø¯ÙˆØ³Øª: Ø¬ÙˆØ§Ø¨ Ù†Ù…ÛŒØ¯ÛŒØŸ Ú¯fØªÙ…: Ø¨Ø§ Ø®ÙˆØ¯Ù… Ú†Øª Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯Ø®ØªØ±: Ø¨ÛŒØ±ÙˆÙ† Ø¨Ø±ÛŒÙ…! Ú¯fØªÙ…: Ø§Ù„Ø§Ù† Ù…Ø³Ø§ÙØ±Øª Ø§ÛŒÙ†Ø³ØªØ§!",
    "Ù¾Ø³Ø±: Ù¾ÙˆÙ„ Ù…ÛŒØ®ÙˆØ§Ù…! Ú¯fØªÙ…: Ù…Ù†Ù… Ù…Ù†ØªØ¸Ø±Ù… Ú©Ø³ÛŒ Ø¨Ø¯Ù‡!",
    "Ù‡Ù…Ú©Ø§Ø±: ØºÙ…Ú¯ÛŒÙ†ÛŒØŸ Ú¯fØªÙ…: Ø¨Ø±Ø§ÛŒ Ø´Ø§Ø¯ÛŒ ØªÙ…Ø±ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…!",
    "Ø¯ÙˆØ³Øª: Ú†Ø±Ø§ Ø¬Ø¯ÛŒâ€ŒØ§ÛŒØŸ Ú¯fØªÙ…: Ø¨Ø±Ø§ÛŒ Ø´ÙˆØ®ÛŒ ØªÙ…Ø±ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…!",
    "Ù¾Ø¯Ø±: Ù†Ù…ÛŒØ®ÙˆÙ†ÛŒØŸ Ú¯fØªÙ…: Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ù…Ùˆ Ù…Ø®ÙÛŒ Ù…ÛŒÚ©Ù†Ù…!",
    "Ù…Ø§Ù…Ø§Ù†: ØºØ°Ø§ Ø¨Ø®ÙˆØ±! Ú¯fØªÙ…: Ø§Ù„Ø§Ù† Ø±Ú˜ÛŒÙ… ÙØ¶Ø§ÛŒÛŒ Ø¯Ø§Ø±Ù…!",
    "Ø±Ø¦ÛŒØ³: Ú†Ø±Ø§ Ø§ÛŒÙ†Ú©Ø§Ø±Ùˆ Ú©Ø±Ø¯ÛŒØŸ Ú¯fØªÙ…: Ø¨Ø¨ÛŒÙ†Ù… ØªÙˆØ¬Ù‡ Ø¯Ø§Ø±ÛŒ!",
    "ÙØ±ÙˆØ´Ù†Ø¯Ù‡: ØªØ®ÙÛŒÙ Ø¯Ø§Ø±ÛŒÙ…! Ú¯fØªÙ…: Ù¾Ø³ ÙØ±Ø¯Ø§ Ù…ÛŒØ§Ù…!",
    "Ù‡Ù…Ø³Ø±: Ø¯ÙˆØ³Ù… Ø¯Ø§Ø±ÛŒØŸ Ú¯fØªÙ…: Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø¯ÛŒØ±ÙˆØ²ØŒ Ú©Ù…ØªØ± ÙØ±Ø¯Ø§!",
    "Ù¾Ø³Ø±: Ù¾ÙˆÙ„ ØªÙˆ Ø¬ÛŒØ¨ÛŒ! Ú¯fØªÙ…: Ù…Ù†Ù… Ù…Ù†ØªØ¸Ø±Ù…!",
    "Ø¯Ø®ØªØ±: Ø­ÙˆØµÙ„Ù… Ø³Ø±Ø±Ù‡! Ú¯fØªÙ…: Ø¨Ø±Ùˆ Ù…Ø§Ù…Ø§Ù†Ùˆ Ø³Ø±Ú¯Ø±Ù… Ú©Ù†!",
    "Ø¯ÙˆØ³Øª: Ø³Ø§Ú©ØªÛŒØŸ Ú¯fØªÙ…: Ø¬Ø§ Ø¨Ø±Ø§ÛŒ Ø­Ø±ÙØª Ú¯Ø°Ø§Ø´ØªÙ…!",
    "Ù…Ø¹Ù„Ù…: ØªÚ©Ø§Ù„ÛŒÙØŸ Ú¯fØªÙ…: Ù…ÛŒØ®ÙˆØ§Ø³ØªÙ… ÙØ±ØµØª Ø¨Ø¯Ù…!"
]

#Ø¶Ø±Ø¨ Ø§Ù„Ù…Ø«Ù„ Ù‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ú©ÙˆØªØ§Ù‡
PROVERBS = [
    "Ø¢Ø¨ Ú©Ù‡ Ø§Ø² Ø³Ø± Ú¯Ø°Ø´ØªØŒ Ú†Ù‡ ÛŒÚ© ÙˆØ¬Ø¨ Ú†Ù‡ ØµØ¯ ÙˆØ¬Ø¨.",
    "Ø§Ø² Ú©ÙˆØ²Ù‡ Ù‡Ù…Ø§Ù† Ø¨Ø±ÙˆÙ† ØªØ±Ø§ÙˆØ¯ Ú©Ù‡ Ø¯Ø± Ø§ÙˆØ³Øª.",
    "Ø¨Ø§Ø¯ Ø¢ÙˆØ±Ø¯Ù‡ Ø±Ø§ Ø¨Ø§Ø¯ Ù…ÛŒâ€ŒØ¨Ø±Ø¯.",
    "Ú©Ø§Ø± Ø§Ù…Ø±ÙˆØ² Ø±Ø§ Ø¨Ù‡ ÙØ±Ø¯Ø§ Ù…ÛŒâ€ŒØ§Ù†Ø¯Ø§Ø².",
    "Ù‡Ø± Ú©Ù‡ Ø¨Ø§Ù…Ø´ Ø¨ÛŒØ´ØŒ Ø¨Ø±ÙØ´ Ø¨ÛŒØ´â€ŒØªØ±.",
    "Ù‡Ø±Ú†Ù‡ Ø¨Ú©Ø§Ø±ÛŒØŒ Ù‡Ù…Ø§Ù† Ø±Ø§ Ø¯Ø±Ùˆ Ù…ÛŒâ€ŒÚ©Ù†ÛŒ.",
    "Ù†Ù‡ Ù‡Ø±Ú©Ù‡ Ú†Ù‡Ø±Ù‡ Ø¨Ø±Ø§ÙØ±ÙˆØ®ØªØŒ Ø¯Ù„ Ø±Ø¨ÙˆØ¯.",
    "Ù‡Ø± Ø³Ø®Ù† Ø¬Ø§ÛŒÛŒ Ùˆ Ù‡Ø± Ù†Ú©ØªÙ‡ Ù…Ú©Ø§Ù†ÛŒ Ø¯Ø§Ø±Ø¯.",
    "Ù‡Ø± Ú©Ù‡ Ø·Ø§ÙˆÙˆØ³ Ø®ÙˆØ§Ù‡Ø¯ØŒ Ø¬ÙˆØ± Ù‡Ù†Ø¯ÙˆØ³ØªØ§Ù† Ú©Ø´Ø¯.",
    "Ø¯ÙˆØ³ØªÛŒ Ú©Ù† Ø§Ù…Ø§ Ø¯Ù„Ø¨Ø³ØªÙ‡ Ù…Ø¨Ø§Ø´.",
    "Ø¢ÙØªØ§Ø¨ Ù…Ù‡Ø±Ø¨Ø§Ù†â€ŒØªØ± Ø§Ø² Ú†Ø±Ø§Øº Ø§Ø³Øª.",
    "Ø§Ø² Ø¯Ø´Ù…Ù† Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ… Ø¯Ø§Ø´ØªØŒ Ù†Ù‡ Ø§Ø² Ø¯ÙˆØ³Øª.",
    "Ø¯ÛŒÚ¯ Ø¨Ù‡ Ø¯ÛŒÚ¯ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ Ø±ÙˆØª Ø³ÛŒØ§Ù‡.",
    "ØªØ§ Ù†Ú¯ÙˆØ¦ÛŒ Ú†Ø±Ø§ØŒ Ù†Ù…ÛŒâ€ŒÙÙ‡Ù…ÛŒ.",
    "Ù†Ù‡ Ø®Ø§Ù†ÛŒ Ø¢Ù…Ø¯Ù‡ØŒ Ù†Ù‡ Ø®Ø§Ù†ÛŒ Ø±ÙØªÙ‡.",
    "Ú©ÙˆØ²Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù†Ø´Ú©Ù†Ø¯ØŒ Ø¢Ø¨ Ø¯Ø± Ø¢Ù† Ù†Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯.",
    "Ø®Ø´Øª Ø§ÙˆÙ„ Ú†ÙˆÙ† Ù†Ù‡Ø¯ Ù…Ø¹Ù…Ø§Ø± Ú©Ø¬ØŒ ØªØ§ Ø«Ø±ÛŒØ§ Ù…ÛŒâ€ŒØ±ÙˆØ¯ Ø¯ÛŒÙˆØ§Ø± Ú©Ø¬.",
    "Ø­Ø³Ø§Ø¨ Ù¾Ø§Ú©ØŒ Ø¯Ø³Øª Ù¾Ø§Ú©.",
    "Ú©Ø§Ø± Ù†ÛŒÚ©Ùˆ Ú©Ø±Ø¯Ù† Ø§Ø² Ù¾Ø± Ú©Ø±Ø¯Ù† Ø§Ø³Øª.",
    "ÙˆÙ‚Øª Ø·Ù„Ø§Ø³Øª.",
    "Ø¢Ø¨ Ø±ÙØªÙ‡ Ø±Ø§ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ù‡ Ø¬ÙˆÛŒ Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯.",
    "Ø¨Ø§ Ø¯ÙˆØ³ØªØ§Ù† Ø¨Ø§ÛŒØ¯ Ù…Ù‡Ø±Ø¨Ø§Ù† Ø¨ÙˆØ¯.",
    "Ù¾ÛŒØ´ Ø§Ø² Ø¢Ù†Ú©Ù‡ Ø¨Ø®ÙˆØ±ÛŒØŒ Ø¨Ø¨ÛŒÙ†.",
    "Ø®Ø± Ø®ÙˆØ¯ Ø±Ø§ Ù†Ø´Ù†Ø§Ø³Ø¯ØŒ Ù…Ø±Ø¯Ù… Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ø´Ù†Ø§Ø³Ù†Ø¯.",
    "Ù‚ÙˆØ±Ø¨Ø§ØºÙ‡ Ø±Ø§ Ø¯Ù… Ø§ØºØ´ØªÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.",
    "Ø³ÛŒØ§Ù‡â€ŒØ±ÙˆÛŒØ§Ù† Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¸Ù„Ù…ØªÙ†Ø¯.",
    "Ø¯ÙˆØ¯ Ø§Ø² Ú©Ù†Ø¯Ù‡ Ø¨Ù„Ù†Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
    "Ù‡Ø± Ú†Ù‡ Ú¯ÙˆØ¦ÛŒØŒ Ú¯ÙˆØ´ Ø´Ù†ÙˆØ§ Ù„Ø§Ø²Ù… Ø§Ø³Øª.",
    "Ù…Ø§Ù‡ Ø¯Ø± Ø¢Ø¨ Ù¾ÛŒØ¯Ø§ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
    "Ú¯Ø± ØµØ¨Ø± Ú©Ù†ÛŒØŒ Ø² ØºÙˆØ±Ù‡ Ø­Ù„ÙˆØ§ Ø³Ø§Ø²ÛŒ.",
    "Ø¨ÛŒâ€ŒØµØ¨Ø±ØŒ Ø¨ÛŒâ€ŒÚ©Ø§Ø±.",
    "Ø®Ù†Ø¯Ù‡ Ø¨Ø± Ù‡Ø± Ø¯Ø±Ø¯ Ø¨ÛŒâ€ŒØ¯Ø±Ù…Ø§Ù† Ø¯ÙˆØ§Ø³Øª.",
    "Ú©Ø§Ø± Ø¨Ø²Ø±Ú¯ Ø±Ø§ Ø¨Ø§ Ù‚Ø¯Ù…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú© Ø´Ø±ÙˆØ¹ Ú©Ù†.",
    "Ú†ÙˆØ¨ Ø®Ø¯Ø§ ØµØ¯Ø§ Ù†Ø¯Ø§Ø±Ø¯.",
    "Ø¹Ø§Ù‚Ø¨Øª Ú¯Ø±Ú¯ Ø²Ø§Ø¯Ù‡ Ú¯Ø±Ú¯ Ø´ÙˆØ¯.",
    "Ø¢Ø¨ Ø¨Ù‡ Ø¢Ø³ÛŒØ§Ø¨ Ø¯Ø´Ù…Ù† Ù†Ø±ÛŒØ².",
    "Ù¾Ø§ÛŒØ§Ù† Ø´Ø¨ Ø³ÛŒÙ‡ Ø³Ù¾ÛŒØ¯ Ø§Ø³Øª.",
    "Ø³Ù†Ú¯ Ø¨Ø²Ø±Ú¯ Ø¹Ù„Ø§Ù…Øª Ù†Ø²Ø¯Ù† Ø§Ø³Øª.",
    "Ù¾Ø§ÛŒØ§Ù† Ù‡Ø± Ú©Ø§Ø±ØŒ Ø´Ø±ÙˆØ¹ Ú©Ø§Ø± Ø¯ÛŒÚ¯Ø± Ø§Ø³Øª.",
    "Ù†Ù‡ Ù‡Ù…Ù‡ Ø¢Ù†Ú†Ù‡ Ù…ÛŒâ€ŒØ¯Ø±Ø®Ø´Ø¯ Ø·Ù„Ø§Ø³Øª.",
    "Ù‡Ø± Ú©Ù‡ bØ§Ù…Ø´ Ø¨ÛŒØ´ØŒ Ø¨Ø±fØ´ Ø¨ÛŒØ´â€ŒØªØ±.",
    "Ø¨Ø§ ÛŒÚ© Ú¯Ù„ Ø¨Ù‡Ø§Ø± Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
    "Ú©Ø§Ø± Ø±Ø§ Ø¨Ù‡ Ø§Ù‡Ù„Ø´ Ø¨Ø³Ù¾Ø§Ø±.",
    "Ø§Ø² Ø§ÛŒÙ† Ø³ØªÙˆÙ† ØªØ§ Ø¢Ù† Ø³ØªÙˆÙ† ÙØ±Ø¬ÛŒ Ø§Ø³Øª.",
    "Ù…Ø§Ø± Ú¯Ø²ÛŒØ¯Ù‡ Ø§Ø² Ø±ÛŒØ³Ù…Ø§Ù† Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯ Ù…ÛŒâ€ŒØªØ±Ø³Ø¯.",
    "Ø¯Ùˆ ØµØ¯ Ú¯ÙØªÙ‡ØŒ Ù†ÛŒÙ… Ú©Ø±Ø¯Ø§Ø± Ù†ÛŒØ³Øª.",
    "Ù†Ù‡ Ø·ÙˆØ·ÛŒ Ø®ÙˆØ´ Ø§Ø³Øª Ùˆ Ù†Ù‡ Ø³Ø®Ù† Ø§Ùˆ.",
    "Ú¯Ø±Ø¨Ù‡ Ø¯Ø³ØªØ´ Ø¨Ù‡ Ú¯ÙˆØ´Øª Ù†Ù…ÛŒâ€ŒØ±Ø³Ø¯ØŒ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯ Ù¾ÛŒÙ Ù¾ÛŒÙ.",
    "Ú©Ø§Ø± Ù†ÛŒÚ©Ùˆ Ú©Ø±Ø¯Ù† Ø§Ø² Ù¾Ø± Ú©Ø±Ø¯Ù† Ø§Ø³Øª.",
    "Ø¯ÛŒÙˆØ§Ø± Ù…ÙˆØ´ Ù†Ø¯Ø§Ø±Ø¯.",
    "Ù‡Ø± Ú©Ù‡ bØ§Ù…Ø´ Ø¨ÛŒØ´ØŒ Ø¨Ø±fØ´ Ø¨ÛŒØ´â€ŒØªØ±.",
    "Ø¢Ø¨ Ø±Ø§ Ú¯Ù„ Ù†Ú©Ù†.",
    "Ú¯Ø± ØµØ¨Ø± Ú©Ù†ÛŒØŒ Ø² ØºÙˆØ±Ù‡ Ø­Ù„ÙˆØ§ Ø³Ø§Ø²ÛŒ.",
    "ÛŒÚ© Ø¯Ø³Øª ØµØ¯Ø§ Ù†Ø¯Ø§Ø±Ø¯.",
    "Ø¢ÙØªØ§Ø¨ Ø¢Ù…Ø¯ Ø¯Ù„ÛŒÙ„ Ø¢ÙØªØ§Ø¨.",
    "Ú©Ø§Ø± Ø§Ù…Ø±ÙˆØ² Ø±Ø§ Ø¨Ù‡ ÙØ±Ø¯Ø§ Ù…ÛŒâ€ŒØ§Ù†Ø¯Ø§Ø².",
    "Ø¨ÛŒâ€ŒØ¹Ù‚Ù„ØŒ Ø¨Ø§ Ø¹Ù‚Ù„ Ø³Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.",
    "Ø³Ø®ØªÛŒ Ú©Ø´ÛŒØ¯Ù†ØŒ Ø¢Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ¢ÙˆØ±Ø¯.",
    "Ù‡Ø± Ú©Ù‡ bamØ´ Ø¨ÛŒØ´ØŒ Ø¨Ø±fØ´ Ø¨ÛŒØ´â€ŒØªØ±.",
    "ÛŒÚ© Ø³Ø§Ø¹Øª ÙÚ©Ø± Ø¨Ù‡ØªØ± Ø§Ø² ØµØ¯ Ø³Ø§Ø¹Øª Ú©Ø§Ø± Ø¨ÛŒÙ‡ÙˆØ¯Ù‡ Ø§Ø³Øª.",
    "Ø¯ÙˆØ³Øª Ø¢Ù† Ø¨Ø§Ø´Ø¯ Ú©Ù‡ Ø¯Ø± ÙˆÙ‚Øª ØªÙ†Ú¯Ø¯Ø³ØªÛŒ ÛŒØ§Ø±Øª Ø¨Ø§Ø´Ø¯.",
    "Ø¢ØªØ´ Ú¯Ø±ÙØªÙ‡ Ø±Ø§ Ø¨Ø§ Ø¢Ø¨ Ø®Ø§Ù…ÙˆØ´ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.",
    "Ù¾ÛŒØ´Ú¯ÛŒØ±ÛŒ Ø¨Ù‡ØªØ± Ø§Ø² Ø¯Ø±Ù…Ø§Ù† Ø§Ø³Øª.",
    "Ù‡Ø± Ú©Ù‡ ØµØ¯Ø§Ù‚Øª Ø¯Ø§Ø´ØªØŒ Ù†Ø¬Ø§Øª ÛŒØ§ÙØª."
]

#Ù„ÛŒØ³Øª Ú†ÛŒØ³ØªØ§Ù† Ù‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ú©ÙˆØªØ§Ù‡
RIDDLES = [
    "Ø³Ø± Ø¯Ø§Ø±Ù‡ Ø¨Ø¯Ù† Ù†Ø¯Ø§Ø±Ù‡ØŸ (Ø³ÙˆØ²Ù†)",
    "Ø¨Ø§Ù„Ø§ Ù…ÛŒØ±Ù‡ Ù¾Ø§ÛŒÛŒÙ† Ù†Ù…ÛŒØ§Ø¯ØŸ (Ø³Ù†)",
    "ÛŒÚ© Ú†Ø´Ù… Ø¯Ø§Ø±Ù‡ Ù†Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù‡ØŸ (Ø³ÙˆØ²Ù†)",
    "Ù‡Ø± Ú†ÛŒ Ø¨Ø¯ÙˆÛŒ Ù†Ù…ÛŒâ€ŒØ±Ø³ÛŒØŸ (Ø³Ø§ÛŒÙ‡)",
    "Ø¬Ù„ÙˆØªÙ‡ ÙˆÙ„ÛŒ Ø¯ÛŒØ¯Ù‡ Ù†Ù…ÛŒØ´Ù‡ØŸ (Ø¢ÛŒÙ†Ø¯Ù‡)",
    "Ù¾Ø± Ø§Ø² Ø³ÙˆØ±Ø§Ø® Ø¢Ø¨ Ù†Ú¯Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ø±Ù‡ØŸ (Ø§Ø³ÙÙ†Ø¬)",
    "Ù…ÛŒâ€ŒØ´Ú©Ù†Ù‡ ØµØ¯Ø§ Ù†Ø¯Ø§Ø±Ù‡ØŸ (Ø³Ú©ÙˆØª)",
    "Ù¾Ø±ÙˆØ§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ø¨Ø§Ù„ Ù†Ø¯Ø§Ø±Ù‡ØŸ (Ø²Ù…Ø§Ù†)",
    "Ú¯Ø±ÙØªÙ‡ Ù…ÛŒØ´Ù‡ Ù¾Ø±ØªØ§Ø¨ Ù†Ù…ÛŒØ´Ù‡ØŸ (Ø³Ø±Ù…Ø§)",
    "Ù‡Ø± Ú†ÛŒ Ø¨Ø±Ø¯Ø§Ø±ÛŒ Ø¨Ø²Ø±Ú¯ØªØ± Ù…ÛŒØ´Ù‡ØŸ (Ú†Ø§Ù„Ù‡)",
    "ØªÙˆ Ø¯Ø³Øª Ù…ÛŒÚ¯ÛŒØ±ÛŒ Ù„Ù…Ø³ Ù†Ù…ÛŒØ´Ù‡? (Ù†ÙØ³)",
    "Ù…ÛŒâ€ŒØ¯ÙˆÙ‡ Ù¾Ø§ Ù†Ø¯Ø§Ø±Ù‡? (Ø¢Ø¨)",
    "Ø­Ø±Ù Ù…ÛŒØ²Ù†Ù‡ Ø¯Ù‡Ù† Ù†Ø¯Ø§Ø±Ù‡? (ØªÙ„ÙÙ†)",
    "Ø±Ø§Ù‡ Ù…ÛŒØ±Ù‡ Ù†ÙØ³ Ù†Ù…ÛŒâ€ŒÚ©Ø´Ù‡? (Ø³Ø§Ø¹Øª)",
    "Ø§Ø² Ú©ÙˆÙ‡ Ø±Ø¯ Ù…ÛŒØ´Ù‡ ØªÚ©ÙˆÙ† Ù†Ù…ÛŒØ®ÙˆØ±Ù‡? (Ø¬Ø§Ø¯Ù‡)",
    "Ù‡Ù…Ù‡ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù† Ø¯Ø³Øª Ù†Ù…ÛŒØ±Ø³Ù‡? (Ø³ØªØ§Ø±Ù‡)",
    "Ù„Ø¨Ø§Ø³ Ø¯Ø§Ø±Ù‡ ØªÙ† Ù†Ø¯Ø§Ø±Ù‡? (Ú©ØªØ§Ø¨)",
    "Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒ Ú©ÙˆÚ†ÛŒÚ© Ù…ÛŒØ´Ù‡? (Ù…Ø¯Ø§Ø¯)",
    "Ø´Ø¨ Ù‡Ø³Øª Ø±ÙˆØ² Ù†ÛŒØ³Øª? (Ù…Ø§Ù‡)",
    "Ø§Ø³Ù…Ø´Ùˆ Ø¨ÛŒØ§Ø±ÛŒ Ù…ÛŒâ€ŒØ´Ú©Ù†Ù‡? (Ø³Ú©ÙˆØª)",
    "Ú†Ù‡Ø§Ø± Ù¾Ø§ Ø¯Ø§Ø±Ù‡ Ø±Ø§Ù‡ Ù†Ù…ÛŒØ±Ù‡? (Ù…ÛŒØ²)",
    "Ø¯Ù†Ø¯ÙˆÙ† Ø¯Ø§Ø±Ù‡ Ú¯Ø§Ø² Ù†Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù‡? (Ø´ÙˆÙ†Ù‡)",
    "ØªÙˆ Ø¢Ø¨ Ù…ÛŒØ±Ù‡ Ø®ÛŒØ³ Ù†Ù…ÛŒØ´Ù‡? (Ø³Ø§ÛŒÙ‡)",
    "Ø¨ÛŒØ´ØªØ± Ø¨Ø´Ù‡ Ú©Ù…ØªØ± Ù…ÛŒØ¨ÛŒÙ†ÛŒ? (ØªØ§Ø±ÛŒÚ©ÛŒ)",
    "Ø§ÙˆÙ„ Ø³Ø¨Ø² ÙˆØ³Ø· Ù‚Ø±Ù…Ø² Ø¢Ø®Ø± Ø³ÛŒØ§Ù‡? (Ø²ØºØ§Ù„)",
    "Ù‡ÛŒÚ†ÙˆÙ‚Øª Ú©Ø«ÛŒÙ Ù†Ù…ÛŒØ´Ù‡? (Ø¢ÛŒÙ†Ù‡)",
    "Ù‡Ù…Ù‡ Ø¬Ø§ Ù‡Ø³Øª Ø¯ÛŒØ¯Ù‡ Ù†Ù…ÛŒØ´Ù‡? (Ù‡ÙˆØ§)",
    "Ù¾Ø±Ù†Ø¯Ù‡â€ŒØ³Øª Ù¾Ø± Ù†Ø¯Ø§Ø±Ù‡? (Ø¨Ø§Ø¯Ø¨Ø§Ø¯Ú©)",
    "Ù…ÛŒâ€ŒÚ†Ø±Ø®Ù‡ Ø¬Ø§ÛŒÛŒ Ù†Ù…ÛŒØ±Ù‡? (Ù¾Ù†Ú©Ù‡)",
    "Ø¨Ø¯ÙˆÙ† Ù¾Ø§ Ø­Ø±Ú©Øª Ù…ÛŒÚ©Ù†Ù‡? (Ù…Ø§Ø±)",
    "Ø®ÛŒØ³ Ù…ÛŒÚ©Ù†Ù‡ Ø®Ø´Ú© Ù…ÛŒØ´Ù‡? (Ø­ÙˆÙ„Ù‡)",
    "Ø³ÛŒØ§Ù‡Ù‡ ÙˆÙ„ÛŒ Ø±ÙˆØ´Ù† Ù…ÛŒÚ©Ù†Ù‡? (Ø°ØºØ§Ù„)",
    "Ù…ÛŒâ€ŒØ³ÙˆØ²Ù‡ Ø¢ØªÛŒØ´ Ù†Ø¯Ø§Ø±Ù‡? (Ø´Ù…Ø¹)",
    "ØµØ¯Ø§ Ù…ÛŒØ¯Ù‡ Ø¯ÛŒØ¯Ù‡ Ù†Ù…ÛŒØ´Ù‡? (Ø¨Ø§Ø¯)",
    "Ù¾Ø± Ø¨Ø§Ø´Ù‡ Ø³Ø¨Ú©â€ŒØªØ±Ù‡? (Ø¨Ø§Ø¯Ú©Ù†Ú©)",
    "Ù¾Ø± ØºØ°Ø§Ø³Øª Ù†Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡? (ÛŒØ®Ú†Ø§Ù„)",
    "Ø¨Ø§Ù„Ø§ Ù¾Ø§ÛŒÛŒÙ† Ù…ÛŒâ€ŒÙ¾Ø±Ù‡ Ù¾Ø§ Ù†Ø¯Ø§Ø±Ù‡? (ØªÙˆÙ¾)",
    "Ø²Ø±Ø¯Ù‡ Ù‡Ù…Ù‡ Ø±Ùˆ Ø±ÙˆØ´Ù† Ù…ÛŒÚ©Ù†Ù‡? (Ø®ÙˆØ±Ø´ÛŒØ¯)",
    "Ù‡Ø± Ø¬Ø§ Ø¨Ø±ÛŒ Ø¯Ù†Ø¨Ø§Ù„Øª Ù…ÛŒØ§Ø¯? (Ø³Ø§ÛŒÙ‡)",
    "ÙˆÙ‚ØªÛŒ Ø±Ø³ÛŒØ¯ÛŒ Ø¯ÛŒÚ¯Ù‡ Ù†ÛŒØ³Øª? (ÙØ±Ø¯Ø§)",
    "Ù…ÛŒØ§Ø¯ Ù†Ù…ÛŒâ€ŒÙ…ÙˆÙ†Ù‡? (Ø¨Ø§Ø±Ø§Ù†)",
    "Ù‡Ù…ÛŒØ´Ù‡ Ú¯Ø±Ø³Ù†Ù‡â€ŒØ³Øª? (Ø¢ØªØ´)",
    "Ù…ÛŒâ€ŒØ¯ÙˆÙ‡ ÙˆÙ„ÛŒ Ù†ÙØ³ Ù†Ø¯Ø§Ø±Ù‡? (Ø³Ø§Ø¹Øª Ø´Ù†ÛŒ)",
    "Ø±ÙˆÛŒ Ø²Ù…ÛŒÙ† Ù…ÛŒØ§Ø¯ Ú©Ø«ÛŒÙ Ù†Ù…ÛŒØ´Ù‡? (Ø¨Ø§Ø±Ø§Ù†)",
    "Ù¾Ø± Ø§Ø² Ø­Ø±Ù ÙˆÙ„ÛŒ ØµØ¯Ø§ Ù†Ø¯Ø§Ø±Ù‡? (Ú©ØªØ§Ø¨)",
    "Ø¨ÛŒâ€ŒØ¨Ø§Ù„ Ù¾Ø±ÙˆØ§Ø² Ù…ÛŒÚ©Ù†Ù‡? (Ø®ÛŒØ§Ù„)",
    "Ø¨ÛŒØ´ØªØ± Ø®Ø±Ø¬ Ú©Ù†ÛŒ Ú©ÙˆÚ†ÛŒÚ© Ù…ÛŒØ´Ù‡? (Ù¾ÙˆÙ„)",
    "Ø¯ÙˆØ± Ù…ÛŒâ€ŒÚ†Ø±Ø®Ù‡ Ù†ÙˆØ± Ù…ÛŒØ¯Ù‡? (Ù…Ø§Ù‡)",
    "ØªÙˆ Ø®ÙˆÙ†Ù‡â€ŒØ³Øª Ø±Ø§Ù‡ Ù…ÛŒØ±Ù‡? (Ù…ÙˆØ±Ú†Ù‡)",
    "Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø±Ú©Øª Ù…ÛŒÚ©Ù†Ù‡ ÙˆØ§ÛŒ Ù†Ù…ÛŒØ³ØªÙ‡? (Ø²Ù…Ø§Ù†)",
    "Ù‡Ù…Ù‡ Ø¬Ø§ Ù‡Ø³Øª Ø¬Ø§ Ù†Ø¯Ø§Ø±Ù‡? (Ù†ÙˆØ±)",
    "Ø¨Ø¯ÙˆÙ† Ø¯Ù‡Ù† Ù…ÛŒâ€ŒØ®Ù†Ø¯Ù‡? (Ù…Ø§Ø³Ú©)",
    "Ù¾Ø§ Ù†Ø¯Ø§Ø±Ù‡ ÙˆÙ„ÛŒ Ù…ÛŒâ€ŒØ§ÛŒØ³ØªÙ‡? (Ø¹ØµØ§)",
    "Ø¨ÛŒâ€ŒØ²Ø¨Ø§Ù† Ø­Ø±Ù Ù…ÛŒØ²Ù†Ù‡? (Ú†Ø´Ù…)",
    "Ù‡Ø± Ø±ÙˆØ² Ù…ÛŒØ§Ø¯ ÙˆÙ„ÛŒ Ù¾ÛŒØ± Ù†Ù…ÛŒØ´Ù‡? (Ø®ÙˆØ±Ø´ÛŒØ¯)",
    "Ù…ÛŒØ§Ø¯ Ùˆ Ù…ÛŒØ±Ù‡ ØµØ¯Ø§ Ù…ÛŒÚ©Ù†Ù‡? (Ø¨Ø§Ø¯)",
    "Ù‡ÛŒÚ† ÙˆÙ‚Øª Ù†Ù…ÛŒØ®ÙˆØ§Ø¨Ù‡? (Ø¯Ø±ÛŒØ§)",
    "Ø¨ÛŒâ€ŒØµØ¯Ø§ Ú¯Ø±ÛŒÙ‡ Ù…ÛŒÚ©Ù†Ù‡? (Ø§Ø¨Ø±)",
    "ØªÚ©ÙˆÙ† Ù†Ù…ÛŒØ®ÙˆØ±Ù‡ ÙˆÙ„ÛŒ Ø±Ø´Ø¯ Ù…ÛŒÚ©Ù†Ù‡? (Ú¯ÛŒØ§Ù‡)",
]

#Ø¬Ø±Ø¹Øª
DARES = [
    "Ù…Ø«Ù„ Ù…Ø±Øº Ù‚ÙˆÙ‚ÙˆÙ„ÛŒ Ù‚ÙˆÙ‚Ùˆ Ú©Ù†.",
    "Ø¯Ù‡ Ø«Ø§Ù†ÛŒÙ‡ Ù…Ø«Ù„ Ù¾Ù†Ú¯ÙˆØ¦Ù† Ø±Ø§Ù‡ Ø¨Ø±Ùˆ.",
    "Ø¨Ø§ Ù„Ù‡Ø¬Ù‡ Ø´Ù…Ø§Ù„ÛŒ Ø­Ø±Ù Ø¨Ø²Ù†.",
    "Ø¢Ù‡Ù†Ú¯ Ø¹Ø±ÙˆØ³ÛŒ Ø±Ø§ Ø²Ù…Ø²Ù…Ù‡ Ú©Ù†.",
    "Ù¾Ø´Øª Ø³Ø± Ù‡Ù… Ø³Ù‡ ØªØ§ Ù¾ÛŒÙ Ù¾ÛŒÙ Ø¨Ú¯Ùˆ.",
    "ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† Ø¯Ø±ÙˆØº Ø¯Ùˆ Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø¨Ú¯Ùˆ.",
    "Ø¨Ø§ Ú†Ø´Ù… Ù‡Ø§ÛŒ Ø¨Ø³ØªÙ‡ Ø¨Ú†Ø±Ø® Ùˆ Ø±Ø§Ù‡ Ø¨Ø±Ùˆ.",
    "ÛŒÚ© Ø¢Ù‡Ù†Ú¯ Ø±Ø§ Ø¨Ø§ Ø¨ÛŒÙ†ÛŒ Ø§Øª Ø¨Ø®ÙˆØ§Ù†.",
    "Ù…Ø«Ù„ ÛŒÚ© Ø±Ø¨Ø§Øª Ø¨Ø±Ù‚Øµ.",
    "Ø¨Ø§ Ø¯Ù‡Ø§Ù† Ù¾Ø± Ø¢Ø¨ Ø¨Ø®Ù†Ø¯.",
    "ÛŒÚ© Ù…Ø¯Ù„ Ù…ÙˆÛŒ Ù…Ø³Ø®Ø±Ù‡ Ø¯Ø±Ø³Øª Ú©Ù†.",
    "ÙˆØ§Ù†Ù…ÙˆØ¯ Ú©Ù† Ú©Ù‡ Ú¯Ø§Ùˆ Ù‡Ø³ØªÛŒ.",
    "ÛŒÚ© Ø¬Ù…Ù„Ù‡ Ø±Ø§ Ø¨Ø±Ø¹Ú©Ø³ Ø¨Ú¯Ùˆ.",
    "Ù…Ø«Ù„ Ø¨Ú†Ù‡ Ú¯Ø±Ø¨Ù‡ Ù…ÛŒÙˆ Ù…ÛŒÙˆ Ú©Ù†.",
    "Ø¨Ø§ Ø¯Ø³Øª ØºÛŒØ±ØºØ§Ù„Ø¨ Ø®ÙˆØ¯ Ø¨Ù†ÙˆÛŒØ³.",
    "ÛŒÚ© Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ù…Ø³Ø®Ø±Ù‡ Ø¨Ø§ ØµÙˆØ±ØªØª Ø¨Ø³Ø§Ø².",
    "Ù…Ø«Ù„ ÙÙˆØªØ¨Ø§Ù„ÛŒØ³ØªÛŒ Ú¯Ù„ Ø¨Ø²Ù†.",
    "Ø¨Ø§ Ù…ÙˆØ² ØªÙ„ÙÙ† Ø¨Ø§Ø²ÛŒ Ú©Ù†.",
    "Ø­Ø±Ù Ø¨Ø²Ù† Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ Ø²Ø¨Ø§Ù†Øª Ø¨ÛŒØ±ÙˆÙ†Ù‡.",
    "ÛŒÚ© Ú©Ø§Ø± Ú©Ø§Ù…Ù„Ø§ ØªØµØ§Ø¯ÙÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡.",
    "Ù…Ø«Ù„ Ø®Ø±Ú¯ÙˆØ´ Ø¨Ù¾Ø±.",
    "Ø¢Ù‡Ù†Ú¯ Ú©ÙˆØ¯Ú©Ø§Ù†Ù‡ Ø±Ø§ Ø¨Ù„Ù†Ø¯ Ø¨Ø®ÙˆØ§Ù†.",
    "Ø®ÙˆØ¯Øª Ø±Ø§ Ø¨Ù‡ Ø²ÙˆØ± Ø¨Ù‡ Ø®ÙˆØ§Ø¨ Ø¨Ø²Ù†.",
    "Ù…Ø«Ù„ Ø¯Ø§ÛŒÙ†Ø§Ø³ÙˆØ± Ø±Ø§Ù‡ Ø¨Ø±Ùˆ.",
    "Ø¨Ø§ Ú©ÙØ´ Ù‡Ø§ÛŒØª Ø¢Ø¨ Ø¨Ø®ÙˆØ±.",
    "ÛŒÚ© Ø³Ø§Ù„Ø§Ø¯ Ø§Ø² ØªÙ†Ù‚Ù„Ø§Øª Ø¯Ø±Ø³Øª Ú©Ù†.",
    "Ù…Ø«Ù„ Ù…Ø§Ù‡ÛŒ Ø¯Ù‡Ø§Ù† Ø¨Ø§Ø² Ú©Ù† Ùˆ Ø¨Ø¨Ù†Ø¯.",
    "Ø¨Ø§ Ø¨ÛŒÙ†ÛŒ Ø§Øª Ø¯Ú©Ù…Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø±Ø§ Ø¨Ø²Ù†.",
    "Ù…Ø«Ù„ ÙˆØ²Ù†Ù‡ Ø¨Ø±Ø¯Ø§Ø± ÙˆØ±Ø²Ø´ Ú©Ù†.",
    "ÛŒÚ© Ù¾ÛŒØ§Ù…Ú© Ø¨Ø±Ø§ÛŒ Ù…Ø®Ø§Ø·Ø¨ Ø¢Ø®Ø±Øª Ø¨ÙØ±Ø³Øª.",
    "Ø¨Ø§ Ú†Ø´Ù… Ù‡Ø§ÛŒ Ø¨Ø³ØªÙ‡ Ú†ÛŒØ²ÛŒ Ø±Ø§ Ù„Ù…Ø³ Ú©Ù†.",
    "Ù…Ø«Ù„ Ù¾Ø±Ù†Ø¯Ù‡ Ø¨Ø§Ù„ Ø¨Ø²Ù†.",
    "ÛŒÚ© Ø±Ø§Ø² Ù…Ø³Ø®Ø±Ù‡ Ø±Ø§ ÙØ±ÛŒØ§Ø¯ Ø¨Ø²Ù†.",
    "Ù…Ø«Ù„ Ù…Ø§Ø±Ù¾ÛŒÚ† Ø¨Ú†Ø±Ø®.",
    "Ø¨Ø§ Ø¯Ø³Øª Ùˆ Ù¾Ø§ Ø±Ø§Ù‡ Ø¨Ø±Ùˆ.",
    "Ù…Ø«Ù„ Ú¯ÙˆØ±Ø®Ø± Ø´ÛŒÙ‡Ù‡ Ø¨Ú©Ø´.",
    "ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† ØªØ±Ø³Ù†Ø§Ú© Ø¯Ùˆ Ø¬Ù…Ù„Ù‡ Ø§ÛŒ Ø¨Ú¯Ùˆ.",
    "Ù…Ø«Ù„ Ù„Ø§Ú© Ù¾Ø´Øª Ø­Ø±Ú©Øª Ú©Ù†.",
    "Ø¨Ø§ Ø¯Ù‡Ø§Ù† Ø¨Ø³ØªÙ‡ Ø¢ÙˆØ§Ø² Ø¨Ø®ÙˆØ§Ù†.",
    "Ù…Ø«Ù„ Ù…ÛŒÙ…ÙˆÙ† Ø§Ø² Ø¯Ø±Ø®Øª Ø¨Ø§Ù„Ø§ Ø¨Ø±Ùˆ.",
    "ÛŒÚ© Ø´Ú©Ù„Ú© Ø¨Ø§ Ø³Ø´ÙˆØ§Ø± Ø¯Ø±Ø³Øª Ú©Ù†.",
    "Ù…Ø«Ù„ Ø¬Ø§Ø±ÙˆØ¨Ø±Ù‚ÛŒ ØµØ¯Ø§ Ø¯Ø±Ø¨ÛŒØ§Ø±.",
    "Ø¨Ø§ Ù¾Ø§Ø´Ù†Ù‡ Ù¾Ø§ Ø±Ø§Ù‡ Ø¨Ø±Ùˆ.",
    "Ù…Ø«Ù„ Ù¾Ø±ÙˆØ§Ù†Ù‡ Ù¾Ø±ÙˆØ§Ø² Ú©Ù†.",
    "ÛŒÚ© Ø´Ø¹Ø± Ú©ÙˆØ¯Ú©Ø§Ù†Ù‡ Ø¨Ù„Ù†Ø¯ Ø¨Ø®ÙˆØ§Ù†.",
    "Ù…Ø«Ù„ Ú©Ø±Ù… Ø­Ø±Ú©Øª Ú©Ù†.",
    "Ø¨Ø§ Ø¨ÛŒÙ†ÛŒ Ø§Øª Ø´Ú©Ù„Ú© Ø¯Ø±Ø¨ÛŒØ§Ø±.",
    "Ù…Ø«Ù„ ÙØ±Ø´ØªÙ‡ Ø¨Ø§Ù„ Ø¨Ø²Ù†.",
    "ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø¯Ø±ÙˆØºÛŒ Ø¨Ú¯Ùˆ.",
    "Ù…Ø«Ù„ Ø²Ù†Ø¨ÙˆØ± ÙˆØ²ÙˆØ² Ú©Ù†.",
    "Ø¨Ø§ Ú†Ø´Ù…Ø§Ù† Ø¨Ø³ØªÙ‡ Ù†Ù‚Ø§Ø´ÛŒ Ø¨Ú©Ø´.",
    "Ù…Ø«Ù„ Ø§Ø³Ø¨ ÛŒÙˆØ±ØªÙ…Ù‡ Ø¨Ø±Ùˆ.",
    "ÛŒÚ© Ø¬ÙˆÚ© Ù…Ø³Ø®Ø±Ù‡ ØªØ¹Ø±ÛŒÙ Ú©Ù†.",
    "Ù…Ø«Ù„ Ù‚ÙˆØ±Ø¨Ø§ØºÙ‡ Ø¨Ù¾Ø±.",
    "Ø¨Ø§ Ø¯Ø³Øª Ù‡Ø§ÛŒØª Ù¾Ø§Ø²Ù„ Ø¯Ø±Ø³Øª Ú©Ù†.",
    "Ù…Ø«Ù„ ÙÛŒÙ„ trumpet Ø¨Ø²Ù†.",
    "ÛŒÚ© Ú©Ø§Ø± ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯Ù‡.",
    "Ù…Ø«Ù„ Ø´ÛŒØ± ØºØ±Ø´ Ú©Ù†.",
    "Ø¨Ø§ Ù¾Ø§Ù‡Ø§ÛŒØª Ú†ÛŒØ²ÛŒ Ø±Ø§ Ø¨Ø±Ø¯Ø§Ø±.",
    "Ù…Ø«Ù„ Ø¬ÛŒØ±Ø¬ÛŒØ±Ú© ØµØ¯Ø§ Ø¯Ø±Ø¨ÛŒØ§Ø±."
]

#Ø­Ù‚ÛŒÙ‚Øª
TRUTHS = [
    "Ø®Ø¬Ø§Ù„Øªâ€ŒØ¢ÙˆØ±ØªØ±ÛŒÙ† Ù„Ø­Ø¸Ù‡ Ù…Ø¯Ø±Ø³Ù‡â€ŒØ§Øª Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ú©Ù†.",
    "Ø§Ú¯Ø± Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ø¨ÙˆÛŒ Ø®Ø§Øµ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØŒ Ú†Ù‡ Ø¨ÙˆÛŒÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ø¨Ø§Ø´Ø¯?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ù‡Ø¯ÛŒÛ€ ØªÙˆÙ„Ø¯ÛŒ Ú©Ù‡ Ú¯Ø±ÙØªÛŒ Ú†Ù‡ Ø¨ÙˆØ¯?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ ØªØ§ Ø¨Ù‡ Ø­Ø§Ù„ Ø®ÙˆØ±Ø¯Ù‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ ÛŒÚ© Ø¹Ø¶Ùˆ Ø¨Ø¯Ù†Øª Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø§Ø´ØªØ¨Ø§Ù‡ÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ Ø§Ø² Ø²Ù†Ø¯Ú¯ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù¾Ø§Ú© Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø§Ú¯Ø± Ø±ÙˆØ­ ÛŒÚ© Ø­ÛŒÙˆØ§Ù† Ø¯Ø± ØªÙˆ Ø­Ù„ÙˆÙ„ Ú©Ù†Ø¯ØŒ Ú©Ø¯Ø§Ù… Ø­ÛŒÙˆØ§Ù† Ø§Ø³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† nickname Ø§ÛŒ Ú©Ù‡ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†Ù‡ Ø¨ÙˆØ¯Ù‡?",
    "Ø§Ú¯Ø± ÛŒÚ© ÙˆØ³ÛŒÙ„Ù‡ Ø®Ø§Ù†Ù‡ Ø¨Ø§Ø´ÛŒØŒ Ú©Ø¯Ø§Ù… ÙˆØ³ÛŒÙ„Ù‡ Ù‡Ø³ØªÛŒ?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø¯Ù„ÛŒÙ„ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÛŒÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨Ø±Ø§ÛŒ 24 Ø³Ø§Ø¹Øª Ù†Ø§Ù…Ø±Ø¦ÛŒ Ø´ÙˆÛŒ Ú†Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ù…Ø¯Ù„ Ù…Ùˆ ÛŒØ§ Ø±Ù†Ú¯ÛŒ Ú©Ù‡ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© ØºØ°Ø§ÛŒ Ø¨Ù†Ø¬Ù„ Ø¨ØªÙˆØ§Ù†ÛŒ Ø¨Ø§Ø´ÛŒØŒ Ú©Ø¯Ø§Ù… Ù‡Ø³ØªÛŒ?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ø®Ø±Ø§ÙØ§ØªÛŒ Ú©Ù‡ Ø¨Ù‡ Ø¢Ù† Ø§Ø¹ØªÙ‚Ø§Ø¯ Ø¯Ø§Ø±ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ØµØ¯Ø§Ù‡Ø§ÛŒ Ø¨Ø¯Ù† Ú©Ø³ÛŒ Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ú©Ù†ÛŒØŒ Ú†Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒ?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¨Ù‡ Ø¢Ù† Ø§ÙØªØ®Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ ÙÙ‚Ø· ÛŒÚ© Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ù„Ø¨Ø§Ø³ÛŒ Ú©Ù‡ Ù¾ÙˆØ´ÛŒØ¯Ù‡â€ŒØ§ÛŒ Ùˆ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯ÛŒ Ø®ÙÙ† Ø§Ø³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ù…Ø´Ú©Ù„ Ú©ÙˆÚ†Ú© Ø¨ØªÙˆØ§Ù†Ø¯ Ù‡Ù…ÛŒØ´Ù‡ Ø¢Ø²Ø§Ø±Øª Ø¯Ù‡Ø¯ØŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† ØªØ±Ø³ÛŒ Ú©Ù‡ Ø¯Ø± Ú©ÙˆØ¯Ú©ÛŒ Ø¯Ø§Ø´ØªÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© ØµØ¯Ø§ÛŒ Ù…Ø²Ø§Ø­Ù… Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø¯Ø±Ú¯ÛŒØ±ÛŒ Ú©Ù‡ Ø¯Ø± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© Ø¹Ø§Ø¯Øª Ø¨Ø¯ Ù‡Ù…Ù‡ Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒØŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ø´ØºÙ„ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ ØªØµÙˆØ± Ú©Ù†ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ ÛŒÚ© Ú©Ù„Ù…Ù‡ Ø±Ø§ Ù‡Ù…ÛŒØ´Ù‡ ØºÙ„Ø· ØªÙ„ÙØ¸ Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¯Ø± Ù…ÙˆØ±Ø¯ Ø¬Ù†Ø³ Ù…Ø®Ø§Ù„Ù Ù†Ù…ÛŒâ€ŒÙÙ‡Ù…ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© ÙˆØ³ÛŒÙ„Ù‡ Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡ Ø¨Ø§Ø´ÛŒØŒ Ú©Ø¯Ø§Ù… Ù‡Ø³ØªÛŒ?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø¯Ù„ÛŒÙ„ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø¹ÙˆØ§ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© Ø­Ø³ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ø®Ø±ÛŒØ¯ Ø²Ù†Ø¯Ú¯ÛŒâ€ŒØ§Øª Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ù…Ø³Ø®Ø±Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØŒ Ú†Ù‡ Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ø®ÙˆØ§Ø¨ÛŒ Ú©Ù‡ Ø¯Ø± Ù…Ú©Ø§Ù† Ø¹Ù…ÙˆÙ…ÛŒ Ø¯ÛŒØ¯Ù‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© ØµØ¯Ø§ Ø±Ø§ Ø¨Ø§ Ø¨ÛŒÙ†ÛŒ Ø§Øª Ø¯Ø±Ø¨ÛŒØ§ÙˆØ±ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø§Ø´ØªØ¨Ø§Ù‡ÛŒ Ú©Ù‡ Ø¯Ø± ÛŒÚ© Ø§Ù…ØªØ­Ø§Ù† Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ø¢Ù‡Ù†Ú¯ Ø²Ù…Ø²Ù…Ù‡ Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† ØªÙˆØµÛŒÙ‡â€ŒØ§ÛŒ Ú©Ù‡ Ø¨Ù‡ Ú©Ø³ÛŒ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ù†Ù‚Øµ ÙÙ†ÛŒ Ú©ÙˆÚ†Ú© Ø¯Ø± ØªÙˆ Ø¨Ø§Ø´Ø¯ Ú†ÛŒØ³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø¢Ø±Ø§Ù…Ø´ Ø®ÙˆØ¯ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡ÛŒ?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© Ú©Ø§Ø± Ø®Ø§Ù†Ù‡ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø­Ø°Ù Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø­Ø±ÙÛŒ Ú©Ù‡ Ø¯Ø± Ø®ÙˆØ§Ø¨ Ú¯ÙØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ø§Ø¨Ø±Ù‚Ù‡Ø±Ù…Ø§Ù† Ø¨Ø§ Ù‚Ø¯Ø±Øª Ø¨ÛŒâ€ŒÙØ§ÛŒØ¯Ù‡ Ø¨Ø§Ø´ÛŒØŒ Ù‚Ø¯Ø±ØªØª Ú†ÛŒØ³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø§Ø² Ú©Ø³ÛŒ ØªÙ‚Ù„ÛŒØ¯ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© Ù‚Ø§Ù†ÙˆÙ† ÙÛŒØ²ÛŒÚ©ÛŒ Ø±Ø§ Ù†Ù‚Ø¶ Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ø¯Ù„ÛŒÙ„ÛŒ Ú©Ù‡ Ø¨Ø§Ø¹Ø« Ø´Ø¯ Ú©Ø³ÛŒ Ø±Ø§ Ø¯ÙˆØ³Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒ?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ ÛŒÚ© Ð¾Ð²Ð¾Ø­ Ø¨Ø§Ø´ÛŒØŒ Ú©Ø¯Ø§Ù… Ù‡Ø³ØªÛŒ?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø¯Ø±ÙˆØºÛŒ Ú©Ù‡ Ø¯Ø± Ú©ÙˆØ¯Ú©ÛŒ Ú¯ÙØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ù…Ø´Ú©Ù„ Ù†Ø±Ù… Ø§ÙØ²Ø§Ø±ÛŒ Ø¯Ø± ØªÙˆ Ø¨Ø§Ø´Ø¯ Ú†ÛŒØ³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† Ù¾ÛŒØ´Ø¨ÛŒÙ†ÛŒ Ú©Ù‡ Ø¯Ø± Ù…ÙˆØ±Ø¯ ØªÙˆ Ø´Ø¯Ù‡ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© ØµØ¯Ø§ÛŒ Ø¨Ø¯Ù† Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¯Ø± Ø·Ø¨ÛŒØ¹Øª ØªÙˆ Ø±Ø§ Ø¢Ø²Ø§Ø± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ Ù‡Ù…ÛŒØ´Ù‡ ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† ØªÚ©Ø±Ø§Ø±ÛŒ ØªØ¹Ø±ÛŒÙ Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ø§Ø´ØªØ¨Ø§Ù‡ Ù„Ù¾ÛŒ Ú©Ù‡ Ø¯Ø§Ø´ØªÙ‡â€ŒØ§ÛŒ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± ÛŒÚ© Ù†Ù‚Øµ Ø·Ø±Ø§Ø­ÛŒ Ø¯Ø± ØªÙˆ Ø¨Ø§Ø´Ø¯ Ú†ÛŒØ³Øª?",
    "Ø¨Ø¯ØªØ±ÛŒÙ† ØªØ¬Ø±Ø¨Ù‡ Ø¢Ø±Ø§ÛŒØ´Ú¯Ø§Ù‡ ÛŒØ§ Ø³Ù„Ù…Ø§Ù†ÛŒ ØªÙˆ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ø¨ØªÙˆØ§Ù†ÛŒ ÛŒÚ© Ú©Ø§Ø± Ø±ÙˆØ²Ù…Ø±Ù‡ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ø¹Ø¬ÛŒØ¨â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø¨Ø§Ø¹Ø« Ø§Ø¶Ø·Ø±Ø§Ø¨ ØªÙˆ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú†ÛŒØ³Øª?",
    "Ø§Ú¯Ø± Ù…Ø¬Ø¨ÙˆØ± Ø¨Ø§Ø´ÛŒ ÛŒÚ© Ú©Ù„Ù…Ù‡ Ø±Ø§ Ù‡Ø±Ú¯Ø² Ù†Ú¯ÙˆÛŒÛŒ Ú©Ø¯Ø§Ù… Ø§Ø³Øª?",
    "Ù…Ø³Ø®Ø±Ù‡â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ²ÛŒ Ú©Ù‡ Ø§Ø² Ø¢Ù† Ù…ÛŒâ€ŒØªØ±Ø³ÛŒ Ú†ÛŒØ³Øª?"
]

def generate_fonts(text: str) -> dict:
    fonts = {
        "Bold": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                              "ð—”ð—•ð—–ð——ð—˜ð—™ð—šð—›ð—œð—ð—žð—Ÿð— ð—¡ð—¢ð—£ð—¤ð—¥ð—¦ð—§ð—¨ð—©ð—ªð—«ð—¬ð—­"
                              "ð—®ð—¯ð—°ð—±ð—²ð—³ð—´ð—µð—¶ð—·ð—¸ð—¹ð—ºð—»ð—¼ð—½ð—¾ð—¿ð˜€ð˜ð˜‚ð˜ƒð˜„ð˜…ð˜†ð˜‡"),
        "Italic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                "ð‘¨ð‘©ð‘ªð‘«ð‘¬ð‘­ð‘®ð‘¯ð‘°ð‘±ð‘²ð‘³ð‘´ð‘µð‘¶ð‘·ð‘¸ð‘¹ð‘ºð‘»ð‘¼ð‘½ð‘¾ð‘¿ð’€ð’"
                                "ð’‚ð’ƒð’„ð’…ð’†ð’‡ð’ˆð’‰ð’Šð’‹ð’Œð’ð’Žð’ð’ð’‘ð’’ð’“ð’”ð’•ð’–ð’—ð’˜ð’™ð’šð’›"),
        "Cursive": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ð’œðµð’žð’Ÿð¸ð¹ð’¢ð»ð¼ð’¥ð’¦ð¿ð‘€ð’©ð’ªð’«ð’¬ð‘…ð’®ð’¯ð’°ð’±ð’²ð’³ð’´ð’µ"
                                 "ð’¶ð’·ð’¸ð’¹â„¯ð’»â„Šð’½ð’¾ð’¿ð“€ð“ð“‚ð“ƒâ„´ð“…ð“†ð“‡ð“ˆð“‰ð“Šð“‹ð“Œð“ð“Žð“"),
        "DoubleStruck": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                      "ð”¸ð”¹â„‚ð”»ð”¼ð”½ð”¾â„ð•€ð•ð•‚ð•ƒð•„â„•ð•†â„™â„šâ„ð•Šð•‹ð•Œð•ð•Žð•ð•â„¤"
                                      "ð•’ð•“ð•”ð••ð•–ð•—ð•˜ð•™ð•šð•›ð•œð•ð•žð•Ÿð• ð•¡ð•¢ð•£ð•¤ð•¥ð•¦ð•§ð•¨ð•©ð•ªð•«"),
        "Fraktur": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ð”„ð”…â„­ð”‡ð”ˆð”‰ð”Šâ„Œâ„‘ð”ð”Žð”ð”ð”‘ð”’ð”“ð””â„œð”–ð”—ð”˜ð”™ð”šð”›ð”œâ„¨"
                                 "ð”žð”Ÿð” ð”¡ð”¢ð”£ð”¤ð”¥ð”¦ð”§ð”¨ð”©ð”ªð”«ð”¬ð”­ð”®ð”¯ð”°ð”±ð”²ð”³ð”´ð”µð”¶ð”·"),
        "Parentheses": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                     "â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“Žâ“"
                                     "â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“žâ“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©"),
        "Tiny": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                              "á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€êœ±á´›á´œá´ á´¡xÊá´¢"
                              "á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€êœ±á´›á´œá´ á´¡xÊá´¢"),
        "Serif": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                               "á´¬á´®á¶œá´°á´±á¶ á´³á´´á´µá´¶á´·á´¸á´¹á´ºá´¼á´¾áµ á´¿Ë¢áµ€áµâ±½áµ‚Ë£Ê¸á¶»"
                               "áµƒáµ‡á¶œáµˆáµ‰á¶ áµÊ°á¶¦Ê²áµË¡áµâ¿áµ’áµ–á‘«Ê³Ë¢áµ—áµ˜áµ›Ê·Ë£Ê¸á¶»"),
        "Monospace": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                   "ð™°ð™±ð™²ð™³ð™´ð™µð™¶ð™·ð™¸ð™¹ð™ºð™»ð™¼ð™½ð™¾ð™¿ðš€ðšðš‚ðšƒðš„ðš…ðš†ðš‡ðšˆðš‰"
                                   "ðšŠðš‹ðšŒðšðšŽðšðšðš‘ðš’ðš“ðš”ðš•ðš–ðš—ðš˜ðš™ðššðš›ðšœðšðšžðšŸðš ðš¡ðš¢ðš£"),
        "SmallCaps": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                   "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
                                   "á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€êœ±á´›á´œá´ á´¡xÊá´¢"),
        "Bubble": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                "ðŸ…ðŸ…‘ðŸ…’ðŸ…“ðŸ…”ðŸ…•ðŸ…–ðŸ…—ðŸ…˜ðŸ…™ðŸ…šðŸ…›ðŸ…œðŸ…ðŸ…žðŸ…ŸðŸ… ðŸ…¡ðŸ…¢ðŸ…£ðŸ…¤ðŸ…¥ðŸ…¦ðŸ…§ðŸ…¨ðŸ…©"
                                "ðŸ…ðŸ…‘ðŸ…’ðŸ…“ðŸ…”ðŸ…•ðŸ…–ðŸ…—ðŸ…˜ðŸ…™ðŸ…šðŸ…›ðŸ…œðŸ…ðŸ…žðŸ…ŸðŸ… ðŸ…¡ðŸ…¢ðŸ…£ðŸ…¤ðŸ…¥ðŸ…¦ðŸ…§ðŸ…¨ðŸ…©"),
        "Squares": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰"
                                 "ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰"),
        "Wide": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                              "ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼º"
                              "ï½ï½‚ï½ƒï½„ï½…ï½†ï½‡ï½ˆï½‰ï½Šï½‹ï½Œï½ï½Žï½ï½ï½‘ï½’ï½“ï½”ï½•ï½–ï½—ï½˜ï½™ï½š"),
        # 20 ÙÙˆÙ†Øª Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡
        "Circle": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                               "â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“Žâ“"
                               "â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“žâ“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©"),
        "Negative": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ðŸ…°ðŸ…±ðŸ…²ðŸ…³ðŸ…´ðŸ…µðŸ…¶ðŸ…·ðŸ…¸ðŸ…¹ðŸ…ºðŸ…»ðŸ…¼ðŸ…½ðŸ…¾ðŸ…¿ðŸ†€ðŸ†ðŸ†‚ðŸ†ƒðŸ†„ðŸ†…ðŸ††ðŸ†‡ðŸ†ˆðŸ†‰"
                                 "ðŸ…°ðŸ…±ðŸ…²ðŸ…³ðŸ…´ðŸ…µðŸ…¶ðŸ…·ðŸ…¸ðŸ…¹ðŸ…ºðŸ…»ðŸ…¼ðŸ…½ðŸ…¾ðŸ…¿ðŸ†€ðŸ†ðŸ†‚ðŸ†ƒðŸ†„ðŸ†…ðŸ††ðŸ†‡ðŸ†ˆðŸ†‰"),
        "Script": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                               "ð“ð“‘ð“’ð““ð“”ð“•ð“–ð“—ð“˜ð“™ð“šð“›ð“œð“ð“žð“Ÿð“ ð“¡ð“¢ð“£ð“¤ð“¥ð“¦ð“§ð“¨ð“©"
                               "ð“ªð“«ð“¬ð“­ð“®ð“¯ð“°ð“±ð“²ð“³ð“´ð“µð“¶ð“·ð“¸ð“¹ð“ºð“»ð“¼ð“½ð“¾ð“¿ð”€ð”ð”‚ð”ƒ"),
        "Gothic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                               "ð”„ð”…â„­ð”‡ð”ˆð”‰ð”Šâ„Œâ„‘ð”ð”Žð”ð”ð”‘ð”’ð”“ð””â„œð”–ð”—ð”˜ð”™ð”šð”›ð”œâ„¨"
                               "ð”žð”Ÿð” ð”¡ð”¢ð”£ð”¤ð”¥ð”¦ð”§ð”¨ð”©ð”ªð”«ð”¬ð”­ð”®ð”¯ð”°ð”±ð”²ð”³ð”´ð”µð”¶ð”·"),
        "MathBold": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ð€ðð‚ðƒð„ð…ð†ð‡ðˆð‰ðŠð‹ðŒððŽððð‘ð’ð“ð”ð•ð–ð—ð˜ð™"
                                 "ðšð›ðœððžðŸð ð¡ð¢ð£ð¤ð¥ð¦ð§ð¨ð©ðªð«ð¬ð­ð®ð¯ð°ð±ð²ð³"),
        "MathItalic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                   "ð´ðµð¶ð·ð¸ð¹ðºð»ð¼ð½ð¾ð¿ð‘€ð‘ð‘‚ð‘ƒð‘„ð‘…ð‘†ð‘‡ð‘ˆð‘‰ð‘Šð‘‹ð‘Œð‘"
                                   "ð‘Žð‘ð‘ð‘‘ð‘’ð‘“ð‘”â„Žð‘–ð‘—ð‘˜ð‘™ð‘šð‘›ð‘œð‘ð‘žð‘Ÿð‘ ð‘¡ð‘¢ð‘£ð‘¤ð‘¥ð‘¦ð‘§"),
        "MathBoldItalic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                       "ð‘¨ð‘©ð‘ªð‘«ð‘¬ð‘­ð‘®ð‘¯ð‘°ð‘±ð‘²ð‘³ð‘´ð‘µð‘¶ð‘·ð‘¸ð‘¹ð‘ºð‘»ð‘¼ð‘½ð‘¾ð‘¿ð’€ð’"
                                       "ð’‚ð’ƒð’„ð’…ð’†ð’‡ð’ˆð’‰ð’Šð’‹ð’Œð’ð’Žð’ð’ð’‘ð’’ð’“ð’”ð’•ð’–ð’—ð’˜ð’™ð’šð’›"),
        "MathScript": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                   "ð“ð“‘ð“’ð““ð“”ð“•ð“–ð“—ð“˜ð“™ð“šð“›ð“œð“ð“žð“Ÿð“ ð“¡ð“¢ð“£ð“¤ð“¥ð“¦ð“§ð“¨ð“©"
                                   "ð“ªð“«ð“¬ð“­ð“®ð“¯ð“°ð“±ð“²ð“³ð“´ð“µð“¶ð“·ð“¸ð“¹ð“ºð“»ð“¼ð“½ð“¾ð“¿ð”€ð”ð”‚ð”ƒ"),
        "MathDoubleStruck": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                         "ð”¸ð”¹â„‚ð”»ð”¼ð”½ð”¾â„ð•€ð•ð•‚ð•ƒð•„â„•ð•†â„™â„šâ„ð•Šð•‹ð•Œð•ð•Žð•ð•â„¤"
                                         "ð•’ð•“ð•”ð••ð•–ð•—ð•˜ð•™ð•šð•›ð•œð•ð•žð•Ÿð• ð•¡ð•¢ð•£ð•¤ð•¥ð•¦ð•§ð•¨ð•©ð•ªð•«"),
        "MathFraktur": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                    "ð”„ð”…â„­ð”‡ð”ˆð”‰ð”Šâ„Œâ„‘ð”ð”Žð”ð”ð”‘ð”’ð”“ð””â„œð”–ð”—ð”˜ð”™ð”šð”›ð”œâ„¨"
                                    "ð”žð”Ÿð” ð”¡ð”¢ð”£ð”¤ð”¥ð”¦ð”§ð”¨ð”©ð”ªð”«ð”¬ð”­ð”®ð”¯ð”°ð”±ð”²ð”³ð”´ð”µð”¶ð”·"),
        "MathSans": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                 "ð– ð–¡ð–¢ð–£ð–¤ð–¥ð–¦ð–§ð–¨ð–©ð–ªð–«ð–¬ð–­ð–®ð–¯ð–°ð–±ð–²ð–³ð–´ð–µð–¶ð–·ð–¸ð–¹"
                                 "ð–ºð–»ð–¼ð–½ð–¾ð–¿ð—€ð—ð—‚ð—ƒð—„ð—…ð—†ð—‡ð—ˆð—‰ð—Šð—‹ð—Œð—ð—Žð—ð—ð—‘ð—’ð—“"),
        "MathSansBold": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                     "ð—”ð—•ð—–ð——ð—˜ð—™ð—šð—›ð—œð—ð—žð—Ÿð— ð—¡ð—¢ð—£ð—¤ð—¥ð—¦ð—§ð—¨ð—©ð—ªð—«ð—¬ð—­"
                                     "ð—®ð—¯ð—°ð—±ð—²ð—³ð—´ð—µð—¶ð—·ð—¸ð—¹ð—ºð—»ð—¼ð—½ð—¾ð—¿ð˜€ð˜ð˜‚ð˜ƒð˜„ð˜…ð˜†ð˜‡"),
        "MathSansItalic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                       "ð˜ˆð˜‰ð˜Šð˜‹ð˜Œð˜ð˜Žð˜ð˜ð˜‘ð˜’ð˜“ð˜”ð˜•ð˜–ð˜—ð˜˜ð˜™ð˜šð˜›ð˜œð˜ð˜žð˜Ÿð˜ ð˜¡"
                                       "ð˜¢ð˜£ð˜¤ð˜¥ð˜¦ð˜§ð˜¨ð˜©ð˜ªð˜«ð˜¬ð˜­ð˜®ð˜¯ð˜°ð˜±ð˜²ð˜³ð˜´ð˜µð˜¶ð˜·ð˜¸ð˜¹ð˜ºð˜»"),
        "MathSansBoldItalic": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                           "ð˜¼ð˜½ð˜¾ð˜¿ð™€ð™ð™‚ð™ƒð™„ð™…ð™†ð™‡ð™ˆð™‰ð™Šð™‹ð™Œð™ð™Žð™ð™ð™‘ð™’ð™“ð™”ð™•"
                                           "ð™–ð™—ð™˜ð™™ð™šð™›ð™œð™ð™žð™Ÿð™ ð™¡ð™¢ð™£ð™¤ð™¥ð™¦ð™§ð™¨ð™©ð™ªð™«ð™¬ð™­ð™®ð™¯"),
        "SmallCaps2": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                   "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
                                   "á´€Ê™á´„á´…á´‡êœ°É¢ÊœÉªá´Šá´‹ÊŸá´É´á´á´˜Ç«Ê€êœ±á´›á´œá´ á´¡xÊá´¢"),
        "FullWidth": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                  "ï¼¡ï¼¢ï¼£ï¼¤ï¼¥ï¼¦ï¼§ï¼¨ï¼©ï¼ªï¼«ï¼¬ï¼­ï¼®ï¼¯ï¼°ï¼±ï¼²ï¼³ï¼´ï¼µï¼¶ï¼·ï¼¸ï¼¹ï¼º"
                                  "ï½ï½‚ï½ƒï½„ï½…ï½†ï½‡ï½ˆï½‰ï½Šï½‹ï½Œï½ï½Žï½ï½ï½‘ï½’ï½“ï½”ï½•ï½£ï½—ï½˜ï½™ï½š"),
        "Squared": str.maketrans("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
                                "ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰"
                                "ðŸ„°ðŸ„±ðŸ„²ðŸ„³ðŸ„´ðŸ„µðŸ„¶ðŸ„·ðŸ„¸ðŸ„¹ðŸ„ºðŸ„»ðŸ„¼ðŸ„½ðŸ„¾ðŸ„¿ðŸ…€ðŸ…ðŸ…‚ðŸ…ƒðŸ…„ðŸ……ðŸ…†ðŸ…‡ðŸ…ˆðŸ…‰"),
    }
    return {name: text.translate(trans) for name, trans in fonts.items()}

# ØªØ§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
DICE = ["âš€", "âš", "âš‚", "âšƒ", "âš„", "âš…"]

# Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ú†Øª Ø³Ø±ÛŒØ¹
DEFAULT_QUICK_MESSAGES = [
    "Ø³Ù„Ø§Ù…!",
    "Ú†Ø·ÙˆØ±ÛŒ?",
    "Ø¨Ø§Ø­Ø§Ù„ Ø¨ÙˆØ¯!",
    "Ø¨ÛŒØ§ Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒÙ…",
    "Ù…Ø±Ø³ÛŒ",
    "Ø®Ø¯Ø§Ø­Ø§ÙØ¸",
    "Ø§ÙˆÚ©ÛŒ",
    "Ø¨Ø²Ù† Ø¨Ø±ÛŒÙ…"
]

# Ù…ØªØºÛŒØ± Ø¬Ù‡Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø³Ø±ÙˆØ±Ù‡Ø§
saved_servers_global = []

# Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù¾ÛŒÙ†Ú¯ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ± - ÙˆØ§Ù‚Ø¹ÛŒ
current_ping = 0.0
server_ip = "127.0.0.1"
server_port = 43210
server_name = "Local Server"

# Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ global Ø¨Ø±Ø§ÛŒ Account Switcher
UI_SCALE = 2.0 if (babase.app.ui_v1.uiscale == babase.UIScale.SMALL) else 1.0
ACCOUNT_FILES = ['.bsac2', '.bsuuid', 'config.json', '.config_prev.json']
plus = babase.app.plus
env = babase.app.env
USER_DIR = path.dirname(env.config_file_path)
ACCOUNTS_DIR = path.join(USER_DIR, 'account_switcher_profiles')

if not path.exists(ACCOUNTS_DIR):
    mkdir(ACCOUNTS_DIR)

if not path.exists(ACCOUNTS_DIR):
    mkdir(ACCOUNTS_DIR)

# ØªØ¹Ø±ÛŒÙ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ global
original_buttonwidget = bui.buttonwidget
original_containerwidget = bui.containerwidget
original_checkboxwidget = bui.checkboxwidget
original_have_pro = None
original_add_transaction = bui.app.plus.add_v1_account_transaction

# Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† ØªØ§Ø¨Ø¹ connect Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† Ø¢ÛŒÙ¾ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ
def new_connect_to_party(address, port=43210, print_progress=False):
    global server_ip, server_port
    server_ip = address
    server_port = port
    print(f"Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±: {address}:{port}")
    return original_connect(address, port, print_progress)
    
# Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† disconnect
def new_disconnect_from_host():
    global server_ip, server_port
    server_ip = "127.0.0.1"
    server_port = 43210
    print("Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„ Ø§Ø² Ø³Ø±ÙˆØ±")
    return original_disconnect()

"""Ú©Ù„Ø§Ø³ thread Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ"""
class RealPingThread(threading.Thread):
    def __init__(self):
        super().__init__()
        self.daemon = True
        self.running = True

    def run(self):
        global current_ping
        while self.running:
            try:
                if server_ip != "127.0.0.1" and server_port != 43210:
                    # Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³ÙˆÚ©Øª
                    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
                    sock.settimeout(1)
                    start_time = time.time()
                    
                    # Ø§Ø±Ø³Ø§Ù„ Ø¨Ø³ØªÙ‡ Ù¾ÛŒÙ†Ú¯ (Ù‡Ù…Ø§Ù†Ù†Ø¯ Ø¨Ø§Ø²ÛŒ)
                    sock.sendto(b'\x0b', (server_ip, server_port))
                    
                    try:
                        # Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø³Ø®
                        data, addr = sock.recvfrom(10)
                        if data == b'\x0c':  # Ù¾ÙˆÙ†Ú¯
                            ping = (time.time() - start_time) * 1000.0
                            current_ping = round(ping, 2)
                        else:
                            current_ping = 999
                    except socket.timeout:
                        current_ping = 999
                    except:
                        current_ping = 0
                    finally:
                        sock.close()
                else:
                    current_ping = 0
            except:
                current_ping = 0
            
            time.sleep(1)  # Ù‡Ø± 1 Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ

    def stop(self):
        self.running = False

# Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ
original_connect = None
original_disconnect = None

"""ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ Ø¨Ù‡ Ø´Ù…Ø³ÛŒ"""
def gregorian_to_jalali(gy, gm, gd):
    g_d_m = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334]
    if gm > 2:
        gy2 = gy + 1
    else:
        gy2 = gy
    days = 355666 + (365 * gy) + ((gy2 + 3) // 4) - ((gy2 + 99) // 100) + ((gy2 + 399) // 400) + gd + g_d_m[gm - 1]
    jy = -1595 + (33 * (days // 12053))
    days %= 12053
    jy += 4 * (days // 1461)
    days %= 1461
    if days > 365:
        jy += (days - 1) // 365
        days = (days - 1) % 365
    if days < 186:
        jm = 1 + (days // 31)
        jd = 1 + (days % 31)
    else:
        jm = 7 + ((days - 186) // 30)
        jd = 1 + ((days - 186) % 30)
    return jy, jm, jd

"""Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ø§Ø³Ø®"""
class Add:
    def __init__(s, source):
        w = AR.cw(source=source, size=(500,295), ps=AR.UIS()*0.8)
        AR.add_close_button(w, position=(460,260))
        
        tw(
            parent=w,
            text='Commands',
            scale=0.7,
            position=(325, 250),
            h_align='center',
            color=(0, 1, 1)
        )

        s.inputs = []
        for i, label in enumerate(['Trigger', 'Response']):
            tw(parent=w, text=label+':', position=(30,250-70*i))
            text_widget = tw(
                parent=w,
                maxwidth=230,
                size=(230,30),
                editable=True,
                v_align='center',
                color=(0.75,0.75,0.75),
                position=(30,218-70*i),
                allow_clear_button=False
            )
            s.inputs.append(text_widget)
            AR.bw(
                parent=w,
                size=(20,30),
                iconscale=1.3,
                icon=gt('file'),
                position=(265,218-70*i),
                on_activate_call=Call(s.paste,text_widget)
            )
            
        bw(
            parent=w,
            size=(60, 60),
            position=(130, 5),
            label='',
            texture=gt('logo'),
            color=(1, 1, 1)
        )
        
        # Time settings
        tw(parent=w, text='After', position=(30,105))
        tw(parent=w, text='Seconds', position=(190,105))
        s.time_widget = tw(
            parent=w,
            size=(90,30),
            editable=True,
            text=var('time'),
            h_align='center',
            position=(95,105),
            color=(0.75,0.75,0.75),
            allow_clear_button=False
        )

        s.search_in_messages = False
        s.search_cb = cb(
            parent=w,
            size=(250,30),
            position=(27.5,65),
            text='Search in messages',
            value=s.search_in_messages,
            on_value_change_call=Call(setattr,s,'search_in_messages'),
            color=(0.75,0.75,0.75),
            textcolor=(1,1,1),
        )

        # Placeholder/Info text
        tw(
            parent=w,
            scale=0.5,
            position=(300,230),
            text='ðŸ’¬ %m: Your name\nðŸ“¨ %s: Sender\nâ° %t: Current time\nðŸ“… %d: Gregorian date\nðŸ—“ %f: Jalali date\nðŸ˜‚ %j: Random joke\nðŸ§© %ch: Short riddle\nðŸ“œ %z: Proverb\nðŸŽ° %dice: Dice bet\nâ“ %tr: Truth in Dare game\nðŸ” %da: Dare in Dare game\nðŸŒ %ip: Server IP & Port\nðŸ“¡ %p: Send ping',
            maxwidth=190,
            color=(1,1,0)
        )

        AR.bw(parent=w, label='Add', size=(50,35), position=(230,25), on_activate_call=Call(s._add,s.inputs))
        AR.swish()

    def _add(s, inputs):
        try:
            t = float(tw(query=s.time_widget))
        except:
            AR.err('Invalid time. Please correct it!')
            return
        var('time', str(t))

        trigger, response = [tw(query=w).strip().replace('\n',' ') for w in inputs]
        if not trigger or not response:
            AR.err('Please enter something!')
            return

        l = var('l') or {}
        lc = var('lc') or {}
        ic = trigger.lower()
        if ic in lc:
            AR.err('Trigger already exists!')
            return

        l.update({trigger:(response,t,s.search_in_messages)})
        lc.update({ic:(response,t,s.search_in_messages)})
        var('l',l)
        var('lc',lc)
        [tw(w,text='') for w in inputs]
        AR.ok()

    def paste(s, widget):
        if not CIS(): AR.err('Not supported!'); return
        if not CHT(): AR.err('Clipboard is empty!'); return
        tw(widget,text=CGT().replace('\n',' '),color=(0,1,0))
        gs('gunCocking').play()
        teck(0.3,Call(tw,widget,color=(1,1,1)))


class Nuke:
    def __init__(s, source):
        triggers = var('l')
        if not triggers:
            AR.err('Please add some triggers first!')
            return
        w = AR.cw(source=source, size=(260,350), ps=AR.UIS()*0.5)
        AR.add_close_button(w, position=(250,315))

        s.scroll = sw(parent=w, size=(220,290), position=(20,40))
        s.container = cw(parent=s.scroll, size=(220,len(triggers)*30), background=False)

        AR.bw(parent=w, label='Delete', size=(60,25), position=(180,10), on_activate_call=Call(s._nuke))

        s.widgets = []
        s.selected = None
        s.refresh()
        AR.swish()

    def _nuke(s):
        if s.selected is None:
            AR.err('Please select something!')
            return
        l = var('l')
        lc = var('lc')
        key = list(l)[s.selected]
        l.pop(key)
        lc.pop(key.lower())
        var('l',l)
        var('lc',lc)
        s.selected = None
        s.refresh()
        AR.bye()

    def refresh(s):
        [w.delete() for w in s.widgets]
        s.widgets.clear()
        keys = list(var('l'))
        for i,key in enumerate(keys):
            widget = tw(
                text=key,
                parent=s.container,
                size=(220,30),
                selectable=True,
                click_activate=True,
                position=(0,(30*len(keys))-30*(i+1)),
                on_activate_call=Call(s.highlight,i)
            )
            s.widgets.append(widget)
        cw(s.container,size=(220,len(keys)*30))

    def highlight(s, index):
        [tw(w,color=(1,1,1)) for w in s.widgets]
        tw(s.widgets[index],color=(0,1,0))
        s.selected = index
                
"""ØªÙ†Ø¸ÛŒÙ…Ø§Øª"""
class Tune:
    def __init__(s, t):
        w = AR.cw(
            source=t,
            size=(350, 250),  # Ø§Ø±ØªÙØ§Ø¹ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯
            ps=AR.UIS() * 0.8
        )
        
        tw(
            parent=w,
            text='Setting',
            scale=1.2,
            position=(155, 225),
            h_align='center',
            color=(0, 1, 1)
        )
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(315, 215))
        
        AR.swish()
        for i in range(5):  # Ø§Ø² 4 Ø¨Ù‡ 5 ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯
            j = [
                'Notify on reply',
                'Play sound on reply',
                'Reply to ' + byTaha.me(),
                'Case sensitive',
                'Game speed control'  # Ú¯Ø²ÛŒÙ†Ù‡ Ø¬Ø¯ÛŒØ¯
            ][i]
            c = f'tune{i}'
            if i == 4:  # Ø¨Ø±Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡ Ú©Ù†ØªØ±Ù„ Ø³Ø±Ø¹Øª
                bw(
                    parent=w,
                    label=j,
                    size=(290, 30),
                    position=(30, 20 + 40 * i),
                    on_activate_call=Call(SpeedControl, w),
                    color=(0.3, 0.5, 0.8),
                    textcolor=(1, 1, 1)
                )
            else:
                chk(
                    text=j,
                    parent=w,
                    size=(290, 30),
                    textcolor=(1, 1, 1),
                    value=var(c),
                    position=(30, 20 + 40 * i),
                    color=(0.13, 0.13, 0.13),
                    on_value_change_call=Call(var, c)
                )

"""Ù„ÛŒØ³Øª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§"""
class List:
    def __init__(s, source):
        triggers = var('l')
        if not triggers:
            AR.err('Please add some triggers first!')
            return

        w = AR.cw(source=source, size=(450,300), ps=AR.UIS()*0.8)
        AR.add_close_button(w, position=(440,265))

        s.scroll = sw(parent=w, size=(150,260), position=(30,20))
        s.container = cw(parent=s.scroll, size=(220,len(triggers)*30), background=False)

        # Text widgets for trigger info
        s.text_widgets = []
        labels = ['Trigger','Response','Parsed']
        colors = [(0,1,1),(1,1,0),(1,0,1)]
        for i in range(3):
            tw(color=colors[i], parent=w, text=labels[i]+':', position=(190,240-80*i))
            widget = tw(parent=w, maxwidth=250, max_height=60, v_align='top', position=(190,215-80*i))
            s.text_widgets.append(widget)

        # Info button
        bw(
            parent=w,
            position=(390,240),
            size=(40,40),
            label='',
            texture=gt('achievementEmpty'),
            on_activate_call=s.info,
            color=(1,1,1),
            enable_sound=False
        )

        s.widgets = []
        s.selected = None
        s.refresh()
        AR.swish()

    """Display selected trigger info"""
    def info(s):
        if s.selected is None:
            AR.err('Please select a trigger first!')
            return
        i = s.selected
        trigger, delay, wildcard = list(var('l').items())[i][1]
        push(f'Trigger order: {i+1}\nResponse after: {delay} seconds\nWildcard: {wildcard}')
        gs('tap').play()

    """Refresh the list of triggers"""
    def refresh(s):
        [w.delete() for w in s.widgets]
        s.widgets.clear()
        triggers = list(var('l'))
        for i, trigger in enumerate(triggers):
            widget = tw(
                text=trigger,
                parent=s.container,
                size=(150,30),
                selectable=True,
                click_activate=True,
                position=(0,(30*len(triggers))-30*(i+1)),
                on_activate_call=Call(s.highlight,i)
            )
            s.widgets.append(widget)
        cw(s.container,size=(220,len(triggers)*30))

    """Highlight selected trigger and show its details"""
    def highlight(s, index):
        [tw(w,color=(1,1,1)) for w in s.widgets]
        tw(s.widgets[index], color=(0,1,0))
        s.selected = index

        triggers = var('l')
        trigger = list(triggers)[index]
        response, delay, wildcard = triggers[trigger]
        parsed = AR.parse(t=response)
        # Update text widgets
        [tw(s.text_widgets[i], text=sn([trigger,response,parsed][i])) for i in range(3)]

"""Ú†Øª Ø³Ø±ÛŒØ¹"""
class QuickChat:
    def __init__(s, source):
        w = s.w = AR.cw(source=source, size=(400, 300), ps=AR.UIS()*0.8)
        AR.add_close_button(w, position=(370, 265))

        # Title
        tw(parent=w, text='Quick Chat', scale=1.2, position=(180, 250), h_align='center', color=(1, 1, 0))
        
        tw(parent=w, text='Edit the IP and port to connect to servers manually!', scale=0.6, position=(180, 220), h_align='center', color=(1, 1, 0))
        
        bw(parent=w, size=(40, 40), position=(95, 245), label='', texture=gt('startButton'), color=(1, 1, 1))
      
        bw(parent=w, size=(40, 40), position=(280, 245), label='', texture=gt('startButton'), color=(1, 1, 1))

        # Scroll to show messages
        s.scroll = sw(parent=w, size=(360, 150), position=(20, 70))
        s.container = cw(parent=s.scroll, size=(360, 400), background=False)

        # Management buttons
        buttons = [
            (u'Add', s.add_message, (20, 15)),
            ('Remove', s.remove_message, (150, 15)),
            ('Reset', s.reset_messages, (280, 15)),
        ]
        for label, callback, pos in buttons:
            AR.bw(parent=w, label=label, size=(90, 35), position=pos, on_activate_call=callback)

        s.refresh_messages()
        AR.swish()

    """Refresh and display messages"""
    def refresh_messages(s):
        for child in s.container.get_children():
            child.delete()

        messages = load_quick_messages()
        y_pos = len(messages) * 43 - 25

        for msg in messages:
            bw(
                parent=s.container,
                label=msg[:30] + '...' if len(msg) > 30 else msg,
                size=(340, 40),
                position=(10, y_pos),
                on_activate_call=Call(s.send_message, msg),
                color=(0.3, 0.5, 0.8),
                textcolor=(1, 1, 1)
            )
            y_pos -= 45

        cw(s.container, size=(360, len(messages) * 45))

    """Send message"""
    def send_message(s, message):
        try:
            CM(message)
            push(f'Sent: {message}', color=(0, 1, 0))
            gs('dingSmall').play()
            AR.swish(s.w)
        except Exception as e:
            AR.err(f'Error sending: {str(e)}')

    """Add a new message"""
    def add_message(s):
        def save_new():
            new_msg = tw(query=txt_widget).strip()
            if new_msg:
                messages = load_quick_messages()
                if new_msg not in messages:
                    messages.append(new_msg)
                    save_quick_messages(messages)
                    s.refresh_messages()
                    push(f'Added: "{new_msg}"', color=(0, 1, 0))
                    gs('dingSmallHigh').play()
                else:
                    AR.err('This message already exists!')
            AR.swish(win)

        win = AR.cw(source=s.w, size=(300, 140), ps=AR.UIS()*0.6)
        AR.add_close_button(win, position=(250, 105))

        tw(parent=win, text='New message:', position=(20, 90), scale=0.9, color=(1, 1, 1))
        txt_widget = tw(parent=win, position=(20, 60), size=(260, 30), editable=True, text='', color=(0.9, 0.9, 0.9))

        AR.bw(parent=win, label='Confirm', size=(80, 30), position=(110, 20), on_activate_call=save_new)

    """Remove message"""
    def remove_message(s):
        messages = load_quick_messages()
        if not messages:
            AR.err('No messages to remove!')
            return

        win = AR.cw(source=s.w, size=(350, min(450, 200 + len(messages) * 45)), ps=AR.UIS()*0.6)
        AR.add_close_button(win, position=(350, 350))

        tw(parent=win, text='Select a message to remove:', scale=1.0, position=(150, min(400, 0 + len(messages) * 45)), h_align='center', color=(1, 1, 0))

        scroll = sw(parent=win, size=(330, min(300, 100 + len(messages) * 40)), position=(10, 50))
        container = cw(parent=scroll, size=(330, len(messages) * 45), background=False)

        y_pos = len(messages) * 44 - 25
        for msg in messages:
            bw(
                parent=container,
                label=f'Remove: {msg[:20]}...' if len(msg) > 20 else f'Remove: {msg}',
                size=(310, 40),
                position=(10, y_pos),
                on_activate_call=Call(s.confirm_remove, msg, win),
                color=(0.8, 0.2, 0.2),
                textcolor=(1, 1, 1)
            )
            y_pos -= 45

    """Confirm removal"""
    def confirm_remove(s, msg, parent_win):
        messages = load_quick_messages()
        if msg in messages:
            messages.remove(msg)
            save_quick_messages(messages)
            s.refresh_messages()
            push(f'Removed: "{msg}"', color=(1, 0.5, 0))
            gs('dingSmallLow').play()
        AR.swish(parent_win)

    """Reset messages to default"""
    def reset_messages(s):
        save_quick_messages(DEFAULT_QUICK_MESSAGES.copy())
        s.refresh_messages()
        push('Messages reset to default', color=(0, 1, 1))
        gs('dingSmallHigh').play()

"""Ø¬ÙˆÛŒÙ† Ø¯ÙˆØ¨Ø§Ø±Ù‡ (Ø§ØªØµØ§Ù„ Ù…Ø¬Ø¯Ø¯)"""
class Reconnect:
    def __init__(s, t):
        w = s.w = AR.cw(
            source=t,
            size=(400, 350),
            ps=AR.UIS()*0.8,
            background=True
        )
        AR.add_close_button(w, position=(370, 280))

        tw(
            parent=w,
            text='ðŸŒ Server Manager',
            scale=1.2,
            position=(180, 280),
            h_align='center',
            color=(0.2, 0.8, 1)
        )
        
        bw(
            parent=w,
            size=(70, 70),
            position=(340, 200),
            label='',
            texture=gt('settingsIcon'),
            color=(1, 1, 1)
        )
        
        bw(
            parent=w,
            size=(70, 70),
            position=(0, 200),
            label='',
            texture=gt('settingsIcon'),
            color=(1, 1, 1)
        )
        
        tw(
            parent=w,
            text='Join Faster Than Everyone!',
            scale=1.0,
            position=(175, 50),
            h_align='center',
            color=(1, 1, 0)
        )

        tw(
            parent=w,
            text='Current Server:',
            position=(150, 250),
            scale=0.6,
            color=(1, 1, 1)
        )
        
        tw(
            parent=w,
            text=f'IP : {server_ip} PORT : {server_port}',
            position=(100, 220),
            scale=0.7,
            color=(0.8, 1, 0.8),
            h_align='left'
        )

        s.status_text = tw(
            parent=w,
            text='Ready',
            position=(180, 190),
            scale=0.8,
            color=(0.8, 0.8, 1)
        )

        s.reconnect_btn = bw(
            parent=w,
            label='Reconnect',
            size=(170, 35),
            icon=gt('replayIcon'),
            position=(20, 150),
            iconscale=0.6,
            on_activate_call=s.do_reconnect,
            color=(0.2, 0.7, 0.3),
            textcolor=(1, 1, 1)
        )
        
        s.disconnect_btn = bw(
            parent=w,
            label='Disconnect',
            size=(170, 35),
            icon=gt('textClearButton'),
            position=(200, 150),
            iconscale=0.6,
            on_activate_call=s.do_disconnect,
            color=(0.9, 0.3, 0.3),
            textcolor=(1, 1, 1)
        )

        s.saved_servers_btn = bw(
            parent=w,
            label='ðŸ“ Saved Servers',
            size=(170, 35),
            position=(20, 100),
            on_activate_call=s.show_saved_servers,
            color=(0.3, 0.5, 0.8),
            text_scale=0.7,
            textcolor=(1, 1, 1)
        )
        
        s.change_server_btn = bw(
            parent=w,
            label='ðŸ”§ Manual Connect',
            size=(170, 35),
            position=(200, 100),
            on_activate_call=s.show_change_server,
            color=(0.8, 0.6, 0.2),
            text_scale=0.7,
            textcolor=(1, 1, 1)
        )

        s.auto_reconnect = False
        s.auto_reconnect_check = cw(
            parent=w,
            position=(30, 60),
            size=(20, 20),
            on_value_change_call=s.toggle_auto_reconnect,
            color=(0.3, 0.7, 0.3)
        )
        
        tw(
            parent=w,
            text='Auto Reconnect',
            position=(60, 60),
            scale=0.7,
            color=(0.8, 1, 0.8)
        )
        
        AR.swish()
    
    def toggle_auto_reconnect(s, value):
        s.auto_reconnect = value
        status = "ON" if value else "OFF"
        push(f'Auto Reconnect {status}', color=(0, 1, 0))
        tw(s.status_text, text=f'Auto {status}', color=(0, 1, 0))
        
        if value:
            teck(5.0, s.auto_reconnect_check)
    
    def auto_reconnect_check(s):
        if s.auto_reconnect and s.w.exists():
            conn_info = get_connection_info()
            if not conn_info and server_ip != "127.0.0.1":
                tw(s.status_text, text='Auto connecting...', color=(1, 1, 0))
                s.do_reconnect()
            teck(5.0, s.auto_reconnect_check)
    
    def get_saved_servers(s):
        """Get saved servers from persistent storage"""
        try:
            # Use var() for persistent storage
            servers = var('saved_servers')
            if servers is None:
                return []
            return servers
        except:
            return []
    
    def save_servers(s, servers):
        """Save servers to persistent storage"""
        try:
            # Use var() for persistent storage
            var('saved_servers', servers)
            return True
        except:
            return False
    
    def show_saved_servers(s):
        s.servers_win = AR.cw(source=s.w, size=(700, 500), background=True)
        AR.add_close_button(s.servers_win, position=(700, 450))
        
        tw(
            parent=s.servers_win,
            text='ðŸ“ Saved Servers',
            scale=1.2,
            position=(350, 450),
            h_align='center',
            color=(0.2, 0.8, 1)
        )
        
        bw(
            parent=s.servers_win,
            size=(100, 100),
            position=(100, 10),
            label='',
            texture=gt('actionButtons'),
            color=(1, 1, 1)
        )
        
        bw(
            parent=s.servers_win,
            size=(100, 100),
            position=(525, 10),
            label='',
            texture=gt('actionButtons'),
            color=(1, 1, 1)
        )
        
        tw(
            parent=s.servers_win,
            text='Add your favorite servers!',
            scale=1.0,
            position=(350, 400),
            h_align='center',
            color=(1, 1, 0)
        )
        
        saved_servers = s.get_saved_servers()
        
        if not saved_servers:
            tw(
                parent=s.servers_win,
                text='No servers saved',
                position=(340, 250),
                scale=0.9,
                color=(1, 0.8, 0.2),
                h_align='center'
            )
        else:
            scroll = sw(parent=s.servers_win, size=(600, 300), position=(60, 100))
            s.servers_container = cw(parent=scroll, size=(600, len(saved_servers) * 50))
            
            for i, server in enumerate(saved_servers):
                y_pos = len(saved_servers) * 47 - i * 50 - 30
                
                bw(
                    parent=s.servers_container,
                    label='',
                    size=(575, 40),
                    position=(5, y_pos),
                    color=(0.2, 0.3, 0.4) if i % 2 == 0 else (0.25, 0.35, 0.45),
                    enable_sound=False
                )
                
                tw(
                    parent=s.servers_container,
                    text=f"Name : {server['name']}",
                    position=(250, y_pos - 0),
                    scale=0.7,
                    color=(1, 1, 1),
                    h_align='left'
                )
                
                tw(
                    parent=s.servers_container,
                    text=f"IP : {server['ip']} PORT : {server['port']}",
                    position=(20, y_pos - 0),
                    scale=0.6,
                    color=(0.8, 0.9, 1),
                    h_align='left'
                )
                
                bw(
                    parent=s.servers_container,
                    label='ðŸŒ',
                    size=(30, 30),
                    position=(500, y_pos + 3),
                    on_activate_call=Call(s.connect_to_saved, server),
                    color=(0.3, 0.7, 0.3),
                    text_scale=0.6
                )
                
                bw(
                    parent=s.servers_container,
                    label='ðŸ—‘ï¸',
                    size=(30, 30),
                    position=(450, y_pos + 3),
                    on_activate_call=Call(s.remove_saved_server, server),
                    color=(0.8, 0.3, 0.3),
                    text_scale=0.6
                )
        
        bw(
            parent=s.servers_win,
            label='âž• Add New Server',
            size=(150, 70),
            position=(290, 40),
            on_activate_call=s.add_new_server,
            color=(0.4, 0.7, 0.4),
            text_scale=0.7
        )
    
    def connect_to_saved(s, server):
        try:
            if hasattr(s, 'servers_win') and s.servers_win.exists():
                s.servers_win.delete()
            
            tw(s.status_text, text='Connecting...', color=(1, 1, 0))
            push(f'Connecting to {server["name"]}...', color=(0, 1, 0))
            
            conn_info = get_connection_info()
            if conn_info:
                original_disconnect()
                time.sleep(2)
            
            new_connect_to_party(server['ip'], server['port'])
            tw(s.status_text, text='Connected', color=(0, 1, 0))
            gs('dingSmallHigh').play()
            
        except Exception as e:
            AR.err(f'Connection error: {str(e)}')
            tw(s.status_text, text='Connection failed', color=(1, 0, 0))
    
    def remove_saved_server(s, server):
        saved_servers = s.get_saved_servers()
        saved_servers = [srv for srv in saved_servers if srv['ip'] != server['ip'] or srv['port'] != server['port']]
        
        if s.save_servers(saved_servers):
            push('Server removed', color=(1, 0.5, 0))
            if hasattr(s, 'servers_win') and s.servers_win.exists():
                s.servers_win.delete()
                s.show_saved_servers()
    
    def add_new_server(s):
        s.add_win = AR.cw(source=s.w, size=(700, 500), background=True)
        AR.add_close_button(s.add_win, position=(700, 450))
        
        tw(
            parent=s.add_win,
            text='âž• Add New Server',
            scale=2.1,
            position=(325, 450),
            h_align='center',
            color=(0.2, 0.8, 1)
        )
        
        bw(
            parent=s.add_win,
            size=(100, 100),
            position=(600, 250),
            label='',
            texture=gt('storeCharacter'),
            color=(1, 1, 1)
        )
        
        tw(
            parent=s.add_win,
            text='Enter the IP and port of the server and choose a name for it!',
            scale=1.0,
            position=(325, 380),
            h_align='center',
            color=(1, 1, 0)
        )
        
        tw(
            parent=s.add_win,
            text='Server Name:',
            position=(30, 300),
            scale=1.0,
            color=(1, 1, 1)
        )
        s.name_input = tw(
            parent=s.add_win,
            position=(200, 290),
            size=(340, 40),
            editable=True,
            text='New Server',
            color=(0.9, 0.9, 0.9)
        )
        
        tw(
            parent=s.add_win,
            text='Server IP:',
            position=(30, 220),
            scale=1.0,
            color=(1, 1, 1)
        )
        s.ip_input = tw(
            parent=s.add_win,
            position=(200, 210),
            size=(340, 40),
            editable=True,
            text='127.0.0.1',
            color=(0.9, 0.9, 0.9)
        )
        
        tw(
            parent=s.add_win,
            text='Server Port:',
            position=(30, 140),
            scale=1.0,
            color=(1, 1, 1)
        )
        s.port_input = tw(
            parent=s.add_win,
            position=(200, 130),
            size=(340, 40),
            editable=True,
            text='43210',
            h_align='center',
            color=(0.9, 0.9, 0.9)
        )
        
        bw(
            parent=s.add_win,
            label='ðŸ’¾ Save',
            size=(150, 70),
            position=(290, 35),
            on_activate_call=s.save_new_server,
            color=(0.3, 0.7, 0.3),
            text_scale=0.8
        )
    
    def save_new_server(s):
        try:
            name = tw(query=s.name_input).strip()
            ip = tw(query=s.ip_input).strip()
            port_str = tw(query=s.port_input).strip()
            
            if not all([name, ip, port_str]):
                AR.err('Please fill all fields')
                return
            
            port = int(port_str)
            
            new_server = {'name': name, 'ip': ip, 'port': port}
            saved_servers = s.get_saved_servers()
            
            if any(srv['ip'] == ip and srv['port'] == port for srv in saved_servers):
                AR.err('Server already exists')
                return
            
            saved_servers.append(new_server)
            
            if s.save_servers(saved_servers):
                push(f'Server "{name}" saved', color=(0, 1, 0))
                
                if hasattr(s, 'add_win') and s.add_win.exists():
                    s.add_win.delete()
                if hasattr(s, 'servers_win') and s.servers_win.exists():
                    s.servers_win.delete()
                    s.show_saved_servers()
                    
        except ValueError:
            AR.err('Port must be a number')
        except Exception as e:
            AR.err(f'Error: {str(e)}')
    
    def show_change_server(s):
        s.change_win = AR.cw(source=s.w, size=(700, 500), background=True)
        AR.add_close_button(s.change_win, position=(700, 450))

        tw(
            parent=s.change_win,
            text='Change Server Manually',
            scale=2.1,
            position=(325, 450),
            h_align='center',
            color=(0.2, 0.8, 1)
        )

        bw(
            parent=s.change_win,
            size=(70, 70),
            position=(600, 250),
            label='',
            texture=gt('replayIcon'),
            color=(1, 1, 1)
        )
        
        tw(
            parent=s.change_win,
            text='Edit the IP and port to connect to servers manually!',
            scale=1.0,
            position=(325, 380),
            h_align='center',
            color=(1, 1, 0)
        )

        tw(
            parent=s.change_win, 
            text='Server IP :', 
            position=(30, 300), 
            scale=1.0, 
            color=(1, 1, 1)
        )
        s.change_ip = tw(
            parent=s.change_win, 
            position=(200, 290), 
            size=(340, 40), 
            editable=True,
            text=server_ip, 
            color=(0.9, 0.9, 0.9)
        )

        tw(
            parent=s.change_win, 
            text='Server PORT :', 
            position=(30, 220), 
            scale=0.9, 
            color=(1, 1, 1)
        )
        s.change_port = tw(
            parent=s.change_win, 
            position=(200, 210), 
            size=(340, 40), 
            editable=True,
            text=str(server_port), 
            h_align='center', 
            color=(0.9, 0.9, 0.9)
        )

        s.status_text_change = tw(
            parent=s.change_win, 
            text='Ready to Connect', 
            position=(280, 150), 
            scale=0.8, 
            color=(0.8, 0.8, 1)
        )

        s.connect_btn = bw(
            parent=s.change_win, 
            label='Connect to Server', 
            size=(150, 70), 
            icon=gt('startButton'), 
            position=(100, 60), 
            iconscale=0.6,
            on_activate_call=s.connect_manual, 
            color=(0, 0.6, 0), 
            textcolor=(1, 1, 1)
        )

        s.test_btn = bw(
            parent=s.change_win, 
            label='Test Connection', 
            size=(150, 70), 
            icon=gt('replayIcon'), 
            position=(475, 60), 
            iconscale=0.6,
            on_activate_call=s.test_connection, 
            color=(0.3, 0.5, 0.8), 
            textcolor=(1, 1, 1)
        )
    
    def test_connection(s):
        try:
            ip = tw(query=s.change_ip).strip()
            port_str = tw(query=s.change_port).strip()
            
            if not ip or not port_str:
                AR.err('Please enter IP and port')
                return
            
            port = int(port_str)
            
            tw(s.status_text_change, text='Testing...', color=(1, 1, 0))
            
            teck(1.5, lambda: tw(s.status_text_change, text='Test successful!', color=(0, 1, 0)))
            push('Connection test successful!', color=(0, 1, 0))
            
        except ValueError:
            AR.err('Port must be a number')
        except Exception as e:
            AR.err(f'Test error: {str(e)}')
    
    def connect_manual(s):
        try:
            ip = tw(query=s.change_ip).strip()
            port_str = tw(query=s.change_port).strip()
            
            if not ip or not port_str:
                AR.err('Please enter IP and port')
                return
            
            port = int(port_str)
            
            tw(s.status_text_change, text='Connecting...', color=(1, 1, 0))
            
            conn_info = get_connection_info()
            if conn_info:
                original_disconnect()
                time.sleep(2)
            
            push(f'Connecting to {ip}:{port}...', color=(0, 1, 1))
            new_connect_to_party(ip, port)
            
            tw(s.status_text_change, text='Connected!', color=(0, 1, 0))
            
            if hasattr(s, 'change_win') and s.change_win.exists():
                s.change_win.delete()
            
        except ValueError:
            AR.err('Port must be a number')
        except Exception as e:
            AR.err(f'Connection error: {str(e)}')
            tw(s.status_text_change, text='Connection failed', color=(1, 0, 0))
    
    def do_reconnect(s):
        try:
            if server_ip != "127.0.0.1":
                tw(s.status_text, text='Reconnecting...', color=(1, 1, 0))
                
                conn_info = get_connection_info()
                if conn_info:
                    original_disconnect()
                    time.sleep(2)
                
                push(f'Connecting to {server_ip}:{server_port}...', color=(0, 1, 0))
                new_connect_to_party(server_ip, server_port)
                tw(s.status_text, text='Reconnected', color=(0, 1, 0))
                gs('dingSmallHigh').play()
            else:
                AR.err('No server to connect to!')
        except Exception as e:
            AR.err(f'Connection error: {str(e)}')
            tw(s.status_text, text='Connection failed', color=(1, 0, 0))
    
    def do_disconnect(s):
        try:
            conn_info = get_connection_info()
            if conn_info:
                original_disconnect()
                push('Disconnected', color=(1, 0, 0))
                tw(s.status_text, text='Disconnected', color=(1, 0, 0))
                gs('dingSmallLow').play()
            else:
                AR.err('Not connected to any server!')
        except Exception as e:
            AR.err(f'Disconnect error: {str(e)}')

#Ø³Ø±Ø¹Øª Ø¨Ø§Ø²ÛŒ            
class SpeedControl:
    def __init__(self, source):
        self._root_widget = bui.containerwidget(
            parent=bui.get_special_widget('overlay_stack'),
            size=(1000, 700),
            scale=0.7,
            transition='in_scale',
            color=(0.18, 0.18, 0.18),
            on_outside_click_call=self.close
        )
        
        # Ø¹Ù†ÙˆØ§Ù†
        bui.textwidget(
            parent=self._root_widget,
            text='Game speed control',
            scale=3.0,
            position=(500, 600),
            h_align='center',
            color=(1, 1, 0)
        )
        
        # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±Ø¹Øª - Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§ Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ø±Ø¯Ù…
        speed_modes = [
            ('Ultra Slow (1.0x)', 1.0, (60, 400)),
            ('Epic (0.7x)', 0.7, (60, 290)),
            ('Normal (0.5x)', 0.5, (60, 180)),
            ('Fast  (0.3x)', 0.3, (60, 70))
        ]
        
        for label, speed, pos in speed_modes:
            bui.buttonwidget(
                parent=self._root_widget,
                label=label,
                size=(900, 120),  # Ø§Ø±ØªÙØ§Ø¹ Ø±Ø§ Ú©Ù…ÛŒ Ú©Ø§Ù‡Ø´ Ø¯Ø§Ø¯Ù…
                position=pos,
                on_activate_call=lambda s=speed, l=label: self.set_speed(s, l),
                color=(0.3, 0.5, 0.8),
                textcolor=(1, 1, 1),
                text_scale=2.5  # Ù…ØªÙ† Ø±Ø§ Ú¯Ù†Ø¯Ù‡â€ŒØªØ± Ú©Ø±Ø¯Ù…
            )
        
        # Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† - Ù…ÙˆÙ‚Ø¹ÛŒØª Ùˆ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ø±Ø¯Ù…
        bui.buttonwidget(
            parent=self._root_widget,
            label='Close',
            size=(150, 100),
            position=(850, 600),
            on_activate_call=self.close,
            color=(0.8, 0.2, 0.2),
            textcolor=(1, 1, 1),
            text_scale=1.8  # Ù…ØªÙ† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ø±Ø§ Ú¯Ù†Ø¯Ù‡â€ŒØªØ± Ú©Ø±Ø¯Ù…
        )
    
    def set_speed(self, speed, label):
        """Set game speed"""
        try:
            activity = bs.get_foreground_host_activity()
            if activity and hasattr(activity, 'globalsnode'):
                activity.globalsnode.slow_motion = speed
                bui.screenmessage(f'Speed mode: {label}', color=(0, 1, 0))
                bui.getsound('dingSmallHigh').play()
                self.close()
            else:
                bui.screenmessage('Game activity not found!', color=(1, 0, 0))
        except Exception as e:
            bui.screenmessage(f'Error setting speed: {str(e)}', color=(1, 0, 0))
    
    def close(self):
        bui.containerwidget(self._root_widget, transition='out_scale')
            
"""Server Information"""
class ServerInfo:
    def __init__(s, t):
        w = s.w = AR.cw(
            source=t,
            size=(400, 350),
            ps=AR.UIS()*0.8
        )
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(370, 290))
        
        # Ø¹Ù†ÙˆØ§Ù†
        tw(
            parent=w,
            text=u'\ue010 Server Information',
            scale=1.2,
            position=(180, 280),
            h_align='center',
            color=(0, 1, 1)
        )
        
        bw(
            parent=w,
            size=(20, 20),
            position=(190, 115),
            label='',
            texture=gt('googlePlayAchievementsIcon'),
            color=(1, 1, 1)
        )
        
        # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ±
        global server_ip, server_port, current_ping
        
        # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØªØµØ§Ù„
        conn_info = get_connection_info()
        if conn_info:
            server_name = conn_info.name
            server_status = "Connected"
        else:
            server_name = "Local Server"
            server_status = "Local"
        
        # Ø§ÛŒØ¬Ø§Ø¯ ÙˆÛŒØ¬Øªâ€ŒÙ‡Ø§ÛŒ Ù…ØªÙ† Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ±
        s.info_widgets = []
        info_labels = [
            "ðŸŒ Server IP:",
            "ðŸšª Server Port:", 
            "ðŸ·ï¸ Server Name:",
            "ðŸ“¶ Current Ping:",
            "ðŸ”— Connection Status:"
        ]
        
        y_pos = 250
        for i, label in enumerate(info_labels):
            # Ø¨Ø±Ú†Ø³Ø¨
            tw(
                parent=w,
                text=label,
                position=(30, y_pos),
                scale=0.8,
                color=(1, 1, 0.8),
                h_align='left'
            )
            # Ù…Ù‚Ø¯Ø§Ø± - ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± 30 Ù¾ÛŒÚ©Ø³Ù„ Ø¨Ù‡ Ø±Ø§Ø³Øª
            value_x = 230 # Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± 30 Ù¾ÛŒÚ©Ø³Ù„ Ø¨Ù‡ Ø±Ø§Ø³Øª Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù‚Ø¨Ù„
            
            value_widget = tw(
                parent=w,
                text="",  # Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡ Ø®Ø§Ù„ÛŒ
                position=(value_x, y_pos),
                scale=0.8,
                color=(1, 1, 1),
                h_align='left'
            )
            s.info_widgets.append(value_widget)
            y_pos -= 30
        
        # Ù…Ù‚Ø§Ø¯ÛŒØ± Ø§ÙˆÙ„ÛŒÙ‡
        s.update_server_info()
        
        # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù¾ÛŒ
        copy_buttons = [
            ('Copy IP', server_ip, (20, 70)),
            ('Copy Port', str(server_port), (150, 70)),
            ('Copy all', f"{server_ip}:{server_port}", (280, 70))
        ]
        
        for label, data, pos in copy_buttons:
            AR.bw(
                parent=w,
                label=label,
                size=(100, 35),
                position=pos,
                on_activate_call=Call(s.copy_to_clipboard, data)
            )
        # Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
        s.timer = teck(1.0, s.update_server_info)
        AR.swish()
    
    def update_server_info(s):
        """Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ±"""
        if not hasattr(s, 'w') or not s.w.exists():
            return
        
        # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØªØµØ§Ù„
        conn_info = get_connection_info()
        
        if conn_info:
            server_name = conn_info.name
            server_status = "Connected"
        else:
            server_name = "Local Server"
            server_status = "Local"
        
        # Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´
        values = [
            server_ip,
            str(server_port),
            server_name,
            f"{current_ping} ms",
            server_status
        ]
        
        # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆÛŒØ¬Øªâ€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†
        for i, value in enumerate(values):
            if i < len(s.info_widgets) and s.info_widgets[i].exists():
                tw(s.info_widgets[i], text=value)
        
        # ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ù¾ÛŒÙ†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø¯Ø§Ø±
        if 3 < len(s.info_widgets) and s.info_widgets[3].exists():
            ping_color = (0, 1, 0) if current_ping < 100 else (1, 1, 0) if current_ping < 300 else (1, 0, 0)
            tw(s.info_widgets[3], color=ping_color)
        
        # ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„
        if 4 < len(s.info_widgets) and s.info_widgets[4].exists():
            status_color = (0, 1, 0) if server_status == "Connected" else (1, 1, 0) if server_status == "Local" else (1, 0, 0)
            tw(s.info_widgets[4], color=status_color)
        
        # Ø§Ø¯Ø§Ù…Ù‡ ØªØ§ÛŒÙ…Ø±
        s.timer = teck(1.0, s.update_server_info)
    
    def copy_to_clipboard(s, text):
        """Ú©Ù¾ÛŒ Ù…ØªÙ† Ø¨Ù‡ Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯"""
        try:
            if CIS():
                from babase import clipboard_set_text
                clipboard_set_text(text)
                push(f'Copied: {text}', color=(0, 1, 0))
                gs('dingSmall').play()
            else:
                AR.err('Clipboard not supported!')
        except Exception as e:
            AR.err(f'Copy error: {str(e)}')
    
    def __del__(s):
        """ØªÙ…ÛŒØ²Ú©Ø§Ø±ÛŒ Ù‡Ù†Ú¯Ø§Ù… Ø­Ø°Ù"""
        if hasattr(s, 'timer') and s.timer:
            s.timer = None
            
"""Ø§Ø³Ù¾Ù… Ø®ÙˆØ¯Ú©Ø§Ø±"""
class Spam:
    # Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ ÙØ¹Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ØªØ§ÛŒÙ…Ø± Ùˆ ÙˆØ¶Ø¹ÛŒØª
    active_instance = None

    def __init__(s, source):
        # Ø«Ø¨Øª Ø®ÙˆØ¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù†Ù…ÙˆÙ†Ù‡ ÙØ¹Ø§Ù„
        Spam.active_instance = s

        w = s.w = AR.cw(
            source=source,
            size=(400, 350),
            ps=AR.UIS()*0.8
        )
        AR.add_close_button(w, position=(370, 280))

        # Ø¹Ù†ÙˆØ§Ù†
        tw(
            parent=w,
            text=u'\ue029   Automated spam',
            scale=1.2,
            position=(180, 280),
            h_align='center',
            color=(1, 0.5, 0)
        )
        
        bw(
            parent=w,
            size=(70, 70),
            position=(300, 50),
            label='',
            texture=gt('leaderboardsIcon'),
            color=(1, 1, 1)
        )

        # ÙÛŒÙ„Ø¯ Ù¾ÛŒØ§Ù…
        tw(parent=w, text='Spam message:', position=(30, 250), scale=0.9, color=(1, 1, 1))
        s.message_widget = tw(parent=w, position=(30, 220), size=(340, 30), editable=True,
                              text='Spam test', color=(0.9, 0.9, 0.9))

        # ÙÛŒÙ„Ø¯ ØªØ¹Ø¯Ø§Ø¯
        tw(parent=w, text='Number:', position=(30, 180), scale=0.9, color=(1, 1, 1))
        s.count_widget = tw(parent=w, position=(30, 150), size=(150, 30), editable=True,
                            text='5', h_align='center', color=(0.9, 0.9, 0.9))

        # ÙÛŒÙ„Ø¯ ØªØ£Ø®ÛŒØ±
        tw(parent=w, text='Delay (seconds):', position=(200, 180), scale=0.9, color=(1, 1, 1))
        s.delay_widget = tw(parent=w, position=(200, 150), size=(150, 30), editable=True,
                            text='1', h_align='center', color=(0.9, 0.9, 0.9))

        # ÙˆØ¶Ø¹ÛŒØª
        s.status_text = tw(parent=w, text='ready', position=(30, 110), scale=0.8, color=(0.8, 0.8, 1))

        # Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹
        s.start_btn = bw(parent=w, label='Start spamming', size=(120, 40), icon=gt('startButton'), position=(20, 60), iconscale=0.6,
                         on_activate_call=Call(s.start_spam), color=(0, 0.6, 0), textcolor=(1, 1, 1))

        # Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªÙ¾ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
        s.stop_btn = bw(parent=w, label='stop', size=(120, 40), icon=gt('replayIcon'), position=(160, 60), iconscale=0.6,
                        on_activate_call=Call(s.stop_spam), color=(0.6, 0, 0), textcolor=(1, 1, 1))

        s.spamming = False
        s.spam_timer = None
        s.remaining_count = 0
        s.sent_count = 0  # Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡
        AR.swish()

    @staticmethod
    def start_spam():
        s = Spam.active_instance
        try:
            message = tw(query=s.message_widget).strip()
            count = int(tw(query=s.count_widget))
            delay = float(tw(query=s.delay_widget))

            if not message:
                AR.err('Please enter a message!')
                return

            if count <= 0 or delay <= 0:
                AR.err('Values â€‹â€‹must be greater than zero!')
                return

            s.spamming = True
            s.remaining_count = count
            s.spam_message = message
            s.spam_delay = delay
            s.sent_count = 0  # Ø±ÛŒØ³Øª Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡

            tw(s.status_text, text=f'Spamming: {s.remaining_count} remaining', color=(0, 1, 0))

            s.do_spam()

            push(f'Spam started: {count} messages with a delay of {delay} seconds', color=(0, 1, 0))

        except ValueError:
            AR.err('Please enter valid numbers!')
        except Exception as e:
            AR.err(f'Error: {str(e)}')

    @staticmethod
    def stop_spam():
        s = Spam.active_instance
        if not s.spamming:
            return  # Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù¾ÛŒØ§Ù… Ú†Ù†Ø¯Ø¨Ø§Ø±Ù‡

        s.spamming = False

        if s.spam_timer:
            try:
                s.spam_timer.cancel()
            except:
                pass
            s.spam_timer = None

        tw(s.status_text, text='â›” Spam stopped', color=(1, 0.5, 0))
        push('â›” Spam stopped', color=(1, 0.5, 0))

    @staticmethod
    def do_spam():
        s = Spam.active_instance
        if not s.spamming or s.remaining_count <= 0:
            s.spamming = False
            if s.spam_timer:
                try:
                    s.spam_timer.cancel()
                except:
                    pass
                s.spam_timer = None
            tw(s.status_text, text='âœ… Spam is over', color=(0, 1, 0))
            push('âœ… Spam is over', color=(0, 1, 0))
            return

        try:
            # Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡
            s.sent_count += 1

            # Ø¨Ø±Ø±Ø³ÛŒ Ø²ÙˆØ¬/ÙØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù†Ù‚Ø·Ù‡
            message_to_send = s.spam_message
            if s.sent_count % 2 == 0:
                message_to_send += "."

            CM(message_to_send)
            s.remaining_count -= 1

            if s.w.exists():
                tw(s.status_text, text=f'Spamming: {s.remaining_count} remaining')

            if s.remaining_count > 0 and s.spamming:
                s.spam_timer = teck(s.spam_delay, s.do_spam)
            else:
                s.spamming = False
                if s.spam_timer:
                    try:
                        s.spam_timer.cancel()
                    except:
                        pass
                    s.spam_timer = None
                tw(s.status_text, text='Spam is over âœ…', color=(0, 1, 0))
                push('Spam is over âœ…', color=(0, 1, 0))

        except Exception as e:
            AR.err(f'Error sending: {str(e)}')
            Spam.stop_spam()

"""Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ù…ÙˆØ¯ Auto Message"""
class Help:
    def __init__(s, t):
        w = AR.cw(
            source=t,
            size=(500, 300),  # Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ Ø¨Ù‡ 300
            ps=AR.UIS()*0.8
        )
        
        # Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ
        tw(
            parent=w,
            text='ðŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ SelfTaha v3.0',
            scale=1.0,  # Ú©Ø§Ù‡Ø´ Ø³Ø§ÛŒØ² Ø¹Ù†ÙˆØ§Ù†
            position=(230, 250),
            h_align='center',
            color=(0, 1, 1)
        )
        
        # Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø§Ø²Ù†Ø¯Ù‡
        tw(
            parent=w,
            text='ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡: Ø·Ø§Ù‡Ø§ Ø§Ø³ØªØ§Ø¯Ø´Ø±ÛŒÙ',
            scale=0.6,  # Ú©Ø§Ù‡Ø´ Ø³Ø§ÛŒØ²
            position=(250, 230),
            h_align='center',
            color=(1, 1, 0)
        )
        
        bw(
            parent=w,
            size=(50, 50),
            position=(230, 5),
            label='',
            texture=gt('discordServer'),
            color=(1, 1, 1)
        )
        
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(480, 250))
        
        # Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ Ø±Ø§Ù‡Ù†Ù…Ø§ - Ø§Ø±ØªÙØ§Ø¹ Ú©Ù…ØªØ±
        s.scroll = sw(
            parent=w,
            size=(460, 180),  # Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ Ø§Ø³Ú©Ø±ÙˆÙ„
            position=(20, 50)
        )
        
        s.container = cw(
            parent=s.scroll,
            size=(460, 1000),  # Ú©Ø§Ù‡Ø´ Ø§Ø±ØªÙØ§Ø¹ Ú©Ø§Ù†ØªÛŒÙ†Ø±
            background=False
        )
        
        # Ù…Ø­ØªÙˆØ§ÛŒ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ (Ø®Ù„Ø§ØµÙ‡â€ŒØªØ±)
        contents = [
            "ðŸŽ¯ Ù…Ø¹Ø±ÙÛŒ Ù…ÙˆØ¯ SelfTaha",
            "Ù…ÙˆØ¯  SelfTaha ÛŒÚ© Ø±Ø¨Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ Ø¯Ø± Ú†Øª Ø¨Ø§Ø²ÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.\n Ø§ÛŒÙ† Ù…ÙˆØ¯ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ù…ØªÙ†ÙˆØ¹ØŒ ØªØ¬Ø±Ø¨Ù‡ Ú†Øª Ø±Ø§ Ù…ØªØ­ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯!",
            "",
            "âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ:",
            "â€¢ Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ",
            "â€¢ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù¾ÙˆÛŒØ§ Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯",
            "â€¢ Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹",
            "â€¢ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±Ú¯Ø±Ù…ÛŒ Ùˆ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ",
            "â€¢ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆØ± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØªØµØ§Ù„",
            "â€¢ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†",
            "â€¢ Ù‚Ø§Ø¨Ù„ÛŒØª ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ",
            "â€¢ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ØªØ§ÛŒÙ¾ÙˆÚ¯Ø±Ø§ÙÛŒ Ùˆ ÙÙˆÙ†Øªâ€ŒØ³Ø§Ø²ÛŒ",
            "",
            "ðŸ”§ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ù…ÙˆØ¯:",
            "",
            "1. ðŸŽ¯ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± (Auto Reply)",
            "   - ØªØ¹Ø±ÛŒÙ Ù…Ø§Ø´Ù‡â€ŒÙ‡Ø§ Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ",
            "   - Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§",
            "   - Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§",
            "",
            "2. ðŸ’¬ Ú†Øª Ø³Ø±ÛŒØ¹ (Quick Chat)",
            "   - Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯",
            "   - Ø§Ø±Ø³Ø§Ù„ Ø³Ø±ÛŒØ¹ Ø¨Ø§ ÛŒÚ© Ú©Ù„ÛŒÚ©",
            "   - Ù‚Ø§Ø¨Ù„ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ùˆ Ø­Ø°Ù",
            "",
            "3. ðŸŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆØ± (Server Manager)",
            "   - Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø³Ø±ÙˆØ±",
            "   - Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ Ùˆ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„",
            "   - Ø°Ø®ÛŒØ±Ù‡ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ø¹Ù„Ø§Ù‚Ù‡",
            "   - Ø§ØªØµØ§Ù„ Ù…Ø¬Ø¯Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±",
            "",
            "4. ðŸŽ® Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±Ú¯Ø±Ù…ÛŒ:",
            "   - ØªÙˆÙ„ÛŒØ¯ Ø¬ÙˆÚ©ØŒ Ú†ÛŒØ³ØªØ§Ù† Ùˆ Ø¶Ø±Ø¨ Ø§Ù„Ù…Ø«Ù„",
            "   - Ø¨Ø§Ø²ÛŒ Ø­Ù‚ÛŒÙ‚Øª ÛŒØ§ Ø¬Ø±Ø§Øª",
            "   - Ø§Ø¨Ø²Ø§Ø± ØªØ§Ø³ Ùˆ Ø´Ø§Ù†Ø³",
            "   - Ø§Ø¨Ø²Ø§Ø± Ø§Ø³Ù¾Ù… Ùˆ Ø§Ø±Ø³Ø§Ù„ Ú¯Ø±ÙˆÙ‡ÛŒ",
            "",
            "5. ðŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†:",
            "   - Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„ÛŒØ³Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† Ø¢Ù†Ù„Ø§ÛŒÙ†",
            "   - Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÙˆØ³ØªØ§Ù† Ùˆ Ù„ÛŒØ³Øª Ù…Ø³Ø¯ÙˆØ¯Ù‡Ø§",
            "   - Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†",
            "   - Ù‚Ø§Ø¨Ù„ÛŒØª Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ",
            "",
            "6. ðŸŽ¨ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ:",
            "   - ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ",
            "   - Ø§Ø¨Ø²Ø§Ø± Ø³Ø§Ø®Øª ÙÙˆÙ†Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ",
            "   - Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªÛŒÚ©Ø±Ù‡Ø§ Ùˆ Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§",
            "",
            "ðŸ”¤ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§:",
            "",
            "ðŸ‘¤ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±ÛŒ:",
            "%m - Ù†Ø§Ù… Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø¯Ø± Ø¨Ø§Ø²ÛŒ",
            "%s - Ù†Ø§Ù… ÙØ±Ø³ØªÙ†Ø¯Ù‡ Ù¾ÛŒØ§Ù…",
            "",
            "â° Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ:",
            "%t - Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ (Ø³Ø§Ø¹Øª:Ø¯Ù‚ÛŒÙ‚Ù‡:Ø«Ø§Ù†ÛŒÙ‡)",
            "%d - ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ (Ø³Ø§Ù„-Ù…Ø§Ù‡-Ø±ÙˆØ²)",
            "%f - ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚",
            "",
            "ðŸŽ­ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ú¯Ø±Ù…ÛŒ:",
            "%j - Ø¬ÙˆÚ© ØªØµØ§Ø¯ÙÛŒ ÙØ§Ø±Ø³ÛŒ",
            "%ch - Ú†ÛŒØ³ØªØ§Ù† Ú©ÙˆØªØ§Ù‡ Ø¨Ø§ Ø¬ÙˆØ§Ø¨",
            "%z - Ø¶Ø±Ø¨ Ø§Ù„Ù…Ø«Ù„ ÙØ§Ø±Ø³ÛŒ",
            "%dice - Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ Ø¨Ø§ ØªØ§Ø³",
            "%tr - Ø³ÙˆØ§Ù„ Ø­Ù‚ÛŒÙ‚Øª (Ø¨Ø§Ø²ÛŒ Ø­Ù‚ÛŒÙ‚Øª ÛŒØ§ Ø¬Ø±Ø§Øª)",
            "%da - Ø³ÙˆØ§Ù„ Ø¬Ø±Ø§Øª (Ø¨Ø§Ø²ÛŒ Ø­Ù‚ÛŒÙ‚Øª ÛŒØ§ Ø¬Ø±Ø§Øª)",
            "",
            "ðŸŒ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡:",
            "%ip - Ø¢ÛŒÙ¾ÛŒ Ùˆ Ù¾ÙˆØ±Øª Ø³Ø±ÙˆØ±",
            "%p - Ù¾ÛŒÙ†Ú¯ ÙØ¹Ù„ÛŒ Ø³Ø±ÙˆØ±",
            "",
            "âš¡ Ù†Ú©Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ:",
            "",
            "â€¢ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ: Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ø§ ØªØ£Ø®ÛŒØ± Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆÙ†Ø¯",
            "â€¢ Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ Ø­Ø±ÙˆÙ: Ù‚Ø§Ø¨Ù„ÛŒØª ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ Ø­Ø±ÙˆÙ",
            "â€¢ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø®ÙˆØ¯: Ø§Ù…Ú©Ø§Ù† Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† ØªÙ†Ø¸ÛŒÙ… Ú©Ø±Ø¯",
            "",
            "ðŸŽ¯ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:",
            "",
            "Ù…Ø«Ø§Ù„ Û± (Ù¾Ø§Ø³Ø® Ø³Ø§Ø¯Ù‡):",
            "Ù…Ø§Ø´Ù‡: Ø³Ù„Ø§Ù…",
            "Ù¾Ø§Ø³Ø®: Ø¯Ø±ÙˆØ¯ %s! Ú†Ø·ÙˆØ±ÛŒØŸ",
            "",
            "Ù…Ø«Ø§Ù„ Û² (ØªØ±Ú©ÛŒØ¨ Ù…ØªØºÛŒØ±Ù‡Ø§):",
            "Ù…Ø§Ø´Ù‡: Ø²Ù…Ø§Ù†",
            "Ù¾Ø§Ø³Ø®: Ø§Ù„Ø§Ù† Ø³Ø§Ø¹Øª %t - ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ: %f",
            "",
            "Ù…Ø«Ø§Ù„ Û³ (Ø³Ø±Ú¯Ø±Ù…ÛŒ):",
            "Ù…Ø§Ø´Ù‡: Ø¬ÙˆÚ© Ø¨Ú¯Ùˆ",
            "Ù¾Ø§Ø³Ø®: %j",
            "",
            "Ù…Ø«Ø§Ù„ Û´ (Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø±ÙˆØ±):",
            "Ù…Ø§Ø´Ù‡: Ù¾ÛŒÙ†Ú¯",
            "Ù¾Ø§Ø³Ø®: Ù¾ÛŒÙ†Ú¯ Ø³Ø±ÙˆØ±: %p - Ø¢ÛŒÙ¾ÛŒ: %ip",
            "",
            "ðŸ”§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡:",
            "",
            "â€¢ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†: Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§",
            "â€¢ ØµØ¯Ø§: Ù¾Ø®Ø´ ØµØ¯Ø§ Ù‡Ù†Ú¯Ø§Ù… Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ",
            "â€¢ Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ Ø­Ø±ÙˆÙ: ØªÙØ§ÙˆØª Ø¨ÛŒÙ† Ø­Ø±ÙˆÙ Ø¨Ø²Ø±Ú¯ Ùˆ Ú©ÙˆÚ†Ú©",
            "â€¢ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø®ÙˆØ¯: Ø§Ù…Ú©Ø§Ù† Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯"
        ]
        
        # Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§ Ø¨Ø§ Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ ÙØ´Ø±Ø¯Ù‡
        y_pos = 1320  # Ø´Ø±ÙˆØ¹ Ø§Ø² Ù¾Ø§ÛŒÛŒÙ† Ú©Ø§Ù†ØªÛŒÙ†Ø±
        for content in contents:
            if content.startswith("ðŸŽ¯") or content.startswith("âœ¨") or content.startswith("ðŸ”¤") or content.startswith("âš¡"):
                color = (0, 1, 1)
                scale = 0.5
                maxwidth = 440
            elif content.startswith("â€¢ "):
                color = (0.8, 0.9, 1)
                scale = 0.4
                maxwidth = 440
            elif content == "":
                y_pos -= 8
                continue
            else:
                color = (1, 1, 1)
                scale = 0.4
                maxwidth = 440
            
            tw(
                parent=s.container,
                text=content,
                position=(10, y_pos),
                scale=scale,
                color=color,
                maxwidth=maxwidth,
                h_align='left'
            )
            y_pos -= 15  # ÙØ§ØµÙ„Ù‡ Ú©Ù…ØªØ± Ø¨ÛŒÙ† Ø®Ø·ÙˆØ·
        
        # ØªÙ†Ø¸ÛŒÙ… Ø§Ø±ØªÙØ§Ø¹ ÙˆØ§Ù‚Ø¹ÛŒ Ú©Ø§Ù†ØªÛŒÙ†Ø±
        total_height = 1000 - y_pos + 300
        cw(s.container, size=(460, total_height))
        
        # Ø§Ø³Ú©Ø±ÙˆÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ø¨Ø§Ù„Ø§
        teck(0.1, lambda: sw(edit=s.scroll, vertical_scroll=1.0))
        
        AR.swish()
       

"""Ù¾Ø§ÛŒÙ‡ Ù¾ÛŒØ§Ù… Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©"""
class AR:
    @classmethod
    def UIS(c=0):
        i = APP.ui_v1.uiscale
        return [1.5,1.1,0.8][0 if i == uis.SMALL else 1 if i == uis.MEDIUM else 2]
    
    @classmethod
    def add_close_button(c, window, position=(10, 10)):
        """Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ø¨Ù‡ Ù¾Ù†Ø¬Ø±Ù‡"""
        close_btn = bw(
            parent=window,
            size=(30, 30),
            position=position,
            label='X',
            color=(0.8, 0.2, 0.2),
            textcolor=(1, 1, 1),
            on_activate_call=Call(c.swish, t=window)
        )
        return close_btn
    
    @classmethod
    def parse(c=0,t=0,s=None):
        me = byTaha.me()
        now = DT.now()
        
        # ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø¨Ù‡ Ø´Ù…Ø³ÛŒ
        jy, jm, jd = gregorian_to_jalali(now.year, now.month, now.day)
        persian_date = f"{jy}-{jm:02d}-{jd:02d}"
        
        # Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡)
        bet = random.randint(1, 6)
        
        # Ù¾Ø§Ø³Ø® ØªØµØ§Ø¯ÙÛŒ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
        if '%r' in t and '|' in t:
            parts = t.split('%r')
            options = parts[1].split('|')[0].split(';')
            random_response = random.choice(options)
            t = parts[0] + random_response + '|'.join(parts[1].split('|')[1:])
        
        # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¬ÙˆÚ© ØªØµØ§Ø¯ÙÛŒ
        if '%j' in t:
            t = t.replace('%j', random.choice(JOKES))
        # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ú†ÛŒØ³ØªØ§Ù† ØªØµØ§Ø¯ÙÛŒ
        if '%ch' in t:
            t = t.replace('%ch', random.choice(RIDDLES))
         # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¶Ø±Ø¨ Ø§Ù„Ù…Ø«Ù„ ØªØµØ§Ø¯ÙÛŒ
        if '%z' in t:
            t = t.replace('%z', random.choice(PROVERBS))
        #Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø­Ù‚ÛŒÙ‚Øª ØªØµØ§Ø¯ÙÛŒ
        if '%tr' in t:
            t = t.replace('%tr',random.choice(TRUTHS))
         #Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¬Ø±Ø¹Øª ØªØµØ§Ø¯ÙÛŒ
        if '%da' in t:
            t = t.replace('%da',random.choice(DARES))
# Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ ØªØ§Ø³ ØªØµØ§Ø¯ÙÛŒ
        if '%dice' in t:
            t = t.replace('%dice', random.choice(DICE))
        #Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¢ÛŒÙ¾ÛŒ Ø³Ø±ÙˆØ± ÙˆØ§Ù‚Ø¹ÛŒ
        if '%ip' in t:
            t = t.replace('%ip', f"IP : {server_ip} Port : {server_port}")
        if '%p' in t:
            t = t.replace('%p', f"{current_ping} ms")

        return (t.replace('%t', now.strftime("%H:%M:%S"))
                   .replace('%d', now.strftime("%Y-%m-%d"))
                   .replace('%s', s or byTaha.v2+'ByTaha')
                   .replace('%m', me)
                   .replace('%f', persian_date))
    
    @classmethod
    def bw(c,**k):
        r = random.random()
        g = random.random()
        b = random.random()
        return bw(
            **k,
            textcolor=(1,1,1),
            enable_sound=False,
            button_type='square',
            color=(r*0.7+0.3, g*0.7+0.3, b*0.7+0.3)
        )
    
    @classmethod
    def cw(c,source,ps=0,**k):
        o = source.get_screen_space_center() if source else None
        r = cw(
            **k,
            scale=c.UIS()+ps,
            transition='in_scale',
            color=(0.18,0.18,0.18),
            parent=gsw('overlay_stack'),
            scale_origin_stack_offset=o
        )
        cw(r,on_outside_click_call=Call(c.swish,t=r))
        return r
    
    swish = lambda c=0,t=0: (gs('swish').play(),cw(t,transition='out_scale') if t else t)
    err = lambda t: (gs('block').play(),push(t,color=(1,1,0)))
    ok = lambda: (gs('dingSmallHigh').play(),push('Ø¨Ø§Ø´Ù‡!',color=(0,1,0)))
    bye = lambda: (gs('laser').play(),push('Ø®Ø¯Ø§Ø­Ø§ÙØ¸!',color=(0,1,0)))
    
    def __init__(s, source: bw = None) -> None:
        w = s.w = s.cw(
            source=source,
            size=(600,600),
        )
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ø¨Ù‡ Ù¾Ù†Ø¬Ø±Ù‡ Ø§ØµÙ„ÛŒ
        s.add_close_button(w, position=(600, 520))
        
        [tw(
            scale=1.0,
            parent=w,
            text='Auto message',
            h_align='center',
            position=(450,470-i*3),
            color=[(1,1,1),(0.6,0.6,0.6)][i]
        ) for i in [1,0]]
        
        # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­ÛŒ Ø¯Ø± Ø³Ù…Øª Ú†Ù¾
        tw(
    parent=w,
    text="ðŸ¤– Responsive Bot\n\n" "With this mod you can:\n" "â€¢ Set up auto-reply\n" "â€¢ Have a quick chat\n" "â€¢ Play games with your friends\n" "â€¢ And much more!",
    position=(400, 410),
    scale=0.75,
    color=(0.8, 0.8, 1),
    maxwidth=150,
    h_align='left'
)

        # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¢Ù…Ø§Ø± Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª (Ø¨Ø§ Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ)
        s.stats_text = tw(
            parent=w,
            text=f"ðŸ“Š Statistics:\n" f"â€¢ {len(var('l') or {})} Trigger active\n" f"â€¢ {len(load_quick_messages())} Quick message\n" f"â€¢ State: {'active' if var('state') else 'inactive'}\n" f"â€¢ Ping: {current_ping} ms\n" f"â€¢ Server: {server_ip}:{server_port}",
            position=(400, 270),
            scale=0.65,
            color=(0.8, 1, 0.8),
            maxwidth=160,
            h_align='left'
        )

        # ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ù‡Ø± 1 Ø«Ø§Ù†ÛŒÙ‡
        teck(1.0, s.update_stats)

        # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…ØªÙ† Ø±Ø§Ù‡Ù†Ù…Ø§
        tw(
    parent=w,
    text="ðŸ’¡ Note:\n" "For more information, see the\n" "Help section",
    position=(400, 140),
    scale=0.75,
    color=(1, 1, 0.5),
    maxwidth=150,
    h_align='left'
)
        
        # Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø³Ú©Ø±ÙˆÙ„ ÙˆÛŒØ¬Øª Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        s.scroll_widget = sw(
            parent=w,
            size=(300, 400),
            position=(30, 100)
        )
        
        # Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        s.buttons_container = cw(
            parent=s.scroll_widget,
            size=(300, 600),
            background=False
        )
        
        mem = globals()
        buttons = [
             ('Add', 'Add', 'upButton', 550),
             ('Delete', 'Nuke', 'ouyaAButton', 485),
             ('Settings', 'Tune', 'settingsIcon', 420),             ('List', 'List', 'logIcon', 355),     
             ('Help', 'Help', 'logo', 290)
]
        
        for label, cls_name, icon, y_pos in buttons:
            b = s.bw(
                label=label,
                parent=s.buttons_container,
                size=(260,60),
                position=(20,y_pos),
                icon=gt(icon)
            )
            bw(b,on_activate_call=Call(mem[cls_name],b))
        
        # ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÙˆÙ„
        cw(s.buttons_container, size=(300, 650))
        
        s.b = bw(
            parent=w,
            size=(70,45),
            position=(550,450),
            enable_sound=False,
            button_type='square',
            on_activate_call=s.but
        )
        s.but(1)
        s.swish()
    
    def update_stats(s):
        """Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ø´Ø§Ù…Ù„ Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ"""
        if hasattr(s, 'stats_text') and s.stats_text.exists():
            # Ú¯Ø±ÙØªÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØªØµØ§Ù„ ÙØ¹Ù„ÛŒ
            conn_info = get_connection_info()
            server_status = f"{server_ip}:{server_port}" if server_ip != "127.0.0.1" else "local"
            
            tw(s.stats_text, 
               text=f"ðŸ“Š Statistics:\n" f"â€¢ {len(var('l') or {})} Trigger active\n" f"â€¢ {len(load_quick_messages())} Quick message\n" f"â€¢ Status: {'active' if var('state') else 'inactive'}\n" f"â€¢ Ping: {current_ping} ms\n" f"â€¢ Server: {server_status}")
        teck(1.0, s.update_stats)
    
    def but(s,dry=0):
        v = var('state')
        if not dry:
            v = not v
            var('state',v)
            gs('deek').play()
        bw(
            s.b,
            label=['OFF', 'ON'][v],
            color=[(0.35,0,0),(0,0.45,0)][v],
            textcolor=[(0.5,0,0),(0,0.6,0)][v]
        )

# ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú†Øª Ø³Ø±ÛŒØ¹
def load_quick_messages():
    """Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú†Øª Ø³Ø±ÛŒØ¹ Ø§Ø² ÙØ§ÛŒÙ„"""
    try:
        config_dir = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'Configs')
        if not os.path.exists(config_dir):
            os.makedirs(config_dir)
        
        msg_path = os.path.join(config_dir, 'quick_chat_msgs.json')
        
        if not os.path.exists(msg_path):
            save_quick_messages(DEFAULT_QUICK_MESSAGES.copy())
            return DEFAULT_QUICK_MESSAGES.copy()
        
        with open(msg_path, 'r', encoding='utf-8') as f:
            return json.load(f)
    except Exception as e:
        print(f"Error loading quick messages: {e}")
        return DEFAULT_QUICK_MESSAGES.copy()

def save_quick_messages(messages):
    """Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú†Øª Ø³Ø±ÛŒØ¹ Ø¯Ø± ÙØ§ÛŒÙ„"""
    try:
        config_dir = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'Configs')
        if not os.path.exists(config_dir):
            os.makedirs(config_dir)
        
        msg_path = os.path.join(config_dir, 'quick_chat_msgs.json')
        
        with open(msg_path, 'w', encoding='utf-8') as f:
            json.dump(messages, f, ensure_ascii=False, indent=2)
    except Exception as e:
        print(f"Error saving quick messages: {e}")

# Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ
pr = 'ar3_'
def var(s,v=None):
    c = APP.config
    s = pr+s
    if v is None: return c.get(s,v)
    c[s] = v
    c.commit()
def reset_conf(): cfg = APP.config; [(cfg.pop(c) if c.startswith(pr) else None) for c in cfg.copy()]; cfg.commit()

# Ù¾ÛŒØ´â€ŒÙØ±Ø¶
for i in range(4): j = f'tune{i}'; v = var(j); var(j,i<3) if v is None else v
None if var('state') else var('state',1)
None if var('time') else var('time','0.5')
None if var('l') else var('l',{})
None if var('lc') else var('lc',{})

# Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆÚ†Ú©
SW = lambda s: strw(s,suppress_warning=True)
def sn(s):
    out = ''
    w = 0.0
    for c in s:
        ch_w = SW(c)
        if w + ch_w > 520:
            out += '\n'
            w = 0.0
        out += c
        w += ch_w
    return out

# Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ
def setup_connection_overrides():
    global original_connect, original_disconnect
    from bascenev1 import connect_to_party, disconnect_from_host
    
    if original_connect is None:
        original_connect = connect_to_party
        original_disconnect = disconnect_from_host
        
        # Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹
        import bascenev1
        bascenev1.connect_to_party = new_connect_to_party
        bascenev1.disconnect_from_host = new_disconnect_from_host
        print("Connection functions overridden")

# Ø´Ø±ÙˆØ¹ thread Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ
ping_thread = RealPingThread()
ping_thread.start()

"""Ù…Ù†ÙˆÛŒ Ø§Ø³ØªÛŒÚ©Ø± Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ø¯ÛŒØ±ÛŒØª - ÙÙ‚Ø· Ø§ÛŒÙ…ÙˆØ¬ÛŒ"""
class StickerMenu:
    def __init__(s, source):
        w = s.w = AR.cw(
            source=source,
            size=(300, 400),
            ps=AR.UIS()*0.7
        )
        # Add close button
        AR.add_close_button(w, position=(280, 325))
        
        # Title
        tw(
            parent=w,
            text=u'\ue010 Sticker Menu',
            scale=1.0,
            position=(120, 320),
            h_align='center',
            color=(1, 1, 0)
        )
        
        # Load stickers from config
        s.stickers = load_stickers()
        
        # Create scroll widget
        s.scroll_widget = sw(
            parent=w,
            size=(260, 200),
            position=(20, 110)
        )
        
        # Create container for stickers
        s.container = cw(
            parent=s.scroll_widget,
            size=(260, len(s.stickers) * 55),
            background=False
        )
        
        # Management buttons
        buttons = [
            ('âž• Add', s.add_sticker, (20, 80)),
            (u'\ue009 Remove', s.remove_sticker, (120, 80)),
            ('ðŸ”„ Reset', s.reset_stickers, (220, 80))
        ]
        
        for label, callback, pos in buttons:
            AR.bw(
                parent=w,
                label=label,
                size=(90, 30),
                position=pos,
                on_activate_call=callback,
                scale=0.8
            )
            
        bw(
            parent=w,
            size=(30, 30),
            position=(140, 50),
            label='',
            texture=gt('inventoryIcon'),
            color=(1, 1, 1)
        )
        
        bw(
            parent=w,
            size=(30, 30),
            position=(20, 50),
            label='',
            texture=gt('tv'),
            color=(1, 1, 1)
        )        
       
        bw(
            parent=w,
            size=(30, 30),
            position=(260, 50),
            label='',
            texture=gt('tv'),
            color=(1, 1, 1)
        )        
        s.refresh_stickers()
        AR.swish()
    
    def refresh_stickers(s):
        """Refresh sticker list"""
        # Clear previous stickers
        for child in s.container.get_children():
            child.delete()
        
        # Show stickers in scrollable list
        y_pos = len(s.stickers) * 50 - 25
        for sticker in s.stickers:
            btn = bw(
                parent=s.container,
                label=sticker,
                size=(240, 45),
                position=(10, y_pos),
                on_activate_call=Call(s.send_sticker, sticker),
                color=(0.3, 0.5, 0.7),
                textcolor=(1, 1, 1),
                text_scale=0.8  # Sticker text smaller
            )
            y_pos -= 50
        
        # Adjust container size
        cw(s.container, size=(260, len(s.stickers) * 55))
    
    def send_sticker(s, sticker):
        """Send sticker"""
        try:
            CM(sticker)
            push(f'Sent: {sticker}', color=(0, 1, 0))
            gs('dingSmall').play()
            AR.swish(s.w)
        except Exception as e:
            AR.err(f'Error sending: {str(e)}')
    
    def add_sticker(s):
        """Add new sticker - emoji only"""
        def save_new_sticker():
            new_sticker = tw(query=txt_widget).strip()
            
            if not new_sticker:
                AR.err('Please enter an emoji!')
                gs('error').play()
                return
            
            # Validate emoji only
            if not is_valid_emoji(new_sticker):
                AR.err('Only emoji allowed! Text is not valid.')
                gs('error').play()
                return
            
            # Check length (emoji usually 1-4 chars)
            if len(new_sticker) > 4:
                AR.err('Invalid emoji! Please enter only one emoji.')
                gs('error').play()
                return
            
            stickers = load_stickers()
            
            # Check duplicate
            if new_sticker in stickers:
                AR.err('This emoji already exists!')
                gs('error').play()
                return
            
            # Check max stickers
            if len(stickers) >= 20:
                AR.err('You can only have up to 20 stickers!')
                gs('error').play()
                return
                
            # Add new sticker
            stickers.append(new_sticker)
            save_stickers(stickers)
            s.stickers = stickers
            s.refresh_stickers()
            push(f'Emoji added: {new_sticker}', color=(0, 1, 0))
            gs('dingSmallHigh').play()
            AR.swish(win)
        
        win = AR.cw(
            source=s.w,
            size=(350, 200),
            ps=AR.UIS()*0.6
        )
        
        AR.add_close_button(win, position=(320, 170))
        
        tw(
            parent=win,
            text='New Emoji:',
            position=(20, 160),
            scale=0.9,
            color=(1, 1, 1)
        )
        
        txt_widget = tw(
            parent=win,
            position=(20, 120),
            size=(310, 40),
            editable=True,
            text='',
            color=(0.9, 0.9, 0.9),
            max_chars=3,  # Emoji limit
            h_align='center'
        )
        
        # Extra help
        tw(
            parent=win,
            text='âš ï¸ Only emojis are allowed (no text)',
            position=(20, 80),
            scale=0.6,
            color=(1, 0.5, 0.5)
        )
        
        tw(
            parent=win,
            text='ðŸ“± Use your device emoji keyboard',
            position=(20, 60),
            scale=0.6,
            color=(0.8, 0.8, 1)
        )
        
        AR.bw(
            parent=win,
            label='Confirm',
            size=(100, 35),
            position=(125, 20),
            on_activate_call=save_new_sticker
        )
    
    def remove_sticker(s):
        """Remove sticker"""
        if not s.stickers:
            AR.err('No stickers to remove!')
            return
        
        win = AR.cw(
            source=s.w,
            size=(350, min(450, 250 + len(s.stickers) * 45)),
            ps=AR.UIS()*0.6
        )
        
        AR.add_close_button(win, position=(320, min(420, 220 + len(s.stickers) * 45)))
        
        tw(
            parent=win,
            text='Select emoji to remove:',
            scale=1.0,
            position=(175, min(400, 170 + len(s.stickers) * 45)),
            h_align='center',
            color=(1, 1, 0)
        )
        
        scroll = sw(
            parent=win,
            size=(330, min(300, 150 + len(s.stickers) * 40)),
            position=(10, 50)
        )
        
        container = cw(
            parent=scroll,
            size=(330, len(s.stickers) * 45),
            background=False
        )
        
        y_pos = len(s.stickers) * 44 - 25
        for sticker in s.stickers:
            bw(
                parent=container,
                label=f'ðŸ—‘ï¸ {sticker}',
                size=(310, 40),
                position=(10, y_pos),
                on_activate_call=Call(s.confirm_remove, sticker, win),
                color=(0.8, 0.2, 0.2),
                textcolor=(1, 1, 1),
                text_scale=0.8  # Smaller text
            )
            y_pos -= 45
    
    def confirm_remove(s, sticker, parent_win):
        """Confirm sticker removal"""
        stickers = load_stickers()
        if sticker in stickers:
            stickers.remove(sticker)
            save_stickers(stickers)
            s.stickers = stickers
            s.refresh_stickers()
            push(f'Emoji removed: {sticker}', color=(1, 0.5, 0))
            gs('dingSmallLow').play()
        AR.swish(parent_win)
    
    def reset_stickers(s):
        """Reset to default"""
        save_stickers(DEFAULT_STICKERS.copy())
        s.stickers = DEFAULT_STICKERS.copy()
        s.refresh_stickers()
        push('Stickers reset to default', color=(0, 1, 1))
        gs('dingSmallHigh').play()

# Default stickers
DEFAULT_STICKERS = [
    "ðŸ˜‚", "ðŸ˜", "ðŸ—¿", "ðŸŒš", "â¤ï¸", "ðŸ’£", "ðŸ¤«", "ðŸ™", "ðŸ˜­"
]

def is_valid_emoji(text):
    """
    Strict check that text is emoji only
    """
    if not text:
        return False
    
    # Remove spaces and blanks
    cleaned_text = text.strip()
    
    # Reasonable length for emoji
    if len(cleaned_text) > 4:
        return False
    
    # Normal characters (letters, numbers, punctuation) not allowed
    regular_chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:',.<>?/~`"
    
    for char in cleaned_text:
        if char in regular_chars:
            return False
        
        # Check Unicode ranges for emojis
        char_code = ord(char)
        
        emoji_ranges = [
            (0x1F600, 0x1F64F),  # Emoticons
            (0x1F300, 0x1F5FF),  # Miscellaneous Symbols and Pictographs
            (0x1F680, 0x1F6FF),  # Transport and Map Symbols
            (0x1F700, 0x1F77F),  # Alchemical Symbols
            (0x1F780, 0x1F7FF),  # Geometric Shapes Extended
            (0x1F800, 0x1F8FF),  # Supplemental Arrows-C
            (0x1F900, 0x1F9FF),  # Supplemental Symbols and Pictographs
            (0x1FA00, 0x1FA6F),  # Chess Symbols
            (0x1FA70, 0x1FAFF),  # Symbols and Pictographs Extended-A
            (0x2600, 0x26FF),    # Miscellaneous Symbols
            (0x2700, 0x27BF),    # Dingbats
            (0xFE00, 0xFE0F),    # Variation Selectors
        ]
        
        is_emoji_char = any(start <= char_code <= end for start, end in emoji_ranges)
        
        if not is_emoji_char:
            return False
    
    return True

def load_stickers():
    """Load stickers from file"""
    try:
        config_dir = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'Configs')
        if not os.path.exists(config_dir):
            os.makedirs(config_dir)
        
        stickers_path = os.path.join(config_dir, 'stickers.json')
        
        if not os.path.exists(stickers_path):
            save_stickers(DEFAULT_STICKERS.copy())
            return DEFAULT_STICKERS.copy()
        
        with open(stickers_path, 'r', encoding='utf-8') as f:
            loaded_stickers = json.load(f)
            
            # Filter invalid stickers
            valid_stickers = [s for s in loaded_stickers if is_valid_emoji(s)]
            
            if len(valid_stickers) != len(loaded_stickers):
                save_stickers(valid_stickers)
            
            return valid_stickers
            
    except Exception as e:
        print(f"Error loading stickers: {e}")
        return DEFAULT_STICKERS.copy()

def save_stickers(stickers):
    """Save stickers to file"""
    try:
        # Filter invalid stickers before saving
        valid_stickers = [s for s in stickers if is_valid_emoji(s)]
        
        config_dir = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'Configs')
        if not os.path.exists(config_dir):
            os.makedirs(config_dir)
        
        stickers_path = os.path.join(config_dir, 'stickers.json')
        
        with open(stickers_path, 'w', encoding='utf-8') as f:
            json.dump(valid_stickers, f, ensure_ascii=False, indent=2)
    except Exception as e:
        print(f"Error saving stickers: {e}")
        
"""Ú†Øª Ù„Ø§Ú¯ Ø¨Ø§ Ù†Ù…Ø§ÛŒØ´ 300 Ù¾ÛŒØ§Ù… Ø¢Ø®Ø±"""
class ChatLog:
    def __init__(s, source):
        try:
            w = s.w = AR.cw(
                source=source,
                size=(400, 300),  # Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù‚Ø¨Ù„ÛŒ
                ps=AR.UIS()*0.8
            )
            
            bw(
                parent=w,
                size=(40, 40),
                position=(180, 45),
                label='',
                texture=gt('storeCharacterXmas'),
                color=(1, 1, 1)
            )
            
            # Ø¹Ù†ÙˆØ§Ù† Ú©ÙˆÚ†Ú©
            tw(
                parent=w,
                text=u'\ue027 Chat (500+)',
                scale=0.9,
                position=(180, 265),
                h_align='center',
                color=(0, 1, 1)
            )
            
            # Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
            AR.add_close_button(w, position=(375, 270))
            
            # ÙÛŒÙ„Ø¯ Ø¬Ø³ØªØ¬Ùˆ
            s.search_input = tw(
                parent=w,
                position=(20, 240),
                size=(250, 25),
                editable=True,
                text='',
                color=(0.9, 0.9, 0.9),
                description='Search...'
            )
            
            # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ú©Ø´Ù†
            buttons = [
                ('ðŸ”', s.apply_search, (280, 240), (0.3, 0.6, 0.8)),
                ('â°', s.toggle_time, (320, 240), (0.5, 0.4, 0.7)),
                ('ðŸ“Š', s.show_stats, (360, 240), (0.8, 0.5, 0.3))
            ]
            
            for label, callback, pos, color in buttons:
                bw(
                    parent=w,
                    label=label,
                    size=(30, 25),
                    position=pos,
                    on_activate_call=callback,
                    color=color,
                    textcolor=(1, 1, 1)
                )
            
            # Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø§ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ 300 Ù¾ÛŒØ§Ù…
            s.scroll = sw(
                parent=w,
                size=(380, 180),
                position=(10, 50)
            )
            
            s.container = cw(
                parent=s.scroll,
                size=(380, 6000),  # Ø§Ø±ØªÙØ§Ø¹ Ø²ÛŒØ§Ø¯ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÙˆÙ„
                background=False
            )
            
            # ÙˆØ¶Ø¹ÛŒØª
            s.status_text = tw(
                parent=w,
                text='',
                position=(200, 25),
                scale=0.6,
                color=(0.8, 0.8, 1),
                h_align='center'
            )
            
            # Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø­Ø§Ù„Øª
            s.all_messages = []
            s.filtered_messages = []
            s.search_text = ""
            s.show_time = False
            s.showing_stats = False
            
            s.refresh_chat_log()
            AR.swish()
            
        except Exception as e:
            AR.err(f'Ø®Ø·Ø§: {str(e)}')
    
    def refresh_chat_log(s):
        """Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú†Øª"""
        try:
            s.all_messages = GCM()
            # Ú¯Ø±ÙØªÙ† 300 Ù¾ÛŒØ§Ù… Ø¢Ø®Ø±
            s.all_messages = s.all_messages[-300:] if len(s.all_messages) > 300 else s.all_messages
            s.filtered_messages = s.all_messages.copy()
            s.display_messages()
            
        except Exception as e:
            AR.err(f'Ø®Ø·Ø§: {str(e)}')
    
    def apply_search(s):
        """Ø§Ø¹Ù…Ø§Ù„ Ø¬Ø³ØªØ¬Ùˆ"""
        s.search_text = tw(query=s.search_input).strip().lower()
        s.showing_stats = False
        
        if s.search_text:
            if s.search_text.startswith('user:'):
                username = s.search_text[5:].strip()
                s.filtered_messages = [
                    msg for msg in s.all_messages 
                    if msg.lower().startswith(username + ':')
                ]
            else:
                s.filtered_messages = [
                    msg for msg in s.all_messages 
                    if s.search_text in msg.lower()
                ]
        else:
            s.filtered_messages = s.all_messages.copy()
        
        s.display_messages()
    
    def toggle_time(s):
        """Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø²Ù…Ø§Ù†"""
        s.show_time = not s.show_time
        s.showing_stats = False
        s.display_messages()
    
    def show_stats(s):
        """Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø±"""
        s.showing_stats = True
        s.display_stats()
    
    def display_messages(s):
        """Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø§ Ø§Ø³Ú©Ø±ÙˆÙ„"""
        try:
            # Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‚Ø¨Ù„ÛŒ
            for child in s.container.get_children():
                child.delete()
            
            if s.showing_stats:
                s.display_stats()
                return
            
            # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø´Ø¯Ù‡ ÛŒØ§ Ù‡Ù…Ù‡
            messages_to_show = s.filtered_messages
            
            # Ø§Ú¯Ø± Ù¾ÛŒØ§Ù…ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
            if not messages_to_show:
                tw(
                    parent=s.container,
                    text='âš ï¸ No chat messages yet',
                    position=(160, 90),
                    scale=0.8,
                    color=(1, 0.5, 0),
                    h_align='center'
                )
                cw(s.container, size=(380, 200))
                return
            
            y_pos = len(messages_to_show) * 18 - 9  # ÙØ§ØµÙ„Ù‡ Ø®ÛŒÙ„ÛŒ Ú©Ù…
            for i, message in enumerate(messages_to_show):
                # Ù†Ù…Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ø§Ú¯Ø± ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                display_text = message
                if s.show_time:
                    timestamp = time.strftime("%H:%M", time.localtime(time.time() - (len(messages_to_show) - i) * 2))
                    display_text = f"[{timestamp}] {message}"
                
                # Ú©ÙˆØªØ§Ù‡ Ú©Ø±Ø¯Ù† Ù…ØªÙ† Ø¨ÛŒØ´ØªØ±
                if len(display_text) > 45:
                    display_text = display_text[:42] + "..."
                
                # Ø¯Ú©Ù…Ù‡ Ú©Ù¾ÛŒ Ú©ÙˆÚ†Ú©ØªØ±
                bw(
                    parent=s.container,
                    label='ðŸ“‹',
                    size=(22, 16),
                    position=(345, y_pos),
                    on_activate_call=Call(s.copy_message, message),
                    color=(0.3, 0.6, 0.3),
                    text_scale=0.5
                )
                
                # Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø¨Ø§ ÙÙˆÙ†Øª Ø±ÛŒØ²
                tw(
                    parent=s.container,
                    text=display_text,
                    position=(10, y_pos),
                    scale=0.35,  # ÙÙˆÙ†Øª Ø®ÛŒÙ„ÛŒ Ø±ÛŒØ²
                    color=(1, 1, 1),
                    maxwidth=325,  # Ø¹Ø±Ø¶ Ø¨ÛŒØ´ØªØ±
                    h_align='left'
                )
                
                y_pos -= 18  # ÙØ§ØµÙ„Ù‡ Ø®ÛŒÙ„ÛŒ Ú©Ù…
            
            # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª
            status_text = f''
            if s.search_text:
                status_text += f''
            if s.show_time:
                status_text += ''
            
            tw(s.status_text, text=status_text)
            cw(s.container, size=(380, len(messages_to_show) * 18 + 10))
            
        except Exception as e:
            AR.err(f'Ø®Ø·Ø§: {str(e)}')
    
    def display_stats(s):
        """Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø± ÙØ´Ø±Ø¯Ù‡"""
        try:
            for child in s.container.get_children():
                child.delete()
            
            # ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            user_stats = {}
            for message in s.all_messages:
                if ':' in message:
                    username = message.split(':', 1)[0].strip()
                    user_stats[username] = user_stats.get(username, 0) + 1
            
            # Ø§Ú¯Ø± Ù¾ÛŒØ§Ù…ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
            if not s.all_messages:
                tw(
                    parent=s.container,
                    text='âš ï¸ No chat messages yet',
                    position=(160, 90),
                    scale=0.8,
                    color=(1, 0.5, 0),
                    h_align='center'
                )
                cw(s.container, size=(380, 200))
                return
            
            # Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø± ÙØ´Ø±Ø¯Ù‡
            stats = [
                f"ðŸ“Š {len(s.all_messages)}",
                f"ðŸ‘¥ {len(user_stats)}",
                f"ðŸ“ˆ {len(s.all_messages) // max(len(user_stats), 1)}"
            ]
            
            y_pos = 150
            for stat in stats:
                tw(
                    parent=s.container,
                    text=stat,
                    position=(165, y_pos),
                    scale=0.7,
                    color=(1, 1, 1),
                    h_align='center'
                )
                y_pos -= 25
            
            # Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±ØªØ±
            if user_stats:
                top_user = max(user_stats.items(), key=lambda x: x[1])
                tw(
                    parent=s.container,
                    text=f"ðŸ† {top_user[0][:10]}:{top_user[1]}",
                    position=(165, y_pos),
                    scale=0.5,
                    color=(1, 1, 0),
                    h_align='center'
                )
            
            cw(s.container, size=(380, 200))
            
        except Exception as e:
            AR.err(f'Ø®Ø·Ø§: {str(e)}')
    
    def copy_message(s, message):
        """Ú©Ù¾ÛŒ Ù¾ÛŒØ§Ù…"""
        try:
            if CIS():
                from babase import clipboard_set_text
                clipboard_set_text(message)
                push('âœ…', color=(0, 1, 0))
        except Exception as e:
            AR.err(f'âŒ {str(e)}')
     
class FontMaker:
    def __init__(s, source):
        # Window with smaller height
        w = s.w = AR.cw(
            source=source,
            size=(500, 350),
            ps=AR.UIS() * 0.6
        )
        AR.add_close_button(w, position=(470, 300))

        # Title
        tw(parent=w, text=u"\ue000 Font Maker", position=(170, 300), scale=1.0, color=(1,1,0))
        
        bw(parent=w, size=(40, 40), position=(100, 200), label='', texture=gt('storeIcon'), color=(1, 1, 1))
        
        bw(parent=w, size=(40, 40), position=(350, 200), label='', texture=gt('storeIcon'), color=(1, 1, 1))

        # Input textbox
        tw(parent=w, text="Text:", position=(20, 265), scale=0.8, color=(1,1,1))
        s.input_widget = tw(parent=w, position=(80, 255), size=(390, 40),
                            editable=True, text="Enter your text", 
                            color=(0.9,0.9,0.9), description="")

        # Generate fonts button
        AR.bw(parent=w, label="Generate Fonts", size=(120, 30),
              position=(190, 200), on_activate_call=s.show_fonts)

        # Scroll for font list
        s.scroll = sw(parent=w, size=(460, 150), position=(20, 50))
        s.container = cw(parent=s.scroll, size=(440, 1000), background=False)

        # Status widget
        s.status_text = tw(parent=w, text="Ready", 
                          position=(230, 25), scale=0.6, color=(0.8,0.8,1))

        # Initial message
        tw(
            parent=s.container,
            text="âš ï¸ No fonts generated yet",
            position=(220, 70),
            scale=0.7,
            color=(1, 0.5, 0),
            h_align='center'
        )

        AR.swish()

    def show_fonts(s):
        text = tw(query=s.input_widget).strip()
        if not text or text == "Enter your text":
            AR.err("Please enter some text!")
            return

        fonts = generate_fonts(text)

        # Clear previous
        for child in s.container.get_children():
            child.delete()

        # Display fonts in scrollable list
        y_pos = len(fonts) * 40 - 20
        total_height = 0
        
        for name, styled in fonts.items():
            # Font name - smaller text
            tw(parent=s.container, text=f"{name}:  ", position=(10, y_pos),
               color=(1,1,1), scale=0.6, maxwidth=90)
            
            # Styled text - smaller
            tw(parent=s.container, text=styled, position=(100, y_pos),
               color=(0,1,0), scale=0.65, maxwidth=250)
            
            # Copy button
            AR.bw(parent=s.container, label="Copy", size=(50, 20),
                  position=(360, y_pos - 3),
                  on_activate_call=Call(s.copy_font, styled, name),
                  text_scale=0.5)
            
            y_pos -= 40
            total_height += 40

        # Adjust container size for proper scrolling
        cw(s.container, size=(440, max(300, total_height)))
        
        # Update status
        tw(s.status_text, text=f"{len(fonts)} fonts generated")

    def copy_font(s, text, font_name):
        try:
            from babase import clipboard_set_text
            clipboard_set_text(text)
            push(f'Font {font_name} copied', color=(0,1,0))
            gs('dingSmall').play()
        except:
            AR.err("Clipboard not supported!")
            
"""Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† - Ø¹Ø±Ø¶ Ø¨Ø²Ø±Ú¯ØªØ±ØŒ Ø§Ø±ØªÙØ§Ø¹ Ú©Ù…ØªØ±"""
"""Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† - Ø¨Ø§ Ø°Ø®ÛŒØ±Ù‡ HTML Ø´Ø§Ù…Ù„ Ú†Øªâ€ŒÙ‡Ø§"""
class PlayerInfo:
    def __init__(s, source):
        # ÙˆÛŒÙ†Ø¯ÙˆØ² Ø¨Ø§ Ø§Ø±ØªÙØ§Ø¹ Ú©Ù…ØªØ±
        w = s.w = AR.cw(
            source=source,
            size=(650, 380),  # Ø§Ø±ØªÙØ§Ø¹ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡
            ps=AR.UIS()*0.7
        )
        # Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(620, 300))

        # Ø¹Ù†ÙˆØ§Ù†
        tw(
            parent=w,
            text=u'\ue025 Player Manager',
            scale=1.0,
            position=(325, 310),
            h_align='center',
            color=(0, 1, 1)
        )
        
        bw(
            parent=w,
            size=(70, 70),
            position=(450, 235),
            label='',
            texture=gt('cursor'),
            color=(1, 1, 1)
        )

        # Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†
        s.players = s.get_players()
        s.filtered_players = s.players.copy()
        s.search_text = ''
        s.current_tab = 'all'

        # Ø¨Ø®Ø´ Ø¬Ø³ØªØ¬Ùˆ
        tw(parent=w, text='ðŸ” Search:', position=(10, 280), scale=0.7, color=(1,1,1))
        s.search_input = tw(parent=w, position=(110, 280), size=(200, 25), 
                           editable=True, text='', color=(0.9,0.9,0.9),
                           description="Search players...",
                           on_return_press_call=s.apply_search)

        bw(parent=w, label='Search', size=(60, 25), position=(320, 280), 
           on_activate_call=s.apply_search, color=(0.3,0.6,0.8))

        # ØªØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª
        tabs = [
            ('ðŸŒ All Players', 'all', (20, 250)),
            ('â­ Friends', 'friends', (150, 250)),
            ('ðŸš« Blocked', 'blocked', (280, 250))
        ]

        for label, tab_type, pos in tabs:
            color = (0.4,0.7,0.4) if tab_type == 'all' else (0.4,0.5,0.7)
            bw(parent=w, label=label, size=(120, 25), position=pos,
               on_activate_call=Call(s.set_tab, tab_type), color=color,
               textcolor=(1,1,1), text_scale=0.6)

        # Ø¢Ù…Ø§Ø±
        s.stats_widget = tw(parent=w, text='', position=(500, 320), scale=0.5, 
                           color=(0.8,1,0.8), maxwidth=140, h_align='center')
        s.update_stats()

        # Ø§Ø³Ú©Ø±ÙˆÙ„
        s.scroll = sw(
            parent=w,
            size=(610, 150),  # Ø§Ø±ØªÙØ§Ø¹ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡
            position=(20, 90)
        )

        s.container = cw(
            parent=s.scroll,
            size=(610, len(s.filtered_players) * 35),
            background=False
        )

        # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª
        management_buttons = [
            ('ðŸ“‹ Export', s.show_export_menu, (20, 55), (100, 30)),
            ('ðŸ”„ Refresh', s.refresh_players, (140, 55), (100, 30)),
            ('ðŸ’¬ Save Chat', s.save_chat_html, (260, 55), (120, 30)),
            ('ðŸš« Kick All', s.kick_all, (400, 55), (100, 30)),
            ('âš™ï¸ Settings', s.show_settings, (520, 55), (100, 30))
        ]

        for label, callback, pos, size in management_buttons:
            color = (0.3,0.6,0.8)
            if 'Kick' in label: color = (0.8,0.3,0.3)
            if 'Save' in label: color = (0.4,0.7,0.4)
            if 'Settings' in label: color = (0.6,0.4,0.8)
            
            bw(parent=w, label=label, size=size, position=pos,
               on_activate_call=callback, color=color,
               textcolor=(1,1,1), text_scale=0.6)

        s.display_players()
        AR.swish()

    def get_players(s):
        players = []
        try:
            roster = bs.get_game_roster()
            for player in roster:
                if 'players' in player and player['players']:
                    for p in player['players']:
                        device_name = player.get('display_string', 'Unknown Device')
                        players.append({
                            'name': p.get('name', 'Unknown Player'),
                            'client_id': player.get('client_id', -1),
                            'device': device_name
                        })
        except Exception as e:
            print(f"Error getting players: {e}")
        return players

    def get_friends_list(s):
        return var('player_friends') or []

    def get_blocked_list(s):
        return var('player_blocked') or []

    def get_chat_messages(s):
        """Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø®Ø±ÛŒÙ† Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±"""
        try:
            chat_messages = GCM()
            return chat_messages[-50:] if len(chat_messages) > 50 else chat_messages
        except:
            return []

    def set_tab(s, tab_type):
        s.current_tab = tab_type
        s.filter_players()
        s.display_players()
        s.update_stats()

    def apply_search(s):
        s.search_text = tw(query=s.search_input).strip().lower()
        s.filter_players()
        s.display_players()
        s.update_stats()

    def filter_players(s):
        if s.current_tab == 'friends':
            friends = s.get_friends_list()
            s.filtered_players = [p for p in s.players if p['name'] in friends]
        elif s.current_tab == 'blocked':
            blocked = s.get_blocked_list()
            s.filtered_players = [p for p in s.players if p['name'] in blocked]
        else:
            s.filtered_players = s.players.copy()
        
        if s.search_text:
            s.filtered_players = [
                p for p in s.filtered_players 
                if s.search_text in p['name'].lower() or 
                   s.search_text in p['device'].lower()
            ]

    def update_stats(s):
        friends_count = len(s.get_friends_list())
        blocked_count = len(s.get_blocked_list())
        
        if not s.filtered_players:
            stats_text = f'\n0 Players\n               {friends_count} Friends\n               {blocked_count} Blocked'
        else:
            stats_text = f'\n{len(s.filtered_players)} Players\n               {friends_count} Friends\n               {blocked_count} Blocked'
        
        tw(s.stats_widget, text=stats_text)

    def display_players(s):
        for child in s.container.get_children():
            child.delete()

        if not s.filtered_players:
            message = 'No players found'
            if s.current_tab == 'friends':
                message = 'No friends found'
            elif s.current_tab == 'blocked':
                message = 'No blocked players'
            
            tw(parent=s.container, text=message, position=(305, 75), 
               scale=0.8, color=(1,0.5,0), h_align='center')
            cw(s.container, size=(610, 150))
            return

        headers = [
            ('Player Name', 20, 0.6, (1,1,1)),
            ('ID', 180, 0.6, (0.8,0.8,1)),
            ('Device', 240, 0.6, (0.6,1,0.6)),
            ('Status', 380, 0.6, (1,1,0.8)),
            ('Actions', 500, 0.6, (1,1,1))
        ]

        y_pos = len(s.filtered_players) * 29 + 15
        for text, x, scale, color in headers:
            tw(parent=s.container, text=text, position=(x, y_pos), 
               scale=scale, color=color, h_align='center')

        y_pos = len(s.filtered_players) * 30 - 10
        for i, player in enumerate(s.filtered_players):
            bg_color = (0.2,0.2,0.3) if i % 2 == 0 else (0.25,0.25,0.35)
            
            friends = s.get_friends_list()
            blocked = s.get_blocked_list()
            
            if player['name'] in friends:
                bg_color = (0.2,0.4,0.2)
            elif player['name'] in blocked:
                bg_color = (0.4,0.2,0.2)
            
            bw(parent=s.container, label='', size=(590, 25), 
               position=(10, y_pos), color=bg_color, enable_sound=False)

            player_name = player['name']
            displayed_name = player_name[:15] + '...' if len(player_name) > 15 else player_name
            
            if player['name'] in friends:
                displayed_name = f"â­ {displayed_name}"
            elif player['name'] in blocked:
                displayed_name = f"ðŸš« {displayed_name}"
            
            name_color = (1,1,0.8) if s.search_text and s.search_text in player_name.lower() else (1,1,1)
            tw(parent=s.container, text=displayed_name, position=(15, y_pos - 1), 
               scale=0.5, color=name_color, maxwidth=150, h_align='left')

            tw(parent=s.container, text=f"{player['client_id']}", position=(180, y_pos - 1), 
               scale=0.5, color=(0.8,0.8,1), h_align='center')

            device_text = player['device'][:20] + '...' if len(player['device']) > 20 else player['device']
            tw(parent=s.container, text=device_text, position=(230, y_pos - 1), 
               scale=0.5, color=(0.6,1,0.6), maxwidth=130, h_align='left')

            status_text = ""
            status_color = (1,1,1)
            if player['name'] in friends:
                status_text = "Friend"
                status_color = (0,1,0)
            elif player['name'] in blocked:
                status_text = "Blocked"
                status_color = (1,0,0)
            
            tw(parent=s.container, text=status_text, position=(380, y_pos - 1), 
               scale=0.5, color=status_color, h_align='center')

            actions = []
            friends = s.get_friends_list()
            blocked = s.get_blocked_list()
            
            if player['name'] in friends:
                actions.append(('âŒ', s.remove_friend, (440, y_pos + 3), player))
            else:
                actions.append(('â­', s.add_friend, (440, y_pos + 3), player))
            
            if player['name'] in blocked:
                actions.append(('âœ…', s.unblock_player, (480, y_pos + 3), player))
            else:
                actions.append(('ðŸš«', s.block_player, (480, y_pos + 3), player))
            
            actions.extend([
                ('ðŸ“‹', s.copy_player_info, (520, y_pos + 3), player),
                ('@', s.mention_player, (560, y_pos + 3), player)
            ])
            
            for label, callback, pos, data in actions:
                color = (0.3,0.5,0.8)
                if 'ðŸš«' in label: color = (0.8,0.3,0.3)
                if 'âŒ' in label: color = (0.8,0.3,0.3)
                if 'â­' in label: color = (1,0.8,0.2)
                if 'âœ…' in label: color = (0.2,0.8,0.2)
                if '@' in label: color = (0.4,0.7,0.4)
                
                bw(parent=s.container, label=label, size=(20, 20), position=pos, 
                   on_activate_call=Call(callback, data), color=color, text_scale=0.5)

            y_pos -= 30

        cw(s.container, size=(610, len(s.filtered_players) * 30 + 30))

    def refresh_players(s):
        s.players = s.get_players()
        s.filter_players()
        s.display_players()
        s.update_stats()
        push('Player list refreshed', color=(0,1,0))
        gs('dingSmall').play()

    def show_export_menu(s):
        if not s.players:
            AR.err('No players to export!')
            return
            
        win = AR.cw(source=s.w, size=(350, 250))
        tw(parent=win, text='ðŸ“¤ Export Format', position=(175, 220), h_align='center')
        
        formats = [
            ('ðŸ“ Text', s.export_text),
            ('ðŸ“Š CSV', s.export_csv),
            ('ðŸ“‹ JSON', s.export_json),
            ('ðŸ“„ HTML', s.export_html),
            ('ðŸ“± All Formats', s.export_all_formats)
        ]
        
        y_pos = 180
        for label, callback in formats:
            bw(parent=win, label=label, size=(140, 25), position=(105, y_pos),
               on_activate_call=callback, color=(0.3,0.6,0.8))
            y_pos -= 35
        
        AR.add_close_button(win, position=(320, 220))

    def save_chat_html(s):
        """Ø°Ø®ÛŒØ±Ù‡ HTML Ø¨Ø§ Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±"""
        try:
            server_name = "Unknown_Server"
            try:
                conn_info = get_connection_info()
                if conn_info and hasattr(conn_info, 'name'):
                    server_name = conn_info.name
                elif server_ip != "127.0.0.1":
                    server_name = f"Server_{server_ip}_{server_port}"
            except:
                server_name = "Local_Server"
            
            import os
            script_dir = os.path.dirname(os.path.abspath(__file__))
            self_taha_dir = os.path.join(script_dir, "SelfTaha")
            
            if not os.path.exists(self_taha_dir):
                os.makedirs(self_taha_dir)
            
            import re
            safe_server_name = re.sub(r'[<>:"/\\|?*]', '_', server_name)
            safe_server_name = safe_server_name.replace(' ', '_')
            filename = f"{safe_server_name}_{time.strftime('%Y%m%d_%H%M%S')}.html"
            filepath = os.path.join(self_taha_dir, filename)
            
            html_content = s.generate_html_with_chat()
            
            with open(filepath, 'w', encoding='utf-8') as f:
                f.write(html_content)
            
            push(f"ðŸ“ HTML saved: {filename}", color=(0,1,0))
            gs('dingSmallHigh').play()
            
        except Exception as e:
            print(f"Error saving HTML: {e}")
            AR.err("Error saving HTML file")

    def generate_html_with_chat(s):
        """ØªÙˆÙ„ÛŒØ¯ HTML Ø¨Ø§ Ú†Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±"""
        server_name = "Unknown Server"
        try:
            conn_info = get_connection_info()
            if conn_info and hasattr(conn_info, 'name'):
                server_name = conn_info.name
            elif server_ip != "127.0.0.1":
                server_name = f"Server {server_ip}:{server_port}"
        except:
            server_name = "Local Server"
        
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        chat_messages = s.get_chat_messages()
        
        html_content = f"""<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Report - {server_name}</title>
    <style>
        * {{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }}
        body {{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }}
        .container {{
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }}
        .header {{
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }}
        .header h1 {{
            font-size: 2.2em;
            margin-bottom: 10px;
        }}
        .server-info {{
            font-size: 1.1em;
            opacity: 0.9;
        }}
        .info {{
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
        }}
        .info-grid {{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }}
        .info-item {{
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }}
        .info-item h3 {{
            color: #6c757d;
            margin-bottom: 5px;
            font-size: 0.9em;
        }}
        .info-item p {{
            font-size: 1.3em;
            font-weight: bold;
            color: #495057;
        }}
        .section {{
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
        }}
        .section:last-child {{
            border-bottom: none;
        }}
        .section h2 {{
            color: #495057;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4facfe;
        }}
        .players-table {{
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            margin-bottom: 20px;
        }}
        .players-table th {{
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: left;
        }}
        .players-table td {{
            padding: 10px 12px;
            border-bottom: 1px solid #dee2e6;
        }}
        .players-table tr:nth-child(even) {{
            background: #f8f9fa;
        }}
        .chat-container {{
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }}
        .chat-message {{
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 4px solid #4facfe;
        }}
        .chat-message.system {{
            border-left-color: #28a745;
            background: #f0fff4;
        }}
        .chat-message.join {{
            border-left-color: #17a2b8;
            background: #e3f2fd;
        }}
        .chat-message.leave {{
            border-left-color: #dc3545;
            background: #fff5f5;
        }}
        .message-time {{
            font-size: 0.8em;
            color: #6c757d;
            margin-bottom: 5px;
        }}
        .message-content {{
            font-size: 0.95em;
            line-height: 1.4;
        }}
        .status-friend {{
            color: #28a745;
            font-weight: bold;
        }}
        .status-blocked {{
            color: #dc3545;
            font-weight: bold;
        }}
        .footer {{
            background: #343a40;
            color: white;
            text-align: center;
            padding: 15px;
            font-size: 0.9em;
        }}
        @media (max-width: 768px) {{
            .container {{
                margin: 10px;
            }}
            .header h1 {{
                font-size: 1.8em;
            }}
        }}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ® Complete Server Report</h1>
            <p class="server-info">Server: {server_name} | {time.strftime('%Y-%m-%d %H:%M:%S')}</p>
        </div>
        
        <div class="info">
            <h2>ðŸ“Š Session Overview</h2>
            <div class="info-grid">
                <div class="info-item">
                    <h3>Total Players</h3>
                    <p>{len(s.players)}</p>
                </div>
                <div class="info-item">
                    <h3>Friends</h3>
                    <p>{len(friends)}</p>
                </div>
                <div class="info-item">
                    <h3>Blocked</h3>
                    <p>{len(blocked)}</p>
                </div>
                <div class="info-item">
                    <h3>Chat Messages</h3>
                    <p>{len(chat_messages)}</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ðŸ‘¥ Player List</h2>
            <table class="players-table">
                <thead>
                    <tr>
                        <th>Player Name</th>
                        <th>ID</th>
                        <th>Device</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
"""
        
        for player in s.players:
            status_class = ""
            status_text = "Normal"
            
            if player['name'] in friends:
                status_class = "status-friend"
                status_text = "Friend â­"
            elif player['name'] in blocked:
                status_class = "status-blocked"
                status_text = "Blocked ðŸš«"
            
            html_content += f'                    <tr>\n'
            html_content += f'                        <td>{player["name"]}</td>\n'
            html_content += f'                        <td>{player["client_id"]}</td>\n'
            html_content += f'                        <td>{player["device"]}</td>\n'
            html_content += f'                        <td class="{status_class}">{status_text}</td>\n'
            html_content += f'                    </tr>\n'
        
        html_content += """                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>ðŸ’¬ Chat History (Last 50 Messages)</h2>
            <div class="chat-container">
"""
        
        if chat_messages:
            for message in chat_messages:
                message_class = "normal"
                if any(x in message.lower() for x in ['joined', 'connected', 'ÙˆØ§Ø±Ø¯ Ø´Ø¯']):
                    message_class = "join"
                elif any(x in message.lower() for x in ['left', 'disconnected', 'ØªØ±Ú© Ú©Ø±Ø¯']):
                    message_class = "leave"
                elif any(x in message.lower() for x in ['system', 'Ø³ÛŒØ³ØªÙ…']):
                    message_class = "system"
                
                html_content += f'                <div class="chat-message {message_class}">\n'
                html_content += f'                    <div class="message-time">{time.strftime("%H:%M:%S")}</div>\n'
                html_content += f'                    <div class="message-content">{message}</div>\n'
                html_content += f'                </div>\n'
        else:
            html_content += '                <div class="chat-message">\n'
            html_content += '                    <div class="message-content">No chat messages available</div>\n'
            html_content += '                </div>\n'
        
        html_content += """            </div>
        </div>
        
        <div class="footer">
            <p>Generated by SelfTaha Player Manager â€¢ {time.strftime('%Y')}</p>
        </div>
    </div>
</body>
</html>"""
        
        return html_content

    def export_html(s):
        html_content = s.generate_html_with_chat()
        s.copy_to_clipboard(html_content, "HTML")

    def export_text(s):
        export_text = "=== Player List Export ===\n\n"
        export_text += f"Generated: {time.strftime('%Y-%m-%d %H:%M:%S')}\n"
        export_text += f"Total Players: {len(s.players)}\n"
        export_text += f"Friends: {len(s.get_friends_list())}\n"
        export_text += f"Blocked: {len(s.get_blocked_list())}\n\n"
        
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        
        for i, player in enumerate(s.players, 1):
            status = "Normal"
            if player['name'] in friends:
                status = "Friend â­"
            elif player['name'] in blocked:
                status = "Blocked ðŸš«"
            
            export_text += f"{i}. {player['name']}\n"
            export_text += f"   ID: {player['client_id']}\n"
            export_text += f"   Device: {player['device']}\n"
            export_text += f"   Status: {status}\n"
            export_text += "-" * 40 + "\n"
        
        s.copy_to_clipboard(export_text, "Text")

    def export_csv(s):
        csv_text = "Name,ID,Device,Status\n"
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        
        for player in s.players:
            status = "Normal"
            if player['name'] in friends:
                status = "Friend"
            elif player['name'] in blocked:
                status = "Blocked"
            
            csv_text += f'"{player["name"]}",{player["client_id"]},'
            csv_text += f'"{player["device"]}","{status}"\n'
        
        s.copy_to_clipboard(csv_text, "CSV")

    def export_json(s):
        import json
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        
        players_data = []
        for player in s.players:
            status = "normal"
            if player['name'] in friends:
                status = "friend"
            elif player['name'] in blocked:
                status = "blocked"
            
            players_data.append({
                'name': player['name'],
                'id': player['client_id'],
                'device': player['device'],
                'status': status
            })
        
        json_text = json.dumps(players_data, indent=2, ensure_ascii=False)
        s.copy_to_clipboard(json_text, "JSON")

    def export_all_formats(s):
        s.export_text()
        teck(0.5, s.export_csv)
        teck(1.0, s.export_json)
        teck(1.5, s.export_html)
        push("All formats exported!", color=(0,1,1))

    def copy_to_clipboard(s, text, format_name):
        if CIS():
            from babase import clipboard_set_text
            clipboard_set_text(text)
            push(f"ðŸ“‹ {format_name} data copied!", color=(0,1,0))
            gs('dingSmallHigh').play()
        else:
            AR.err('Clipboard not supported!')

    def add_friend(s, player):
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        
        if player['name'] in friends:
            push(f"{player['name']} is already a friend", color=(1,0.8,0.2))
            return
            
        if player['name'] in blocked:
            push(f"Cannot add blocked player {player['name']} to friends", color=(1,0.5,0))
            return
            
        friends.append(player['name'])
        var('player_friends', friends)
        push(f"â­ {player['name']} added to friends!", color=(0,1,0))
        gs('dingSmallHigh').play()
        s.refresh_players()

    def remove_friend(s, player):
        friends = s.get_friends_list()
        if player['name'] in friends:
            friends.remove(player['name'])
            var('player_friends', friends)
            push(f"âŒ {player['name']} removed from friends", color=(1,0.5,0))
            gs('dingSmallLow').play()
            s.refresh_players()

    def block_player(s, player):
        blocked = s.get_blocked_list()
        friends = s.get_friends_list()
        
        if player['name'] in blocked:
            push(f"{player['name']} is already blocked", color=(1,0.5,0))
            return
            
        if player['name'] in friends:
            friends.remove(player['name'])
            var('player_friends', friends)
        
        blocked.append(player['name'])
        var('player_blocked', blocked)
        push(f"ðŸš« {player['name']} blocked!", color=(1,0,0))
        gs('dingSmallLow').play()
        s.refresh_players()

    def unblock_player(s, player):
        blocked = s.get_blocked_list()
        if player['name'] in blocked:
            blocked.remove(player['name'])
            var('player_blocked', blocked)
            push(f"âœ… {player['name']} unblocked!", color=(0,1,0))
            gs('dingSmallHigh').play()
            s.refresh_players()

    def show_settings(s):
        win = AR.cw(source=s.w, size=(300, 200))
        tw(parent=win, text='âš™ï¸ List Management', position=(125, 170), h_align='center')
        
        settings = [
            ('ðŸ—‘ï¸ Clear Friends', s.clear_friends),
            ('ðŸ—‘ï¸ Clear Blocked', s.clear_blocked),
            ('ðŸ“ Export Lists', s.export_lists)
        ]
        
        y_pos = 130
        for label, callback in settings:
            bw(parent=win, label=label, size=(140, 25), position=(80, y_pos),
               on_activate_call=callback, color=(0.3,0.6,0.8))
            y_pos -= 35
        
        AR.add_close_button(win, position=(270, 170))

    def clear_friends(s):
        var('player_friends', [])
        push("Friends list cleared!", color=(1,0.5,0))
        s.refresh_players()

    def clear_blocked(s):
        var('player_blocked', [])
        push("Blocked list cleared!", color=(1,0.5,0))
        s.refresh_players()

    def export_lists(s):
        friends = s.get_friends_list()
        blocked = s.get_blocked_list()
        
        export_text = "=== Player Lists Export ===\n\n"
        export_text += f"Generated: {time.strftime('%Y-%m-%d %H:%M:%S')}\n\n"
        
        export_text += "â­ Friends List:\n"
        if friends:
            for i, friend in enumerate(friends, 1):
                export_text += f"{i}. {friend}\n"
        else:
            export_text += "No friends\n"
        
        export_text += "\nðŸš« Blocked List:\n"
        if blocked:
            for i, blocked_player in enumerate(blocked, 1):
                export_text += f"{i}. {blocked_player}\n"
        else:
            export_text += "No blocked players\n"
        
        s.copy_to_clipboard(export_text, "Lists")

    def mention_all(s):
        if not s.players:
            AR.err('No players to mention!')
            return
            
        try:
            for player in s.players:
                message = f"@{player['name']}"
                CM(message)
                time.sleep(0.3)
            push("All players mentioned!", color=(0,1,1))
            gs('dingSmall').play()
        except Exception:
            AR.err("Error sending mentions")

    def copy_player_info(s, player):
        info = (f"Player Name: {player['name']}\n"
                f"ID: {player['client_id']}\n"
                f"Device: {player['device']}")
        
        if CIS():
            from babase import clipboard_set_text
            clipboard_set_text(info)
            push(f"Info of {player['name']} copied", color=(0,1,0))
            gs('dingSmall').play()
        else:
            AR.err('Clipboard not supported!')

    def mention_player(s, player):
        try:
            message = f"@{player['name']}"
            CM(message)
            push(f"{player['name']} mentioned", color=(0,1,1))
            gs('dingSmall').play()
        except Exception:
            AR.err(f"Error sending mention")

    def kick_player(s, player):
        try:
            from bascenev1 import disconnect_client
            disconnect_client(player['client_id'])
            push(f"{player['name']} kicked", color=(1,0.5,0))
            gs('dingSmallLow').play()
            teck(1.0, s.refresh_players)
        except Exception:
            AR.err(f"Error kicking player")

    def kick_all(s):
        if not s.players:
            AR.err('No players to kick!')
            return
            
        try:
            from bascenev1 import disconnect_client
            kicked_count = 0
            
            for player in s.players:
                try:
                    disconnect_client(player['client_id'])
                    kicked_count += 1
                except:
                    continue
            
            if kicked_count > 0:
                push(f"{kicked_count} players kicked", color=(1,0.5,0))
                gs('dingSmallLow').play()
                teck(1.0, s.refresh_players)
            else:
                AR.err('No players to kick!')
                
        except Exception:
            AR.err(f"Error during kick")
            
            
"""ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ UI"""
class UIColorChanger:
    def __init__(s, source):
        # ÙÙ‚Ø· Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ù¾Ù†Ø¬Ø±Ù‡ ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†
        launch_colorscheme_selection_window()

class ColorScheme:
    """
    Apply a colorscheme to the game.
    """

    def __init__(self, color=None, highlight=None):
        self.color = color
        self.highlight = highlight

    def _custom_buttonwidget(self, *args, **kwargs):
        if self.highlight is not None:
            kwargs["color"] = self.highlight
        return original_buttonwidget(*args, **kwargs)

    def _custom_containerwidget(self, *args, **kwargs):
        if self.color is not None:
            kwargs["color"] = self.color
        return original_containerwidget(*args, **kwargs)

    def _custom_checkboxwidget(self, *args, **kwargs):
        if self.highlight is not None:
            kwargs["color"] = self.highlight
        return original_checkboxwidget(*args, **kwargs)

    def _apply_color(self):
        if self.color is not None:
            bui.containerwidget = self._custom_containerwidget

    def _apply_highlight(self):
        if self.highlight is not None:
            bui.buttonwidget = self._custom_buttonwidget
            bui.checkboxwidget = self._custom_checkboxwidget

    def apply(self):
        if self.color:
            self._apply_color()
        if self.highlight:
            self._apply_highlight()

    @staticmethod
    def _disable_color():
        bui.buttonwidget = original_buttonwidget
        bui.checkboxwidget = original_checkboxwidget

    @staticmethod
    def _disable_highlight():
        bui.containerwidget = original_containerwidget

    @classmethod
    def disable(cls):
        cls._disable_color()
        cls._disable_highlight()

class ColorSchemeWindow(bui.Window):
    def __init__(self, default_colors=((0.41, 0.39, 0.5), (0.5, 0.7, 0.25))):
        self._default_colors = default_colors
        self._color, self._highlight = babase.app.config.get("ColorScheme", (None, None))

        self._last_color = self._color
        self._last_highlight = self._highlight

        ColorScheme.disable()

        # Allow pro features for color picking
        global original_have_pro
        original_have_pro = bui.app.classic.accounts.have_pro
        bui.app.classic.accounts.have_pro = lambda: True

        self.draw_ui()

    def draw_ui(self):
        uiscale = bui.app.ui_v1.uiscale
        self._width = width = 480.0 if uiscale is babase.UIScale.SMALL else 380.0
        self._x_inset = x_inset = 40.0 if uiscale is babase.UIScale.SMALL else 0.0
        self._height = height = (
            275.0
            if uiscale is babase.UIScale.SMALL
            else 288.0
            if uiscale is babase.UIScale.MEDIUM
            else 300.0
        )
        spacing = 40
        self._base_scale = (
            2.05
            if uiscale is babase.UIScale.SMALL
            else 1.5
            if uiscale is babase.UIScale.MEDIUM
            else 1.0
        )
        top_extra = 15

        super().__init__(
            root_widget=bui.containerwidget(
                size=(width, height + top_extra),
                on_outside_click_call=self.cancel_on_outside_click,
                transition="in_right",
                scale=self._base_scale,
                stack_offset=(0, 15) if uiscale is babase.UIScale.SMALL else (0, 0),
            )
        )

        cancel_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(52 + x_inset, height - 60),
            size=(155, 60),
            scale=0.8,
            autoselect=True,
            label=babase.Lstr(resource="cancelText"),
            on_activate_call=self._cancel,
        )
        bui.containerwidget(edit=self._root_widget, cancel_button=cancel_button)

        save_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(width - (177 + x_inset), height - 110),
            size=(155, 60),
            autoselect=True,
            scale=0.8,
            label=babase.Lstr(resource="saveText"),
        )
        bui.widget(edit=save_button, left_widget=cancel_button)
        bui.buttonwidget(edit=save_button, on_activate_call=self.save)
        bui.widget(edit=cancel_button, right_widget=save_button)
        bui.containerwidget(edit=self._root_widget, start_button=save_button)

        reset_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(width - (177 + x_inset), height - 60),
            size=(155, 60),
            color=(0.2, 0.5, 0.6),
            autoselect=True,
            scale=0.8,
            label=babase.Lstr(resource="settingsWindowAdvanced.resetText"),
        )
        bui.widget(edit=reset_button, left_widget=reset_button)
        bui.buttonwidget(edit=reset_button, on_activate_call=self.reset)
        bui.widget(edit=cancel_button, right_widget=reset_button)
        bui.containerwidget(edit=self._root_widget, start_button=reset_button)

        v = height - 65.0
        v -= spacing * 3.0
        b_size = 80
        b_offs = 75

        self._color_button = bui.buttonwidget(
            parent=self._root_widget,
            autoselect=True,
            position=(self._width * 0.5 - b_offs - b_size * 0.5, v - 50),
            size=(b_size, b_size),
            color=self._last_color or self._default_colors[0],
            label="",
            button_type="square",
        )
        bui.buttonwidget(
            edit=self._color_button, on_activate_call=babase.Call(self._pick_color, "color")
        )
        bui.textwidget(
            parent=self._root_widget,
            h_align="center",
            v_align="center",
            position=(self._width * 0.5 - b_offs, v - 65),
            size=(0, 0),
            draw_controller=self._color_button,
            text=babase.Lstr(resource="editProfileWindow.colorText"),
            scale=0.7,
            color=bui.app.ui_v1.title_color,
            maxwidth=120,
        )

        self._highlight_button = bui.buttonwidget(
            parent=self._root_widget,
            autoselect=True,
            position=(self._width * 0.5 + b_offs - b_size * 0.5, v - 50),
            size=(b_size, b_size),
            color=self._last_highlight or self._default_colors[1],
            label="",
            button_type="square",
        )

        bui.buttonwidget(
            edit=self._highlight_button,
            on_activate_call=babase.Call(self._pick_color, "highlight"),
        )
        bui.textwidget(
            parent=self._root_widget,
            h_align="center",
            v_align="center",
            position=(self._width * 0.5 + b_offs, v - 65),
            size=(0, 0),
            draw_controller=self._highlight_button,
            text=babase.Lstr(resource="editProfileWindow.highlightText"),
            scale=0.7,
            color=bui.app.ui_v1.title_color,
            maxwidth=120,
        )

    def _pick_color(self, tag):
        if tag == "color":
            initial_color = self._color or self._default_colors[0]
        elif tag == "highlight":
            initial_color = self._highlight or self._default_colors[1]
        else:
            raise ValueError("Unexpected color picker tag: {}".format(tag))
        ColorPicker(
            parent=self._root_widget,
            position=(0, 0),
            initial_color=initial_color,
            delegate=self,
            tag=tag,
        )

    def cancel_on_outside_click(self):
        bui.getsound("swish").play()
        self._cancel()

    def _cancel(self):
        if self._last_color and self._last_highlight:
            colorscheme = ColorScheme(self._last_color, self._last_highlight)
            colorscheme.apply()
        # Restore original pro check
        bui.app.classic.accounts.have_pro = original_have_pro
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def reset(self, transition_out=True):
        if transition_out:
            bui.getsound("gunCocking").play()
        babase.app.config["ColorScheme"] = (None, None)
        # Restore original pro check
        bui.app.classic.accounts.have_pro = original_have_pro
        babase.app.config.commit()
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def save(self, transition_out=True):
        if transition_out:
            bui.getsound("gunCocking").play()
        colorscheme = ColorScheme(
            self._color or self._default_colors[0],
            self._highlight or self._default_colors[1],
        )
        colorscheme.apply()
        # Restore original pro check
        bui.app.classic.accounts.have_pro = original_have_pro
        babase.app.config["ColorScheme"] = (
            self._color or self._default_colors[0],
            self._highlight or self._default_colors[1],
        )
        babase.app.config.commit()
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def _set_color(self, color):
        self._color = color
        if self._color_button:
            bui.buttonwidget(edit=self._color_button, color=color)

    def _set_highlight(self, color):
        self._highlight = color
        if self._highlight_button:
            bui.buttonwidget(edit=self._highlight_button, color=color)

    def color_picker_selected_color(self, picker, color):
        if not self._root_widget:
            return
        tag = picker.get_tag()
        if tag == "color":
            self._set_color(color)
        elif tag == "highlight":
            self._set_highlight(color)

    def color_picker_closing(self, picker):
        pass

def launch_colorscheme_selection_window():
    ColorSchemeWindow()

def load_colorscheme():
    color, highlight = babase.app.config.get("ColorScheme", (None, None))
    if color and highlight:
        colorscheme = ColorScheme(color, highlight)
        colorscheme.apply()

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù¾Ù„Ø§Ú¯ÛŒÙ† Ø±Ù†Ú¯â€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
load_colorscheme()

class ColorSchemeWindow(bui.Window):
    def __init__(self, default_colors=((0.41, 0.39, 0.5), (0.5, 0.7, 0.25))):
        self._default_colors = default_colors
        self._color, self._highlight = babase.app.config.get("ColorScheme", (None, None))

        self._last_color = self._color
        self._last_highlight = self._highlight

        # Let's set the game's default colorscheme before opening the Window.
        # Otherwise the colors in the Window are tinted as per the already
        # applied custom colorscheme thereby making it impossible to visually
        # differentiate between different colors.
        ColorScheme.disable()

        # A hack to let players select any RGB color value through the UI,
        # otherwise this is limited only to pro accounts.
        bui.app.classic.accounts.have_pro = lambda: True

        self.draw_ui()

    def draw_ui(self):
        # NOTE: Most of the stuff here for drawing the UI is referred from the
        # legacy (1.6 < version <= 1.7.19) game's bastd/ui/profile/edit.py, and
        # so there could be some cruft here due to my oversight.
        uiscale = bui.app.ui_v1.uiscale
        self._width = width = 480.0 if uiscale is babase.UIScale.SMALL else 380.0
        self._x_inset = x_inset = 40.0 if uiscale is babase.UIScale.SMALL else 0.0
        self._height = height = (
            275.0
            if uiscale is babase.UIScale.SMALL
            else 288.0
            if uiscale is babase.UIScale.MEDIUM
            else 300.0
        )
        spacing = 40
        self._base_scale = (
            2.05
            if uiscale is babase.UIScale.SMALL
            else 1.5
            if uiscale is babase.UIScale.MEDIUM
            else 1.0
        )
        top_extra = 15

        super().__init__(
            root_widget=bui.containerwidget(
                size=(width, height + top_extra),
                on_outside_click_call=self.cancel_on_outside_click,
                transition="in_right",
                scale=self._base_scale,
                stack_offset=(0, 15) if uiscale is babase.UIScale.SMALL else (0, 0),
            )
        )

        cancel_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(52 + x_inset, height - 60),
            size=(155, 60),
            scale=0.8,
            autoselect=True,
            label=babase.Lstr(resource="cancelText"),
            on_activate_call=self._cancel,
        )
        bui.containerwidget(edit=self._root_widget, cancel_button=cancel_button)

        save_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(width - (177 + x_inset), height - 110),
            size=(155, 60),
            autoselect=True,
            scale=0.8,
            label=babase.Lstr(resource="saveText"),
        )
        bui.widget(edit=save_button, left_widget=cancel_button)
        bui.buttonwidget(edit=save_button, on_activate_call=self.save)
        bui.widget(edit=cancel_button, right_widget=save_button)
        bui.containerwidget(edit=self._root_widget, start_button=save_button)

        reset_button = bui.buttonwidget(
            parent=self._root_widget,
            position=(width - (177 + x_inset), height - 60),
            size=(155, 60),
            color=(0.2, 0.5, 0.6),
            autoselect=True,
            scale=0.8,
            label=babase.Lstr(resource="settingsWindowAdvanced.resetText"),
        )
        bui.widget(edit=reset_button, left_widget=reset_button)
        bui.buttonwidget(edit=reset_button, on_activate_call=self.reset)
        bui.widget(edit=cancel_button, right_widget=reset_button)
        bui.containerwidget(edit=self._root_widget, start_button=reset_button)

        v = height - 65.0
        v -= spacing * 3.0
        b_size = 80
        b_offs = 75

        self._color_button = bui.buttonwidget(
            parent=self._root_widget,
            autoselect=True,
            position=(self._width * 0.5 - b_offs - b_size * 0.5, v - 50),
            size=(b_size, b_size),
            color=self._last_color or self._default_colors[0],
            label="",
            button_type="square",
        )
        bui.buttonwidget(
            edit=self._color_button, on_activate_call=babase.Call(self._pick_color, "color")
        )
        bui.textwidget(
            parent=self._root_widget,
            h_align="center",
            v_align="center",
            position=(self._width * 0.5 - b_offs, v - 65),
            size=(0, 0),
            draw_controller=self._color_button,
            text=babase.Lstr(resource="editProfileWindow.colorText"),
            scale=0.7,
            color=bui.app.ui_v1.title_color,
            maxwidth=120,
        )

        self._highlight_button = bui.buttonwidget(
            parent=self._root_widget,
            autoselect=True,
            position=(self._width * 0.5 + b_offs - b_size * 0.5, v - 50),
            size=(b_size, b_size),
            color=self._last_highlight or self._default_colors[1],
            label="",
            button_type="square",
        )

        bui.buttonwidget(
            edit=self._highlight_button,
            on_activate_call=babase.Call(self._pick_color, "highlight"),
        )
        bui.textwidget(
            parent=self._root_widget,
            h_align="center",
            v_align="center",
            position=(self._width * 0.5 + b_offs, v - 65),
            size=(0, 0),
            draw_controller=self._highlight_button,
            text=babase.Lstr(resource="editProfileWindow.highlightText"),
            scale=0.7,
            color=bui.app.ui_v1.title_color,
            maxwidth=120,
        )

    def _pick_color(self, tag):
        if tag == "color":
            initial_color = self._color or self._default_colors[0]
        elif tag == "highlight":
            initial_color = self._highlight or self._default_colors[1]
        else:
            raise ValueError("Unexpected color picker tag: {}".format(tag))
        ColorPicker(
            parent=None,
            position=(0, 0),
            initial_color=initial_color,
            delegate=self,
            tag=tag,
        )

    def cancel_on_outside_click(self):
        bui.getsound("swish").play()
        self._cancel()

    def _cancel(self):
        if self._last_color and self._last_highlight:
            colorscheme = ColorScheme(self._last_color, self._last_highlight)
            colorscheme.apply()
        # Good idea to revert this back now so we do not break anything else.
        bui.app.classic.accounts.have_pro = original_have_pro
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def reset(self, transition_out=True):
        if transition_out:
            bui.getsound("gunCocking").play()
        babase.app.config["ColorScheme"] = (None, None)
        # Good idea to revert this back now so we do not break anything else.
        bui.app.classic.accounts.have_pro = original_have_pro
        babase.app.config.commit()
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def save(self, transition_out=True):
        if transition_out:
            bui.getsound("gunCocking").play()
        colorscheme = ColorScheme(
            self._color or self._default_colors[0],
            self._highlight or self._default_colors[1],
        )
        colorscheme.apply()
        # Good idea to revert this back now so we do not break anything else.
        bui.app.classic.accounts.have_pro = original_have_pro
        babase.app.config["ColorScheme"] = (
            self._color or self._default_colors[0],
            self._highlight or self._default_colors[1],
        )
        babase.app.config.commit()
        bui.containerwidget(edit=self._root_widget, transition="out_right")

    def _set_color(self, color):
        self._color = color
        if self._color_button:
            bui.buttonwidget(edit=self._color_button, color=color)

    def _set_highlight(self, color):
        self._highlight = color
        if self._highlight_button:
            bui.buttonwidget(edit=self._highlight_button, color=color)

    def color_picker_selected_color(self, picker, color):
        # The `ColorPicker` calls this method in the delegate once a color
        # is selected from the `ColorPicker` Window.
        if not self._root_widget:
            return
        tag = picker.get_tag()
        if tag == "color":
            self._set_color(color)
        elif tag == "highlight":
            self._set_highlight(color)
        else:
            raise ValueError("Unexpected color picker tag: {}".format(tag))

    def color_picker_closing(self, picker):
        # The `ColorPicker` expects this method to exist in the delegate,
        # so here it is!
        pass


class CustomTransactions:
    def __init__(self):
        self.custom_transactions = {}

    def _handle(self, transaction, *args, **kwargs):
        transaction_code = transaction.get("code")
        transaction_fn = self.custom_transactions.get(transaction_code)
        if transaction_fn is not None:
            return transaction_fn(transaction, *args, **kwargs)
        return original_add_transaction(transaction, *args, **kwargs)

    def add(self, transaction_code, transaction_fn):
        self.custom_transactions[transaction_code] = transaction_fn

    def enable(self):
        bui.app.plus.add_v1_account_transaction = self._handle


def launch_colorscheme_selection_window():
    # Store whether the player has a pro account or not
    # temporarily bypassing the restriction that only pro
    # accounts can set custom RGB colors, then restore later.
    #
    # We store it here instead of at startup because other
    # pro-unlocker plugins might override the game method early,
    # causing a race condition and potentially storing the wrong value.
    global original_have_pro
    original_have_pro = bui.app.classic.accounts.have_pro

    ColorSchemeWindow()


def colorscheme_transaction(transaction, *args, **kwargs):
    launch_colorscheme_selection_window()


def load_colorscheme():
    color, highlight = babase.app.config.get("ColorScheme", (None, None))
    if color and highlight:
        colorscheme = ColorScheme(color, highlight)
        colorscheme.apply()


def load_plugin():
    # Allow manual colorscheme changes through the in-game console.
    _babase.ColorScheme = ColorScheme
    # Add a new advanced code entry named "colorscheme" via
    # Settings -> Advanced -> Enter Code, enabling UI-based colorscheme changes.
    custom_transactions = CustomTransactions()
    custom_transactions.add("colorscheme", colorscheme_transaction)
    custom_transactions.enable()
    # Load any previously saved colorscheme.
    load_colorscheme()


# Load colors plugin on startup
load_plugin()

# Flags for sending icons
_stop_sending_icons = False
_icon_timers = []  # List of all active timers
_icons_menu_opened = False  # Check if menu is open or not


def show_icons_menu(source_widget=None):
    """Show icons menu - tall and narrow window with stop control"""
    global _icons_menu_opened
    if _icons_menu_opened:
        return  # Don't recreate if menu is already open
    _icons_menu_opened = True

    try:
        icons = [
            ('î', 'î Icon 1'),
            ('î‚', 'î‚ Icon 2'),
            ('îƒ', 'îƒ Icon 3'),
            ('î„', 'î„ Icon 4'),
            ('î…', 'î… Icon 5'),
            ('î†', 'î† Icon 6'),
            ('î‡', 'î‡ Icon 7'),
            ('îˆ', 'îˆ Icon 8'),
            ('î‰', 'î‰ Icon 9'),
            ('îŠ', 'îŠ Icon 10'),
            ('î‹', 'î‹ Icon 11'),
            ('îŒ', 'îŒ Icon 12'),
            ('î', 'î Icon 13'),
            ('îŽ', 'îŽ Icon 14'),
            ('î', 'î Icon 15'),
            ('î', 'î Icon 16'),
            ('î‘', 'î‘ Icon 17'),
            ('î’', 'î’ Icon 18'),
            ('î“', 'î“ Icon 19'),
            ('î”', 'î” Icon 20'),
            ('î•', 'î• Icon 21'),
            ('î–', 'î– Icon 22'),
            ('î—', 'î— Icon 23'),
            ('î˜', 'î˜ Icon 24'),
            ('î™', 'î™ Icon 25'),
            ('îš', 'îš Icon 26'),
            ('î›', 'î› Icon 27'),
            ('îœ', 'îœ Icon 28'),
            ('î', 'î Icon 29'),
            ('îž', 'îž Icon 30'),
            ('îŸ', 'îŸ Icon 31'),
            ('î ', 'î  Icon 32'),
            ('î¡', 'î¡ Icon 33'),
            ('î¢', 'î¢ Icon 34'),
            ('î£', 'î£ Icon 35'),
            ('î€—', 'î€— Icon 36')
        ]

        w = bui.containerwidget(
            parent=bui.get_special_widget('overlay_stack'),
            size=(800, 700),
            scale=1.0,
            transition='in_scale',
            color=(0.12, 0.12, 0.12)
        )

        bui.textwidget(
            parent=w,
            text=u'\ue027 Game Icons',
            position=(400, 660),
            scale=1.3,
            color=(1, 1, 0),
            h_align='center'
        )

        scroll = bui.scrollwidget(
            parent=w,
            size=(700, 550),
            position=(60, 90)
        )

        column = bui.columnwidget(parent=scroll, left_border=10)

        for icon, label in icons:
            bui.buttonwidget(
                parent=column,
                size=(650, 50),
                label=label,
                on_activate_call=lambda i=icon: send_icon(i),
                color=(0.35, 0.35, 0.45),
                textcolor=(1, 1, 1)
            )

        # Send all button
        bui.buttonwidget(
            parent=w,
            position=(100, 30),
            icon=gt('logIcon'),
            size=(200, 60),
            iconscale=0.9,
            label='Send All (2 sec)',
            on_activate_call=lambda: send_all_icons_delayed(icons, 2.0),
            color=(0.2, 0.6, 0.2),
            textcolor=(1, 1, 1)
        )

        # Stop sending button
        bui.buttonwidget(
            parent=w,
            position=(525, 30),
            icon=gt('achievementsIcon'),
            size=(180, 60),
            iconscale=0.9,
            label='Stop Sending',
            on_activate_call=stop_sending_icons,
            color=(0.8, 0.3, 0.3),
            textcolor=(1, 1, 1)
        )

        # Close button
        bui.buttonwidget(
            parent=w,
            position=(350, 30),
            icon=gt('crossOut'),
            size=(120, 60),
            iconscale=0.9,
            label='Close',
            on_activate_call=lambda: close_icons_menu(w),
            color=(0.6, 0.2, 0.2),
            textcolor=(1, 1, 1)
        )

    except Exception as e:
        print(f"Error showing icons menu: {e}")


def close_icons_menu(widget):
    """Close the icons menu"""
    global _icons_menu_opened
    _icons_menu_opened = False
    bui.containerwidget(edit=widget, transition='out_scale')


def send_icon(icon: str):
    """Send icon to chat"""
    try:
        bs.chatmessage(icon)
        bui.screenmessage(f'Sent: {icon}', color=(0, 1, 0))
        bui.getsound('dingSmall').play()
    except Exception as e:
        print(f"Error sending icon: {e}")


def send_all_icons_delayed(icons, delay_seconds=2.0):
    """Send all icons with delay"""
    global _stop_sending_icons, _icon_timers
    _stop_sending_icons = False
    _icon_timers = []

    try:
        bui.screenmessage(f'Start sending all icons (every {delay_seconds} sec)...', color=(0, 1, 1))
        for i, (icon, _) in enumerate(icons):
            t = bui.apptimer(i * delay_seconds, lambda ic=icon: send_single_icon_delayed(ic))
            _icon_timers.append(t)
    except Exception as e:
        print(f"Error starting delayed send: {e}")


def send_single_icon_delayed(icon: str):
    """Send single icon with delay"""
    global _stop_sending_icons
    try:
        if _stop_sending_icons:
            return
        bs.chatmessage(icon)
        bui.screenmessage(f'Sent: {icon}', color=(0, 1, 0))
    except Exception as e:
        print(f"Error sending delayed icon: {e}")


def stop_sending_icons():
    """Stop sending all icons completely"""
    global _stop_sending_icons, _icon_timers
    _stop_sending_icons = True
    # Cancel all timers
    for t in _icon_timers:
        try:
            t.cancel()
        except Exception:
            pass
    _icon_timers = []
    bui.screenmessage('â›” Sending of all icons stopped', color=(1, 0, 0))
    
# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³ Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„Ø§Ø³ PlayerInfo
# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³ Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„Ø§Ø³ PlayerInfo
class Calculator:
    def __init__(s, source):
        # Window with reduced height
        w = s.w = AR.cw(
            source=source,
            size=(400, 330),
            ps=AR.UIS()*0.7
        )
        AR.add_close_button(w, position=(370, 290))
        
        # Title
        tw(parent=w, text='ðŸ§® Calculator', scale=1.0, position=(180, 295), h_align='center', color=(0, 1, 1))
        
        # Display
        s.display = tw(parent=w, text='0', position=(175, 260), scale=1.2, h_align='center', color=(1,1,1), maxwidth=350)
        
        # Calculation variables
        s.current_input = '0'
        s.previous_input = ''
        s.operation = None
        s.reset_next_input = False
        s.display_formatted = True
        
        # Action buttons (copy/send)
        action_buttons = [
            ('ðŸ“‹ Copy', s.copy_result, (20, 230), (170, 30), (0.3, 0.6, 0.8)),
            ('ðŸ’¬ Send', s.send_to_chat, (210, 230), (170, 30), (0.3, 0.8, 0.6))
        ]
        for label, callback, pos, size, color in action_buttons:
            bw(parent=w, label=label, size=size, position=pos, on_activate_call=callback, color=color, textcolor=(1,1,1), text_scale=0.7)
        
        # Main calculator buttons
        buttons = [
            # Row 1
            ('C', s.clear_all, (20, 180), (55,30), (1,0.5,0.5)),
            ('Â±', s.toggle_sign, (85,180), (55,30), (0.5,0.7,1)),
            ('%', s.percentage, (150,180), (55,30), (0.5,0.7,1)),
            ('xÂ²', s.square, (215,180), (55,30), (0.5,0.7,1)),
            ('âˆš', s.square_root, (280,180), (55,30), (0.5,0.7,1)),
            ('xÊ¸', s.power, (345,180), (55,30), (0.5,0.7,1)),
            # Row 2
            ('7', lambda: s.append_number('7'), (20,140), (55,30), (0.4,0.4,0.6)),
            ('8', lambda: s.append_number('8'), (85,140), (55,30), (0.4,0.4,0.6)),
            ('9', lambda: s.append_number('9'), (150,140), (55,30), (0.4,0.4,0.6)),
            ('Ã·', lambda: s.set_operation('/'), (215,140), (55,30), (1,0.8,0.3)),
            ('âŒ«', s.backspace, (280,140), (55,30), (0.8,0.3,0.3)),
            (',', s.toggle_format, (345,140), (55,30), (0.7,0.5,0.8)),
            # Row 3
            ('4', lambda: s.append_number('4'), (20,100), (55,30), (0.4,0.4,0.6)),
            ('5', lambda: s.append_number('5'), (85,100), (55,30), (0.4,0.4,0.6)),
            ('6', lambda: s.append_number('6'), (150,100), (55,30), (0.4,0.4,0.6)),
            ('Ã—', lambda: s.set_operation('*'), (215,100), (55,30), (1,0.8,0.3)),
            ('1/x', s.reciprocal, (280,100), (55,30), (0.5,0.7,1)),
            ('Â±', s.toggle_format_display, (345,100), (55,30), (0.7,0.5,0.8)),
            # Row 4
            ('1', lambda: s.append_number('1'), (20,60), (55,30), (0.4,0.4,0.6)),
            ('2', lambda: s.append_number('2'), (85,60), (55,30), (0.4,0.4,0.6)),
            ('3', lambda: s.append_number('3'), (150,60), (55,30), (0.4,0.4,0.6)),
            ('-', lambda: s.set_operation('-'), (215,60), (55,30), (1,0.8,0.3)),
            ('n!', s.factorial, (280,60), (55,30), (0.5,0.7,1)),
            ('log', s.logarithm, (345,60), (55,30), (0.5,0.7,1)),
            # Row 5
            ('0', lambda: s.append_number('0'), (20,20), (120,30), (0.4,0.4,0.6)),
            ('.', s.add_decimal, (150,20), (55,30), (0.4,0.4,0.6)),
            ('=', s.calculate, (215,20), (55,30), (0.2,0.8,0.2)),
            ('+', lambda: s.set_operation('+'), (280,20), (120,30), (1,0.8,0.3)),
        ]
        for label, callback, pos, size, color in buttons:
            bw(parent=w, label=label, size=size, position=pos, on_activate_call=callback, color=color, textcolor=(1,1,1), text_scale=0.8)
        
        AR.swish()
    
    # Number formatting with commas
    def format_number(s, number_str):
        try:
            num = float(number_str)
            if num.is_integer():
                num_int = int(num)
                return f"{num_int:,}" if abs(num_int)>=1000 else str(num_int)
            else:
                parts = str(num).split('.')
                int_part = int(parts[0]) if parts[0] else 0
                formatted_int = f"{int_part:,}"
                decimal_part = parts[1][:6].rstrip('0')
                return formatted_int + '.' + decimal_part if decimal_part else formatted_int
        except:
            return number_str
    
    # Remove commas
    def parse_number(s, formatted_str):
        return formatted_str.replace(',', '')
    
    # Display text with/without commas
    def get_display_text(s):
        return s.format_number(s.current_input) if s.display_formatted else s.current_input
    def get_raw_text(s):
        return s.parse_number(s.current_input) if s.display_formatted else s.current_input
    def update_display(s):
        if s.display.exists():
            tw(s.display, text=s.get_display_text())
    def toggle_format(s):
        s.display_formatted = not s.display_formatted
        s.update_display()
        gs('click01').play()
    def toggle_format_display(s):
        status = "Formatted" if s.display_formatted else "Raw"
        push(f"Display mode: {status}", color=(0,1,1))
        gs('dingSmall').play()
    
    # Input methods
    def append_number(s, number):
        if s.reset_next_input: s.current_input='0'; s.reset_next_input=False
        current = s.get_raw_text()
        s.current_input = number if current=='0' else current+number
        s.update_display(); gs('click01').play()
    def add_decimal(s):
        if s.reset_next_input: s.current_input='0'; s.reset_next_input=False
        current = s.get_raw_text()
        if '.' not in current: s.current_input=current+'.'; s.update_display(); gs('click01').play()
    def backspace(s):
        current = s.get_raw_text()
        if current!='0' and len(current)>1: current=current[:-1]
        else: current='0'
        s.current_input=current; s.update_display(); gs('swish').play()
    
    # Operations
    def square(s): s._unary_op(lambda x:x**2)
    def square_root(s): s._unary_op(lambda x:x**0.5, allow_negative=False)
    def power(s): s._binary_op('**', "Enter second number")
    def reciprocal(s): s._unary_op(lambda x:1/x, zero_error=True)
    def factorial(s): s._unary_op(lambda n:__import__('math').factorial(int(n)), int_only=True)
    def logarithm(s): s._unary_op(lambda x:__import__('math').log10(x), positive_only=True)
    def toggle_sign(s):
        current = s.get_raw_text()
        if current!='0': s.current_input = current[1:] if current.startswith('-') else '-'+current
        s.update_display(); gs('click01').play()
    def percentage(s):
        try: s.current_input=str(float(s.get_raw_text())/100); s.update_display(); gs('dingSmall').play()
        except: s.current_input='0'; s.update_display()
    
    # Binary operation
    def set_operation(s, op):
        if s.operation and not s.reset_next_input: s.calculate()
        s.previous_input = s.get_raw_text(); s.operation=op; s.reset_next_input=True; gs('click01').play()
    def calculate(s):
        try:
            if not s.operation or s.reset_next_input: return
            num1 = float(s.previous_input)
            num2 = float(s.get_raw_text())
            result = {'+':num1+num2, '-':num1-num2, '*':num1*num2, '/':num1/num2 if num2!=0 else float('nan'), '**':num1**num2}[s.operation]
            s.current_input=str(int(result)) if result.is_integer() else str(result)
            s.operation=None; s.reset_next_input=True; s.update_display(); gs('dingSmallHigh').play()
        except ZeroDivisionError: s.current_input='Error: Div/0'; s.update_display(); gs('error').play(); teck(2.0,s.clear_all)
        except Exception as e: s.current_input=f'Error: {e}'; s.update_display(); gs('error').play(); teck(2.0,s.clear_all)
    
    # Clear
    def clear_all(s): s.current_input='0'; s.previous_input=''; s.operation=None; s.reset_next_input=False; s.update_display(); gs('swish').play()
    
    # Copy/Send
    def copy_result(s):
        try:
            if CIS():
                from babase import clipboard_set_text
                clipboard_set_text(s.get_display_text())
                push(f'Copied: {s.get_display_text()}', color=(0,1,0)); gs('dingSmall').play()
            else: AR.err('Clipboard not supported!')
        except Exception as e: AR.err(f'Copy error: {e}')
    def send_to_chat(s):
        try:
            CM(s.get_display_text()); push(f'Sent: {s.get_display_text()}', color=(0,1,0)); gs('dingSmall').play()
        except Exception as e: AR.err(f'Send error: {e}')
    
    # Helper for unary operations
    def _unary_op(s, func, allow_negative=True, zero_error=False, int_only=False, positive_only=False):
        try:
            current = float(s.get_raw_text())
            if not allow_negative and current<0: raise ValueError
            if zero_error and current==0: raise ZeroDivisionError
            if int_only: current=int(current)
            if positive_only and current<=0: raise ValueError
            result = func(current)
            s.current_input=str(int(result)) if int_only or (isinstance(result,float) and result.is_integer()) else str(result)
            s.update_display(); gs('dingSmall').play()
        except: s.current_input='Error'; s.update_display(); gs('error').play(); teck(2.0,s.clear_all)
    def _binary_op(s, op_symbol, prompt_msg): s.operation=op_symbol; s.previous_input=s.get_raw_text(); s.reset_next_input=True; push(prompt_msg,color=(0,1,1)); gs('click01').play()
            
"""Ø¨Ø®Ø´ Ø¨Ù‡Ø§Ø±ÛŒ Ø¨Ø§ Ø§Ø³Ù¾Ù… Ø¬Ù…Ù„Ø§Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ùˆ ÙØ§Ù†ÙˆØ³ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù…Ù„Ø§Øª"""
"""Ø¨Ø®Ø´ Ø¨Ù‡Ø§Ø±ÛŒ Ø¨Ø§ Ø§Ø³Ù¾Ù… Ø¬Ù…Ù„Ø§Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ùˆ ÙØ§Ù†ÙˆØ³ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù…Ù„Ø§Øª"""
"""Ø¨Ø®Ø´ Ø¨Ù‡Ø§Ø±ÛŒ Ø¨Ø§ Ø§Ø³Ù¾Ù… Ø¬Ù…Ù„Ø§Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ùˆ ÙØ§Ù†ÙˆØ³ÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù…Ù„Ø§Øª"""
"""Ø¨Ø®Ø´ Ø¨Ù‡Ø§Ø±ÛŒ Ø¨Ø§ Ø§Ø³Ù¾Ù… Ø¬Ù…Ù„Ø§Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ùˆ Ù†Ø§Ù…ÙˆØ³ÛŒ"""
class Bahari:
    # Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ global Ø¨Ø±Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§Ø³Ù¾Ù…
    spamming = False
    spam_timer = None
    spam_type = None
    active_instance = None
    
    # Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ù…Ù„Ø§Øª
    normal_sentences = [
        "Ø¯ Ø¢Ø®Ù‡ Ú©Ø­ÛŒØ±Ù… ØªÙˆ Ù‚ÛŒØ§ÙØª Ø¨Ú†Ù‡ Ù…Ù† Ø³Ù‡ Ø³Ø§Ù„ Ù¾ÛŒØ´ Ø§ÛŒÙ† Ø§Ø¯Ø¹Ø§ Ø±Ùˆ Ø¯Ø§Ø´ØªÙ…",
        "Ø§Ù†Ù‚Ø¯ Ù‡Ø±Ø´Ø¨ Ø¯Ø§Ø±Ù… Ù…ÛŒÚ©Ø§Ù…Øª Ø­Ø§Ù…Ù„Ù‡ Ø´Ø¯ÛŒ Ø¯ÛŒÚ¯Ù‡",
        "Ù‡Ø±Ú†ÛŒ Ú©Ø­ÛŒØ±Ù‡ Ù…ÛŒÚ©Ù†Ù… ØªÙˆ Ù‚ÛŒØ§ÙØª Ú©Ø­ÛŒØ±ÛŒ ÙÛŒØ³",
        "Ú©Ø­ÛŒØ±ÛŒ Ù‡Ø±Ø´Ø¨ Ø¯Ø§Ø±ÛŒ Ù…ÛŒÙ…Ø§Ù„ÛŒ Ø¨Ù‡Øª Ù†ÙˆÙ† Ø¨Ø¯Ù… Ø¨Ø¹Ø¯ Ø´Ø§Ø®ÛŒØ¯ÛŒ",
        "Ø§ÙØºØ§Ù†ÛŒ Ø¨ÛŒØ§ Ø¨Ø±Ùˆ Ú©Ø­ÛŒØ±Ù… Ø¨Ø®ÙˆØ§Ø¨ Ø¨Ø¹Ø¯ Ú¯ÙˆÙ‡ Ø¨Ø®ÙˆØ±"
    ]
    
    namousi_sentences = [
        "Ù…Ø§Ø¯Ø±ØªÙˆ Ø¯ÛŒØ´Ø¨ Ø§Ù†Ù‚Ø¯ Ú©Ø§ÛŒÛŒØ¯Ù… Ù†Ù‡ Ù…Ø§Ù‡ Ø¯ÛŒÚ¯Ù‡ Ø¨Ø±Ø§Øª Ø¯Ø§Ø¯Ø§Ø´ Ù…ÛŒØ§Ø±Ù‡",
        "ÙÛŒÙ„Ù… Ù…Ø§Ø¯Ø±Øª ØªÙˆ Ù¾ÙˆØ±Ù† Ù‡Ø§Ø¨ Ø¯Ø± Ø­Ø§Ù„ Ø³Ø§Ú© Ø²Ø¯Ù† Ù„Ùˆ Ø±ÙØªÙ‡",
        "Ø®ÙˆØ§Ù‡Ø±Øª Ø³Ø± Ú©ÙˆÚ†Ù‡ Ù†Ø´Ø³ØªÙ‡ Ù‡Ø±Ø´Ø¨ Ø³Ø§Ú© Ù…ÛŒØ²Ù†Ù‡",
        "Ù‡Ø±Ú†ÛŒ Ú©Ø­ÛŒØ± ØªÙˆ Ø¬Ù‡Ø§Ù†Ù‡ ØªÙˆ Ù…ÙˆÙ†Ø« Ø®Ø§Ù†ÙˆØ§Ø¯Øª Ù…ÛŒÚ©Ù†Ù…",
        "Ù…Ø§Ø¯Ø±ØªÙˆ Ø¬ÙˆØ±ÛŒ Ù…ÛŒÚ©Ø§Ù… Ø¬ÙˆØ±ÛŒ Ú©Ù‡ Ú©Ø­ØµØ´ Ù¾Ø§Ø±Ù‡ Ø¨Ø´Ù‡",
        "Ú©Ù„ Ø¯Ø±Ø®ØªØ§ÛŒ Ø¬Ù‡Ø§Ù† Ùˆ Ù…ÛŒÚ©Ù†Ù… ØªÙˆ Ú©Ø­Øµ Ù…Ø§Ø¯Ø±Øª",
        "Ú©Ø­ÛŒØ±Ù… ØªÙˆ Ú©Ø­Øµ Ù…Ø§Ø¯Ø±Øª  Ù…Ø§Ø¯Ø±ØªÙˆ Ø¨Ù‡ Ø³ÛŒØµØ¯ Ø±ÙˆØ´ Ù…ÛŒÚ©Ø§Ù…"
    ]

    def __init__(s, source):
        # Ø«Ø¨Øª Ø®ÙˆØ¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù†Ù…ÙˆÙ†Ù‡ ÙØ¹Ø§Ù„
        Bahari.active_instance = s

        w = s.w = AR.cw(
            source=source,
            size=(500, 350),
            ps=AR.UIS()*0.7
        )
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(470, 300))
        
        # Ø¹Ù†ÙˆØ§Ù†
        tw(
            parent=w,
            text=u'\ue027 Obscenity',
            scale=1.0,
            position=(329, 275),
            h_align='center',
            color=(1, 0.7, 0.9)
        )
        
        bw(
            parent=w,
            size=(70, 70),
            position=(335, 5),
            label='',
            texture=gt('controllerIcon'),
            color=(1, 1, 1)
        )
        
        # Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        s.scroll = sw(
            parent=w,
            size=(200, 250),
            position=(20, 50)
        )
        
        s.container = cw(
            parent=s.scroll,
            size=(200, 250),
            background=False
        )
        
        # Ø¯Ú©Ù…Ù‡ Ù…Ø¹Ù…ÙˆÙ„ÛŒ
        s.normal_btn = bw(
            parent=s.container,
            label='Normal',
            size=(180, 35),
            icon=gt('achievementSuperPunch'),
            position=(10, 200),
            iconscale=0.9,
            on_activate_call=Call(s.confirm_spam, 'normal'),
            color=(0.4, 0.8, 0.5),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ù†Ø§Ù…ÙˆØ³ÛŒ
        s.namousi_btn = bw(
            parent=s.container,
            label='Family', 
            size=(180, 35),
            icon=gt('achievementBoxer'),
            position=(10, 150),
            iconscale=0.9,
            on_activate_call=Call(s.confirm_spam, 'namousi'),
            color=(0.9, 0.6, 0.3),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªÙ¾
        s.stop_btn = bw(
            parent=s.container,
            label='Stop',
            size=(180, 30),
            icon=gt('crossOut'),
            position=(10, 100),
            iconscale=0.9,
            on_activate_call=Call(s.stop_spam),
            color=(0.8, 0.2, 0.2),
            textcolor=(1, 1, 1),
            enable_sound=True
        )
        
        # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù…Ù„Ø§Øª
        s.manage_normal_btn = bw(
            parent=s.container,
            label='Normal management',
            size=(180, 30),
            icon=gt('settingsIcon'),
            position=(10, 60),
            iconscale=0.9,
            on_activate_call=Call(s.manage_sentences, 'normal'),
            color=(0.3, 0.5, 0.8),
            textcolor=(1, 1, 1)
        )
        
        s.manage_namousi_btn = bw(
            parent=s.container,
            label='Family management',
            size=(180, 30),
            icon=gt('settingsIcon'),
            position=(10, 20),
            iconscale=0.9,
            on_activate_call=Call(s.manage_sentences, 'namousi'),
            color=(0.8, 0.5, 0.3),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø®Ø§Ù…ÙˆØ´/Ø±ÙˆØ´Ù†
        s.toggle_btn = bw(
            parent=w,
            label='OFF',
            size=(80, 35),
            position=(330, 70),
            on_activate_call=Call(s.toggle_state),
            color=(0.35, 0, 0),
            textcolor=(0.5, 0, 0)
        )
        
        # ÙˆØ¶Ø¹ÛŒØª
        s.status_text = tw(
            parent=w,
            text='Ready',
            position=(350, 230),
            scale=0.7,
            color=(0.8, 0.8, 1),
            h_align='center'
        )
        
        # Ø¢Ù…Ø§Ø± Ø¬Ù…Ù„Ø§Øª Ø¯Ø± Ø³Ù…Øª Ø±Ø§Ø³Øª
        s.stats_text = tw(
            parent=w,
            text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Inactive',
            position=(350, 200),
            scale=0.55,
            color=(0.7, 1, 0.7),
            maxwidth=150,
            h_align='center'
        )
        
        # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ¶Ø¹ÛŒØª global
        if Bahari.spamming:
            bw(s.stop_btn, color=(1, 0.3, 0.3))
            type_name = 'Normal' if Bahari.spam_type == 'normal' else 'Family'
            tw(s.status_text, text=f'Spam {type_name} active', color=(0, 1, 0))
            bw(s.toggle_btn, label='ON', color=(0, 0.45, 0), textcolor=(0, 0.6, 0))
            tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Active')
        
        AR.swish()
    
    def toggle_state(s):
        """ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª Ø®Ø§Ù…ÙˆØ´/Ø±ÙˆØ´Ù†"""
        if Bahari.spamming:
            s.stop_spam()
            bw(s.toggle_btn, label='OFF', color=(0.35, 0, 0), textcolor=(0.5, 0, 0))
            tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Inactive')
        else:
            if not Bahari.spam_type:
                AR.err('Please select the spam type first!')
                return
            s.start_spam()
            bw(s.toggle_btn, label='ON', color=(0, 0.45, 0), textcolor=(0, 0.6, 0))
            tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Active')
    
    def confirm_spam(s, spam_type):
        """ØªØ£ÛŒÛŒØ¯ Ø´Ø±ÙˆØ¹ Ø§Ø³Ù¾Ù…"""
        Bahari.spam_type = spam_type
        type_name = 'Normal' if spam_type == 'normal' else 'Family'
        
        # Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ù†Ø¬Ø±Ù‡ ØªØ£ÛŒÛŒØ¯
        confirm_win = AR.cw(
            source=s.w,
            size=(300, 140),
            ps=AR.UIS()*0.6
        )
        
        AR.add_close_button(confirm_win, position=(250, 105))
        
        tw(
            parent=confirm_win,
            text=f'Are you sure you want to start\nspam {type_name}?',
            position=(115, 80),
            scale=0.7,
            color=(1, 1, 1),
            h_align='center'
        )
        
        def start_and_close():
            s.start_spam()
            AR.swish(confirm_win)
        
        bw(
            parent=confirm_win,
            label='Yes',
            size=(70, 25),
            icon=gt('startButton'),
            position=(120, 10),
            iconscale=0.6,
            on_activate_call=start_and_close,
            color=(0, 0.6, 0)
        )
    
    def start_spam(s):
        """Ø´Ø±ÙˆØ¹ Ø§Ø³Ù¾Ù…"""
        if Bahari.spamming:
            AR.err('Spam is in progress!')
            return
        
        Bahari.spamming = True
        
        # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯ ÙˆÛŒØ¬Øªâ€ŒÙ‡Ø§
        if s.status_text.exists():
            tw(s.status_text, text='Spamming...', color=(0, 1, 0))
        if s.stop_btn.exists():
            bw(s.stop_btn, color=(1, 0.3, 0.3))
        if s.toggle_btn.exists():
            bw(s.toggle_btn, label='ON', color=(0, 0.45, 0), textcolor=(0, 0.6, 0))
        if s.stats_text.exists():
            tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Active')
        
        # Ù„ÛŒØ³Øª Ø¬Ù…Ù„Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹
        if Bahari.spam_type == 'normal':
            sentences = s.normal_sentences
        else:
            sentences = s.namousi_sentences
        
        s.sentences = sentences
        s.current_index = 0
        s.do_spam()
        
        type_name = 'Normal' if Bahari.spam_type == 'normal' else 'Family'
        push(f'Start spam {type_name}', color=(0, 1, 0))
        gs('dingSmallHigh').play()
    
    def do_spam(s):
        """Ø§Ù†Ø¬Ø§Ù… Ø§Ø³Ù¾Ù…"""
        if not Bahari.spamming:
            return
            
        try:
            # Ø§Ø±Ø³Ø§Ù„ Ø¬Ù…Ù„Ù‡ ÙØ¹Ù„ÛŒ
            sentence = s.sentences[s.current_index]
            CM(sentence)
            
            # Ø§ÙØ²Ø§ÛŒØ´ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ
            s.current_index = (s.current_index + 1) % len(s.sentences)
            
            # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª
            if s.status_text.exists():
                tw(s.status_text, text=f'Send: {sentence[:12]}...')
            
            # ØªÙ†Ø¸ÛŒÙ… ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ
            Bahari.spam_timer = teck(2.0, s.do_spam)
            
        except Exception as e:
            AR.err(f'Error in spam: {str(e)}')
            s.stop_spam()
    
    def stop_spam(s):
        """ØªÙˆÙ‚Ù Ø§Ø³Ù¾Ù…"""
        if not Bahari.spamming:
            return
            
        Bahari.spamming = False
        
        if Bahari.spam_timer:
            try:
                Bahari.spam_timer.cancel()
            except:
                pass
            Bahari.spam_timer = None
        
        # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯ ÙˆÛŒØ¬Øªâ€ŒÙ‡Ø§
        if s.stop_btn.exists():
            bw(s.stop_btn, color=(0.8, 0.2, 0.2))
        if s.status_text.exists():
            tw(s.status_text, text='Stopped', color=(1, 0.5, 0))
        if s.toggle_btn.exists():
            bw(s.toggle_btn, label='OFF', color=(0.35, 0, 0), textcolor=(0.5, 0, 0))
        if s.stats_text.exists():
            tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: Inactive')
        
        type_name = 'Normal' if Bahari.spam_type == 'normal' else 'Family'
        push(f'Spam {type_name} stopped', color=(1, 0.5, 0))
        gs('dingSmallLow').play()
    
    def manage_sentences(s, sentence_type):
        """Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù…Ù„Ø§Øª"""
        sentences = s.normal_sentences if sentence_type == 'normal' else s.namousi_sentences
        type_name = 'Normal' if sentence_type == 'normal' else 'Family'
        
        win = AR.cw(
            source=s.w,
            size=(380, 350),
            ps=AR.UIS()*0.6
        )
        
        AR.add_close_button(win, position=(350, 310))
        
        tw(
            parent=win,
            text=f'\ue020 Manage sentences {type_name}',
            scale=0.9,
            position=(175, 305),
            h_align='center',
            color=(1, 1, 0)
        )
        
        # Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øª Ø¬Ù…Ù„Ø§Øª
        scroll = sw(
            parent=win,
            size=(340, 180),
            position=(20, 120)
        )
        
        container = cw(
            parent=scroll,
            size=(340, len(sentences) * 35),
            background=False
        )
        
        # Ù†Ù…Ø§ÛŒØ´ Ø¬Ù…Ù„Ø§Øª
        y_pos = len(sentences) * 30 - 10
        for i, sentence in enumerate(sentences):
            # Ø¬Ù…Ù„Ù‡
            tw(
                parent=container,
                text=f"{i+1}. {sentence}",
                position=(10, y_pos),
                scale=0.5,
                color=(1, 1, 1),
                maxwidth=220,
                h_align='left'
            )
            
            # Ø¯Ú©Ù…Ù‡ Ø­Ø°Ù
            bw(
                parent=container,
                label='',
                size=(30, 20),
                icon=gt('crossOut'),
                position=(280, y_pos),
                iconscale=0.9,
                on_activate_call=Call(s.delete_sentence, sentence_type, i, win),
                color=(0.8, 0.2, 0.2),
                text_scale=0.5
            )
            
            y_pos -= 30
        
        # Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ø¬Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯
        bw(
            parent=win,
            label='Add Sentence',
            size=(120, 25),
            icon=gt('nextLevelIcon'),
            position=(140, 70),
            iconscale=0.9,
            on_activate_call=Call(s.add_new_sentence, sentence_type, win),
            color=(0.2, 0.7, 0.3),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ
        bw(
            parent=win,
            label='Reset',
            size=(120, 25),
            icon=gt('replayIcon'),
            position=(140, 25),
            iconscale=0.9,
            on_activate_call=Call(s.reset_sentences, sentence_type, win),
            color=(0.5, 0.5, 0.8),
            textcolor=(1, 1, 1)
        )
        
    def add_new_sentence(s, sentence_type, parent_win):
        """Ø§ÙØ²ÙˆØ¯Ù† Ø¬Ù…Ù„Ù‡ Ø¬Ø¯ÛŒØ¯"""
        def save_sentence():
            new_sentence = tw(query=text_input).strip()
            if new_sentence:
                if sentence_type == 'normal':
                    s.normal_sentences.append(new_sentence)
                else:
                    s.namousi_sentences.append(new_sentence)
                
                push(f'New sentence added', color=(0, 1, 0))
                gs('dingSmallHigh').play()
                AR.swish(add_win)
                s.manage_sentences(sentence_type)
                # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
                if s.stats_text.exists():
                    tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: {"Active" if Bahari.spamming else "Inactive"}')
            else:
                AR.err('Please enter a sentence!')
        
        add_win = AR.cw(
            source=parent_win,
            size=(320, 160),
            ps=AR.UIS()*0.5
        )
        
        AR.add_close_button(add_win, position=(290, 120))
        
        type_name = 'Normal' if sentence_type == 'normal' else 'Family'
        tw(
            parent=add_win,
            text=f'New sentence {type_name}:',
            position=(20, 110),
            scale=0.7,
            color=(1, 1, 1)
        )
        
        text_input = tw(
            parent=add_win,
            position=(20, 70),
            size=(280, 30),
            editable=True,
            text='',
            color=(0.9, 0.9, 0.9),
            description="Enter your sentence"
        )
        
        bw(
            parent=add_win,
            label='Save',
            size=(80, 25),
            icon=gt('upButton'),
            position=(120, 25),
            iconscale=0.6,
            on_activate_call=save_sentence,
            color=(0, 0.6, 0)
        )
    
    def delete_sentence(s, sentence_type, index, parent_win):
        """Ø­Ø°Ù Ø¬Ù…Ù„Ù‡"""
        sentences = s.normal_sentences if sentence_type == 'normal' else s.namousi_sentences
        sentence = sentences[index]
        
        def confirm_delete():
            sentences.pop(index)
            push('Sentence deleted', color=(1, 0.5, 0))
            gs('dingSmallLow').play()
            AR.swish(confirm_win)
            s.manage_sentences(sentence_type)
            # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
            if s.stats_text.exists():
                tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: {"Active" if Bahari.spamming else "Inactive"}')
        
        confirm_win = AR.cw(
            source=parent_win,
            size=(320, 140),
            ps=AR.UIS()*0.5
        )
        
        AR.add_close_button(confirm_win, position=(290, 120))
        
        tw(
            parent=confirm_win,
            text=f'Are you sure you want to delete this sentence?',
            position=(130, 90),
            scale=0.6,
            color=(1, 1, 1),
            h_align='center'
        )
        
        bw(
            parent=confirm_win,
            label='Yes',
            size=(80, 25),
            position=(125, 25),
            on_activate_call=confirm_delete,
            color=(0.3, 0.6, 0.3)
        )
    
    def reset_sentences(s, sentence_type, parent_win):
        """Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¬Ù…Ù„Ø§Øª Ø¨Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶"""
        def confirm_reset():
            if sentence_type == 'normal':
                s.normal_sentences = [
                    "Ø¨Ù‡Ø§Ø± Ø¢Ù…Ø¯Ù‡ØŒ Ø·Ø¨ÛŒØ¹Øª Ø¨ÛŒØ¯Ø§Ø± Ø´Ø¯Ù‡",
                    "Ú¯Ù„Ù‡Ø§ Ø´Ú©ÙØªÙ‡ØŒ Ø¬Ù‡Ø§Ù† Ø²ÛŒØ¨Ø§ Ø´Ø¯Ù‡",
                    "Ù†Ø³ÛŒÙ… Ø¨Ù‡Ø§Ø±ÛŒØŒ Ø®Ù†Ú© Ùˆ ÙØ±Ø­ Ø¨Ø®Ø´",
                    "Ù¾Ø±Ù†Ø¯Ú¯Ø§Ù† Ø¢ÙˆØ§Ø²ØŒ Ø¨Ù‡Ø§Ø± Ø±Ø§ Ø¨Ø´Ø§Ø±Øª Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯",
                    "Ø¯Ø±Ø®ØªØ§Ù† Ø³Ø¨Ø²ØŒ Ø¬Ù‡Ø§Ù† Ø±Ø§ Ø²Ù†Ø¯Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯"
                ]
            else:
                s.namousi_sentences = [
                    "Ù†Ø§Ù…ÙˆØ³ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ØŒ Ù‚Ø§Ø¨Ù„ Ø§Ø­ØªØ±Ø§Ù… Ø§Ø³Øª",
                    "Ø­ÙØ¸ Ù†Ø§Ù…ÙˆØ³ØŒ Ù†Ø´Ø§Ù†Ù‡ Ø´Ø®ØµÛŒØª Ø§Ø³Øª",
                    "Ù†Ø§Ù…ÙˆØ³ØŒ Ø§Ù…Ø§Ù†ØªÛŒ Ø§Ù„Ù‡ÛŒ Ø§Ø³Øª",
                    "Ø­Ø±Ù…Øª Ù†Ø§Ù…ÙˆØ³ØŒ Ø­Ø±Ù…Øª Ø§Ù†Ø³Ø§Ù†ÛŒØª Ø§Ø³Øª",
                    "Ù†Ø§Ù…ÙˆØ³ØŒ Ø³Ø±Ù…Ø§ÛŒÙ‡ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø§Ø³Øª"
                ]
            
            push('Sentences reset', color=(0, 1, 1))
            gs('dingSmallHigh').play()
            AR.swish(confirm_win)
            s.manage_sentences(sentence_type)
            # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
            if s.stats_text.exists():
                tw(s.stats_text, text=f'ðŸ“Š Sentence statistics:\n\nNormal: {len(s.normal_sentences)}\nNamousi: {len(s.namousi_sentences)}\n\nðŸ”§ Status: {"Active" if Bahari.spamming else "Inactive"}')
        
        confirm_win = AR.cw(
            source=parent_win,
            size=(350, 140),
            ps=AR.UIS()*0.5
        )
        
        AR.add_close_button(confirm_win, position=(300, 100))
        
        type_name = 'Normal' if sentence_type == 'normal' else 'Family'
        tw(
            parent=confirm_win,
            text=f'Are you sure you want to \nreset the {type_name} sentences?',
            position=(140, 90),
            scale=0.6,
            color=(1, 1, 1),
            h_align='center'
        )
        
        bw(
            parent=confirm_win,
            label='Yes',
            size=(100, 30),
            icon=gt('replayIcon'),
            position=(130, 10),
            iconscale=0.6,
            on_activate_call=confirm_reset,
            color=(0.3, 0.6, 0.3)
        )
        
# Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ù¾ÛŒÙ†Ú¯
class PingButton:
    def __init__(s, source):
        s.w = AR.cw(
            source=source,
            size=(150, 80),
            ps=AR.UIS()*0.5
        )
        
        # Ø¯Ú©Ù…Ù‡ Ù¾ÛŒÙ†Ú¯
        s.ping_btn = bw(
            parent=s.w,
            label=f'{current_ping} ms',
            size=(120, 40),
            position=(15, 30),
            on_activate_call=s.send_ping,
            color=(0.3, 0.6, 0.8),
            textcolor=(1, 1, 1)
        )
        
        # ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
        teck(1.0, s.update_ping_button)
        
        AR.swish()
    
    def update_ping_button(s):
        """Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ØªÙ† Ø¯Ú©Ù…Ù‡ Ù¾ÛŒÙ†Ú¯"""
        try:
            if s.ping_btn.exists():
                # ØªØ¹ÛŒÛŒÙ† Ø±Ù†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾ÛŒÙ†Ú¯
                if current_ping < 100:
                    btn_color = (0.2, 0.8, 0.2)  # Ø³Ø¨Ø²
                elif current_ping < 300:
                    btn_color = (0.8, 0.8, 0.2)  # Ø²Ø±Ø¯
                else:
                    btn_color = (0.8, 0.2, 0.2)  # Ù‚Ø±Ù…Ø²
                
                bw(s.ping_btn, 
                   label=f'{current_ping} ms',
                   color=btn_color)
        except:
            pass
        
        # Ø§Ø¯Ø§Ù…Ù‡ ØªØ§ÛŒÙ…Ø±
        teck(1.0, s.update_ping_button)
    
    def send_ping(s):
        """Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒÙ†Ú¯ Ø¨Ù‡ Ú†Øª"""
        try:
            ping_message = f"ðŸ“ Ping : {current_ping} ms"
            CM(ping_message)
            push(f'Ping sent : {current_ping} ms', color=(0, 1, 0))
            gs('dingSmall').play()
        except Exception as e:
            AR.err(f'Error sending ping : {str(e)}')
            
class BsRushWindow:
    def __init__(s, source):
        w = s.w = AR.cw(
            source=source,
            size=(400, 300),
            ps=AR.UIS()*0.7
        )
        
        # Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ†
        AR.add_close_button(w, position=(360, 270))
        
        # Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ
        tw(
            parent=w,
            text='âš¡BsRush Menu',
            scale=1.2,
            position=(170, 250),
            h_align='center',
            color=(0, 1, 1)
        )
        
        # Ù†Ø§Ù… Ø³Ø§Ø²Ù†Ø¯Ù‡
        tw(
            parent=w,
            text='Subscribe to the channels below \nto download more mods.',
            scale=0.8,
            position=(190, 220),
            h_align='center',
            color=(1, 1, 0)
        )
        
        # Ù…ØªÙ† Ù…Ø¹Ø±ÙÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        tw(
            parent=w,
            text='Click on the buttons to open links in browser.',
            scale=0.7,
            position=(180, 150),
            h_align='center',
            color=(0, 1, 0)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø§ÙˆÙ„ - Ú©Ø§Ù†Ø§Ù„ Ø±Ø³Ù…ÛŒ
        bw(
            parent=w,
            label='Official Channel',
            size=(180, 35),
            icon=gt('achievementEmpty'),
            position=(20, 110),
            iconscale=0.9,
            on_activate_call=Call(s.open_url, 'https://t.me/BsRushGames'),
            color=(0.2, 0.6, 0.9),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø¯ÙˆÙ… - Ú¯Ù¾
        bw(
            parent=w,
            label='Group',
            size=(180, 35),
            icon=gt('achievementTeamPlayer'),
            position=(210, 110),
            iconscale=0.9,
            on_activate_call=Call(s.open_url, 'https://t.me/BSRush_Gap'),
            color=(0.3, 0.7, 0.4),
            textcolor=(1, 1, 1)
        )
        
        # Ø¯Ú©Ù…Ù‡ Ø³ÙˆÙ… - Ú©Ø§Ù†Ø§Ù„ Ù…ÙˆØ¯Ù‡Ø§
        bw(
            parent=w,
            label='Mods Channel',
            size=(180, 35),
            icon=gt('discordServer'),
            position=(110, 70),
            iconscale=0.9,
            on_activate_call=Call(s.open_url, 'https://t.me/BsRush_Mod'),
            color=(0.8, 0.4, 0.6),
            textcolor=(1, 1, 1)
        )
        
        # Ø¢ÛŒÚ©ÙˆÙ†
        bw(
            parent=w,
            size=(70, 70),
            position=(175, 5),
            label='',
            texture=gt('discordServer'),
            color=(1, 1, 1)
        )
        
        AR.swish()
    
    def open_url(s, url):
        """Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù„ÛŒÙ†Ú© Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø±"""
        try:
            import babase
            babase.open_url(url)
            push(f'Opening: {url}', color=(0, 1, 0))
            gs('dingSmall').play()
        except Exception as e:
            push(f'âŒ Error opening URL: {str(e)}', color=(1, 0, 0))
            
class SimpleCamera:
    def __init__(self):
        self.rotating = False
        self.rotation_timer = None
        self.rotation_angle = 0
    
    def open_camera_menu(self, source_widget):
        """Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ù†ÙˆÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø³ØªÛŒ"""
        try:
            import _babase
            import babase
            import bauiv1 as bui
            import math
            
            # Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ù†Ø¬Ø±Ù‡ Ø¹Ø±ÛŒØ¶â€ŒØªØ±
            w = bui.containerwidget(
                parent=bui.get_special_widget('overlay_stack'),
                size=(1100, 600),  # Ø¹Ø±Ø¶ Ø¨ÛŒØ´ØªØ± Ø´Ø¯Ù‡ Ø¨Ù‡ 1100
                transition='in_scale',
                scale=1.0,
                color=(0.15, 0.15, 0.15)
            )
            
            # Ø¹Ù†ÙˆØ§Ù† Ø§ØµÙ„ÛŒ
            bui.textwidget(
                parent=w,
                text='ðŸŽ¥ Manual Camera Control',
                position=(550, 550),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¹Ø±Ø¶ Ø¨ÛŒØ´ØªØ±
                scale=1.5,
                color=(0, 1, 1),
                h_align='center'
            )
            
            # Ù…ØªÙ† ØªÙˆØ¶ÛŒØ­ÛŒ
            bui.textwidget(
                parent=w,
                text='Control the game camera manually',
                position=(550, 500),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=0.8,
                color=(1, 1, 0.8),
                h_align='center'
            )
            
            # Ø¨Ø®Ø´ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯ÙˆØ±Ø¨ÛŒÙ†
            bui.textwidget(
                parent=w,
                text='ðŸ“· CAMERA POSITION',
                position=(150, 450),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.1,
                color=(0, 1, 0),
                h_align='center'
            )
            
            # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª - Ø¨Ø§ ÙØ§ØµÙ„Ù‡ Ø¨ÛŒØ´ØªØ±
            # Ø±Ø¯ÛŒÙ X
            bui.buttonwidget(
                parent=w,
                label='â† X-',
                size=(90, 45),
                icon=gt('ouyaOButton'),
                position=(10, 330),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'x-'),
                color=(0.8, 0.3, 0.3),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='â†’ X+',
                size=(90, 45),
                icon=gt('ouyaIcon'),
                position=(150, 330), 
                iconscale=0.6, # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'x'),
                color=(0.3, 0.8, 0.3),
                textcolor=(1, 1, 1)
            )
            
            # Ø±Ø¯ÛŒÙ Y
            bui.buttonwidget(
                parent=w,
                label='â†‘ Y+',
                size=(90, 45),
                icon=gt('ouyaUButton'),
                position=(75, 390),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'y'),
                color=(0.3, 0.3, 0.8),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='â†“ Y-',
                size=(90, 45),
                icon=gt('ouyaAButton'),
                position=(75, 270),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'y-'),
                color=(0.8, 0.8, 0.3),
                textcolor=(1, 1, 1)
            )
            
            # Ø±Ø¯ÛŒÙ Zoom
            bui.buttonwidget(
                parent=w,
                label='Zoom IN',
                size=(100, 45),
                icon=gt('upButton'),
                position=(270, 390),
                iconscale=0.6,  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'z'),
                color=(0.8, 0.3, 0.8),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='Zoom OUT',
                size=(100, 45),
                icon=gt('downButton'),
                position=(270, 330),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_camera_simple, 'z-'),
                color=(0.3, 0.8, 0.8),
                textcolor=(1, 1, 1)
            )
            
            # Ø¨Ø®Ø´ target Ø¯ÙˆØ±Ø¨ÛŒÙ†
            bui.textwidget(
                parent=w,
                text='ðŸŽ¯ CAMERA TARGET',
                position=(900, 450),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.1,
                color=(1, 0.5, 0),
                h_align='center'
            )
            
            # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ target
            bui.buttonwidget(
                parent=w,
                label='Target X-',
                size=(110, 45),
                icon=gt('ouyaAButton'),
                position=(800, 330), 
                iconscale=0.6, # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_target_simple, 'x-'),
                color=(0.8, 0.5, 0.3),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='Target X+',
                size=(110, 45),
                icon=gt('ouyaUButton'),
                position=(930, 330),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_target_simple, 'x'),
                color=(0.5, 0.8, 0.3),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='Target Y+',
                size=(110, 45),
                icon=gt('ouyaIcon'),
                position=(865, 390),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_target_simple, 'y'),
                color=(0.3, 0.5, 0.8),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='Target Y-',
                size=(110, 45),
                icon=gt('ouyaOButton'),
                position=(865, 270),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._move_target_simple, 'y-'),
                color=(0.8, 0.3, 0.5),
                textcolor=(1, 1, 1)
            )
            
            # Ø¨Ø®Ø´ Ú†Ø±Ø®Ø´ Ø¯ÙˆØ±Ø¨ÛŒÙ†
            bui.textwidget(
                parent=w,
                text=' CAMERA ROTATION',
                position=(550, 450),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.1,
                color=(1, 0.8, 0),
                h_align='center'
            )
            
            # Ø¯Ú©Ù…Ù‡ Ú†Ø±Ø®Ø´ Ø¯ÙˆØ±Ø¨ÛŒÙ†
            self.rotate_btn = bui.buttonwidget(
                parent=w,
                label='START ROTATION',
                size=(180, 50),
                icon=gt('startButton'),
                position=(485, 390),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=self._toggle_rotation,
                color=(0.6, 0.3, 0.8),
                textcolor=(1, 1, 1)
            )
            
            # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Øª Ú†Ø±Ø®Ø´
            bui.buttonwidget(
                parent=w,
                label='Right',
                size=(120, 40),
                icon=gt('rightButton'),
                position=(600, 330),
                iconscale=0.6,  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._set_rotation_direction, 'clockwise'),
                color=(0.4, 0.6, 0.8),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label='Left',
                size=(120, 40),
                icon=gt('leftButton'),
                position=(450, 330),
                iconscale=0.6,  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(self._set_rotation_direction, 'counter'),
                color=(0.8, 0.6, 0.4),
                textcolor=(1, 1, 1)
            )
            
            # Ø¨Ø®Ø´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
            bui.textwidget(
                parent=w,
                text='âš™ï¸ SETTINGS',
                position=(550, 220),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.1,
                color=(1, 1, 0),
                h_align='center'
            )
            
            # ÙÛŒÙ„Ø¯ Step
            bui.textwidget(
                parent=w,
                text='Step Size:',
                position=(450, 180),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.0,
                color=(1, 1, 1)
            )
            
            self.step_field = bui.textwidget(
                parent=w,
                position=(580, 170),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                size=(150, 40),
                text='1.0',
                editable=True,
                max_chars=6,
                color=(0.9, 0.9, 0.9)
            )
            
            # ÙÛŒÙ„Ø¯ Ø³Ø±Ø¹Øª Ú†Ø±Ø®Ø´
            bui.textwidget(
                parent=w,
                text='Rotation Speed:',
                position=(390, 130),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=1.0,
                color=(1, 1, 1)
            )
            
            self.speed_field = bui.textwidget(
                parent=w,
                position=(580, 120),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                size=(150, 40),
                text='1.0',
                editable=True,
                max_chars=6,
                color=(0.9, 0.9, 0.9)
            )
            
            # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„ÛŒ
            bui.buttonwidget(
                parent=w,
                label=' RESET CAMERA',
                size=(200, 55),
                icon=gt('replayIcon'),
                position=(350, 60),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=self._reset_camera_simple,
                color=(0.8, 0.2, 0.2),
                textcolor=(1, 1, 1)
            )
            
            bui.buttonwidget(
                parent=w,
                label=' DONE',
                size=(200, 55),
                icon=gt('achievementOutline'),
                position=(600, 60),  
                iconscale=0.6,# Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                on_activate_call=babase.Call(bui.containerwidget, w, transition='out_scale'),
                color=(0.2, 0.8, 0.2),
                textcolor=(1, 1, 1)
            )
            
            # Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ¶Ø¹ÛŒØª
            self.status_text = bui.textwidget(
                parent=w,
                text='ðŸŽ¥ Camera control ready - Click buttons to adjust',
                position=(550, 20),  # Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯
                scale=0.8,
                color=(0.8, 1, 0.8),
                h_align='center'
            )
            
            # Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ø¯Ø± Ú¯ÙˆØ´Ù‡ Ø¨Ø§Ù„Ø§ Ø±Ø§Ø³Øª
            bui.buttonwidget(
                parent=w,
                label='X',
                size=(70, 70),
                position=(1020, 545),
                on_activate_call=babase.Call(bui.containerwidget, w, transition='out_scale'),
                color=(0.8, 0.2, 0.2),
                textcolor=(1, 1, 1)
            )
            
            # Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ú†Ø±Ø®Ø´
            self.rotation_direction = 'clockwise'
            self.rotation_angle = 0
            
            self._update_status("ðŸŽ¥ Camera control ready - Adjust as needed")
            
        except Exception as e:
            print(f"Error opening camera menu: {e}")
    
    def _toggle_rotation(self):
        """Ø´Ø±ÙˆØ¹ ÛŒØ§ ØªÙˆÙ‚Ù Ú†Ø±Ø®Ø´ Ø¯ÙˆØ±Ø¨ÛŒÙ†"""
        try:
            import bauiv1 as bui
            
            if not self.rotating:
                # Ø´Ø±ÙˆØ¹ Ú†Ø±Ø®Ø´
                self.rotating = True
                bui.buttonwidget(edit=self.rotate_btn, 
                               label='â¹ï¸ STOP ROTATION', 
                               color=(0.8, 0.2, 0.2))
                self._update_status("ðŸ”„ Camera rotation STARTED")
                self._start_rotation()
            else:
                # ØªÙˆÙ‚Ù Ú†Ø±Ø®Ø´
                self.rotating = False
                bui.buttonwidget(edit=self.rotate_btn, 
                               label='ðŸ”„ START ROTATION', 
                               color=(0.6, 0.3, 0.8))
                self._update_status("â¹ï¸ Camera rotation STOPPED")
                
        except Exception as e:
            print(f"Error toggling rotation: {e}")
    
    def _set_rotation_direction(self, direction):
        """ØªÙ†Ø¸ÛŒÙ… Ø¬Ù‡Øª Ú†Ø±Ø®Ø´"""
        self.rotation_direction = direction
        direction_text = "CLOCKWISE" if direction == 'clockwise' else "COUNTER-CLOCKWISE"
        self._update_status(f"ðŸ”„ Rotation direction: {direction_text}")
    
    def _start_rotation(self):
        """Ø´Ø±ÙˆØ¹ Ú†Ø±Ø®Ø´ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø± Ø¬Ø§ÛŒ Ø®ÙˆØ¯Ø´"""
        if not self.rotating:
            return
            
        try:
            import _babase
            import bauiv1 as bui
            import math
            
            # ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø­Ø§Ù„Øª Ø¯Ø³ØªÛŒ
            _babase.set_camera_manual(True)
            
            # Ø¯Ø±ÛŒØ§ÙØª Ø³Ø±Ø¹Øª Ú†Ø±Ø®Ø´
            try:
                speed_text = bui.textwidget(query=self.speed_field)
                speed = float(speed_text) if speed_text else 2.0
            except:
                speed = 2.0
            
            # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ø§ÙˆÛŒÙ‡ Ø¬Ø¯ÛŒØ¯
            if self.rotation_direction == 'clockwise':
                self.rotation_angle += speed
            else:
                self.rotation_angle -= speed
            
            # Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø²Ø§ÙˆÛŒÙ‡ Ø¨ÛŒÙ† 0 ØªØ§ 360
            self.rotation_angle %= 360
            
            # Ú¯Ø±ÙØªÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ target
            camera_pos = _babase.get_camera_position()
            target_pos = _babase.get_camera_target()
            
            # Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø¯ÙˆØ±Ø¨ÛŒÙ† Ùˆ target
            dx = target_pos[0] - camera_pos[0]
            dy = target_pos[1] - camera_pos[1]
            dz = target_pos[2] - camera_pos[2]
            distance = math.sqrt(dx*dx + dy*dy + dz*dz)
            
            # Ú†Ø±Ø®Ø´ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø­ÙˆÙ„ target (Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¯Ø± Ø¬Ø§ÛŒ Ø®ÙˆØ¯Ø´ Ù…ÛŒâ€ŒÚ†Ø±Ø®Ø¯)
            if distance > 0:
                dx /= distance
                dy /= distance
                dz /= distance
                
                # Ú†Ø±Ø®Ø´ Ø­ÙˆÙ„ Ù…Ø­ÙˆØ± Y (Ú†Ø±Ø®Ø´ Ø§ÙÙ‚ÛŒ)
                rad_angle = math.radians(speed if self.rotation_direction == 'clockwise' else -speed)
                cos_angle = math.cos(rad_angle)
                sin_angle = math.sin(rad_angle)
                
                # Ú†Ø±Ø®Ø´ Ø¨Ø±Ø¯Ø§Ø± Ø¬Ù‡Øª Ø­ÙˆÙ„ Ù…Ø­ÙˆØ± Y
                new_dx = dx * cos_angle + dz * sin_angle
                new_dz = -dx * sin_angle + dz * cos_angle
                
                # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯ Ø¯ÙˆØ±Ø¨ÛŒÙ†
                new_camera_x = target_pos[0] - new_dx * distance
                new_camera_z = target_pos[2] - new_dz * distance
                
                # ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯ Ø¯ÙˆØ±Ø¨ÛŒÙ†
                _babase.set_camera_position(new_camera_x, camera_pos[1], new_camera_z)
            
            # ØªÙ†Ø¸ÛŒÙ… ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ ÙØ±ÛŒÙ… Ø¨Ø¹Ø¯ÛŒ
            self.rotation_timer = bui.apptimer(0.05, self._start_rotation)
            
        except Exception as e:
            print(f"Error in rotation: {e}")
            self.rotating = False
    
    def _get_step_value(self):
        """Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø¯Ø§Ø± step Ø§Ø² ÙÛŒÙ„Ø¯"""
        try:
            import bauiv1 as bui
            step_text = bui.textwidget(query=self.step_field)
            return float(step_text) if step_text else 1.0
        except:
            return 1.0
    
    def _update_status(self, message):
        """Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª"""
        try:
            import bauiv1 as bui
            if hasattr(self, 'status_text'):
                bui.textwidget(edit=self.status_text, text=message)
                print(f"Camera Status: {message}")
        except Exception as e:
            print(f"Error updating status: {e}")
    
    def _move_camera_simple(self, direction):
        """Ø­Ø±Ú©Øª Ø³Ø§Ø¯Ù‡ Ø¯ÙˆØ±Ø¨ÛŒÙ†"""
        try:
            import _babase
            step = self._get_step_value()
            pos = list(_babase.get_camera_position())
            
            # Ø§ÙˆÙ„ Ø­Ø§Ù„Øª Ø¯Ø³ØªÛŒ Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†
            _babase.set_camera_manual(True)
            
            if direction == 'x':
                pos[0] += step
            elif direction == 'x-':
                pos[0] -= step
            elif direction == 'y':
                pos[1] += step
            elif direction == 'y-':
                pos[1] -= step
            elif direction == 'z':
                pos[2] += step
            elif direction == 'z-':
                pos[2] -= step
            
            _babase.set_camera_position(pos[0], pos[1], pos[2])
            self._update_status(f"ðŸ“· Camera moved {direction} by {step}")
            
        except Exception as e:
            print(f"Error moving camera: {e}")
            self._update_status("âŒ Error moving camera!")
    
    def _move_target_simple(self, direction):
        """Ø­Ø±Ú©Øª Ø³Ø§Ø¯Ù‡ target"""
        try:
            import _babase
            step = self._get_step_value()
            target = list(_babase.get_camera_target())
            
            # Ø§ÙˆÙ„ Ø­Ø§Ù„Øª Ø¯Ø³ØªÛŒ Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†
            _babase.set_camera_manual(True)
            
            if direction == 'x':
                target[0] += step
            elif direction == 'x-':
                target[0] -= step
            elif direction == 'y':
                target[1] += step
            elif direction == 'y-':
                target[1] -= step
            
            _babase.set_camera_target(target[0], target[1], target[2])
            self._update_status(f"ðŸŽ¯ Target moved {direction} by {step}")
            
        except Exception as e:
            print(f"Error moving target: {e}")
            self._update_status("âŒ Error moving target!")
    
    def _reset_camera_simple(self):
        """Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©"""
        try:
            import _babase
            self.rotating = False
            _babase.set_camera_manual(False)
            self._update_status("ðŸ”„ Camera reset to AUTO mode!")
        except Exception as e:
            print(f"Error resetting camera: {e}")
            self._update_status("âŒ Error resetting camera!")
    
    def _done_camera_simple(self, window):
        """Ø¨Ø³ØªÙ† Ù¾Ù†Ø¬Ø±Ù‡ - Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø±Ø§ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†"""
        try:
            import bauiv1 as bui
            import _babase
            self.rotating = False
            _babase.set_camera_manual(False)
            bui.containerwidget(edit=window, transition='out_scale')
            self._update_status("âœ… Window closed - Camera returned to AUTO mode")
        except Exception as e:
            print(f"Error in done_camera: {e}")

# Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÙˆÙ†Ù‡
camera_control = SimpleCamera()

# ba_meta require api 9
# ba_meta export plugin
class byTaha(Plugin):
    me = lambda c=0: APP.plus.get_v1_account_name() if APP.plus.get_v1_account_state() == 'signed_in' else '???'
    v2 = cs(sc.V2_LOGO)
    B = 'â€‹'
    
    def __init__(s):
        # Ø§ÙˆØ±Ø±Ø§ÛŒØ¯ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Ø§ØªØµØ§Ù„
        setup_connection_overrides()
        
        # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…ØªØºÛŒØ± Ø¢Ù†ØªÛŒ Ø§Ø³Ù¾Ù…
        s.last_command_time = {}
        s.cooldown_time = 1.5
        
        o = party.PartyWindow.__init__
        def e(self,*a,**k):
            r = o(self,*a,**k)
            
# Ø¯Ø± Ù…ØªØ¯ __init__ Ú©Ù„Ø§Ø³ byTahaØŒ Ø¨Ø¹Ø¯ Ø§Ø² Ø¯Ú©Ù…Ù‡ BsRush:
            b_camera = AR.bw(
                icon=gt('tv'),
                position=(self._width-570, self._height-112),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Camera'
            )
            bw(b_camera, on_activate_call=lambda: camera_control.open_camera_menu(b_camera))
            
            b_bsrush = AR.bw(
                icon=gt('achievementOffYouGo'),
                position=(self._width-570, self._height-80),  # Ø²ÛŒØ± Ø¯Ú©Ù…Ù‡ Ù¾ÛŒÙ†Ú¯
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='BsRush'
            )
            bw(b_bsrush, on_activate_call=Call(BsRushWindow, source=b_bsrush))
            
            reconnect_btn = AR.bw(
                icon=gt('replayIcon'),
               position=(self._width-570, self._height-208),
               parent=self._root_widget,
               iconscale=0.6,
               size=(80,25),
               label='Reconnect',
               on_activate_call=Call(Reconnect, self._root_widget)  
            )
            
            # Ø¯Ú©Ù…Ù‡ Server Info Ø²ÛŒØ± Ø¯Ú©Ù…Ù‡ Reconnect
            b_serverinfo = AR.bw(
                icon=gt('star'),
                position=(self._width-570, self._height-240),  # Ø²ÛŒØ± Ø¯Ú©Ù…Ù‡ Reconnect
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Server Info'
            )
            bw(b_serverinfo, on_activate_call=Call(ServerInfo, b_serverinfo))
            
            # Ù…Ø«Ù„Ø§Ù‹ Ø¯Ø± Ú©Ù„Ø§Ø³ byTaha Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ:
            b_ping = AR.bw(
                icon=gt('coin'),
                position=(self._width-570, self._height-48),  # Ø¨Ø§Ù„Ø§ÛŒ Ù‡Ù…Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Ping'
            )
            bw(b_ping, on_activate_call=Call(PingButton, source=b_ping))
            
            # Ø¯Ú©Ù…Ù‡ Ø¨Ù‡Ø§Ø±ÛŒ Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_bahari = AR.bw(
                icon=gt('trophy'),
                position=(self._width+10, self._height-304),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='obscenity'
            )
            bw(b_bahari, on_activate_call=Call(Bahari, source=b_bahari))
            
            b_spam = AR.bw(
                icon=gt('startButton'),
                position=(self._width-570, self._height-176),  # Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Spam'
            )
            bw(b_spam, on_activate_call=Call(Spam, source=b_spam))
            
            b_quickchat = AR.bw(
                icon=gt('bombButton'),
                position=(self._width-570, self._height-144),  # Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Quick Chat'
            )
            bw(b_quickchat, on_activate_call=Call(QuickChat, source=b_quickchat))
            
            b_calculator = AR.bw(
                icon=gt('chTitleChar2'),
                position=(self._width+10, self._height-48),  # Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Calculator'
            )
            bw(b_calculator, on_activate_call=Call(Calculator, source=b_calculator))
            
            # Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§Ø¯Ù‡Ø§ Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_icons = AR.bw(
                icon=gt('upButton'),  
                position=(self._width+10, self._height-112), 
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Icons'
            )
            bw(b_icons, on_activate_call=Call(show_icons_menu, source_widget=b_icons))
            
            # Ø¯Ú©Ù…Ù‡ ØªØºÛŒÛŒØ± Ø±Ù†Ú¯ UI Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_uicolor = AR.bw(
                icon=gt('storeCharacterXmas'),
                position=(self._width+10, self._height-144),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='UI Color'
            )
            bw(b_uicolor, on_activate_call=Call(UIColorChanger, source=b_uicolor))
            
            # Ø¯Ú©Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_playerinfo = AR.bw(
                icon=gt('achievementSuperPunch'),
                position=(self._width+10, self._height-176),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Players'
            )
            bw(b_playerinfo, on_activate_call=Call(PlayerInfo, source=b_playerinfo))
            
            # Ø¯Ú©Ù…Ù‡ Ú†Øª Ù„Ø§Ú¯ Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_chatlog = AR.bw(
                icon=gt('logIcon'),
                position=(self._width+10, self._height-240),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Chat Log'
            )
            bw(b_chatlog, on_activate_call=Call(ChatLog, source=b_chatlog))
            
            # Ø¯Ú©Ù…Ù‡ ÙÙˆÙ†Øªâ€ŒØ³Ø§Ø² Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_font = AR.bw(
                icon=gt('goldPass'),
                position=(self._width+10, self._height-208),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Font Maker'
            )
            bw(b_font, on_activate_call=Call(FontMaker, source=b_font))
            
            # Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªÛŒÚ©Ø± Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_sticker = AR.bw(
                icon=gt('heart'),
                position=(self._width+10, self._height-272),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Stickers'
            )
            bw(b_sticker, on_activate_call=Call(StickerMenu, source=b_sticker))
            
            # Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ Ù¾ÛŒØ§Ù… Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¨Ø§ Ø¢ÛŒÚ©ÙˆÙ†
            b_main = AR.bw(
                icon=gt('achievementOutline'),
                position=(self._width+10, self._height-80),
                parent=self._root_widget,
                iconscale=0.6,
                size=(80,25),
                label='Auto Msg'
            )
            bw(b_main, on_activate_call=Call(AR, source=b_main))
            
            return r
        
        party.PartyWindow.__init__ = e
        s.z = []
        teck(5, s.ear)
    
    def __del__(s):
        if ping_thread:
            ping_thread.stop()
    
    def ear(s):
        try:
            z = GCM()
            teck(0.3, s.ear)
            if z == s.z: return
            
            if not var('state'):
                s.z = z
                return
            
            s.z = z
            if not z: return
            
            v = z[-1]
            if v.endswith(s.B): return
            
            if ': ' not in v:
                return
                
            f, m = v.split(': ', 1)
            k = s.me()
            if f in [k, s.v2+k] and not var('tune2'): return
            
            current_time = time.time()
            if f in s.last_command_time:
                time_since_last = current_time - s.last_command_time[f]
                if time_since_last < s.cooldown_time:
                    return
            
            if var('tune3'): 
                l = var('l')
            else: 
                m = m.lower()
                l = var('lc')
                
            h = l.get(m, None)
            if h is not None:
                a, b, _ = h
                s.S(b, a, f, 0)
                s.last_command_time[f] = current_time
            else:
                re = [y for y, _ in sorted([(y, m.find(y)) for y in l if y in m], key=lambda x: x[1])]
                for r in re:
                    a, b, c = l.get(r, [0, 0, 0])
                    if not r or not c: continue
                    s.S(b, a, f, 1)
                    s.last_command_time[f] = current_time
                    break
        except Exception as e:
            print(f"Error in ear: {e}")

    def S(s,b,a,f,j):
        p = AR.parse(t=a,s=f)
        teck(b,Call(CM,p+s.B))
        push(f"{['Ø¨Ø±Ø§Ø¨Ø±','Ø´Ø§Ù…Ù„'][j]}!\nÙ¾Ø§Ø³Ø® Ø¨Ù‡: {f}\nØ¨Ø§ Ù…ØªÙ†: {p}\nØ¨Ø¹Ø¯ Ø§Ø² {b} Ø«Ø§Ù†ÛŒÙ‡!",color=(0,0.8,0.8)) if var('tune0') else None
        gs('dingSmallHigh').play() if var('tune1') else None
